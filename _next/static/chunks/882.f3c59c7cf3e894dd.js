(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{31050:function(t,r,i){"use strict";r.Xx=r._w=r.aP=r.KS=r.jQ=void 0,i(31416);let c=i(93350);function gf(t){let r=new Float64Array(16);if(t)for(let i=0;i<t.length;i++)r[i]=t[i];return r}i(17309),r.jQ=64,r.KS=64,r.aP=32;let l=new Uint8Array(32);l[0]=9;let v=gf(),_=gf([1]),w=(gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222])),P=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),O=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);function set25519(t,r){for(let i=0;i<16;i++)t[i]=0|r[i]}function car25519(t){let r=1;for(let i=0;i<16;i++){let c=t[i]+r+65535;r=Math.floor(c/65536),t[i]=c-65536*r}t[0]+=r-1+37*(r-1)}function sel25519(t,r,i){let c=~(i-1);for(let i=0;i<16;i++){let l=c&(t[i]^r[i]);t[i]^=l,r[i]^=l}}function pack25519(t,r){let i=gf(),c=gf();for(let t=0;t<16;t++)c[t]=r[t];car25519(c),car25519(c),car25519(c);for(let t=0;t<2;t++){i[0]=c[0]-65517;for(let t=1;t<15;t++)i[t]=c[t]-65535-(i[t-1]>>16&1),i[t-1]&=65535;i[15]=c[15]-32767-(i[14]>>16&1);let t=i[15]>>16&1;i[14]&=65535,sel25519(c,i,1-t)}for(let r=0;r<16;r++)t[2*r]=255&c[r],t[2*r+1]=c[r]>>8}gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function add(t,r,i){for(let c=0;c<16;c++)t[c]=r[c]+i[c]}function sub(t,r,i){for(let c=0;c<16;c++)t[c]=r[c]-i[c]}function mul(t,r,i){let c,l,v=0,_=0,w=0,P=0,O=0,C=0,A=0,T=0,q=0,M=0,k=0,$=0,U=0,B=0,J=0,Q=0,X=0,et=0,es=0,eo=0,ec=0,eh=0,el=0,ep=0,ef=0,ed=0,eg=0,ey=0,em=0,e_=0,eb=0,ew=i[0],eE=i[1],eI=i[2],eP=i[3],ex=i[4],eS=i[5],eR=i[6],eO=i[7],eC=i[8],eA=i[9],eL=i[10],eN=i[11],ej=i[12],eT=i[13],eD=i[14],ez=i[15];v+=(c=r[0])*ew,_+=c*eE,w+=c*eI,P+=c*eP,O+=c*ex,C+=c*eS,A+=c*eR,T+=c*eO,q+=c*eC,M+=c*eA,k+=c*eL,$+=c*eN,U+=c*ej,B+=c*eT,J+=c*eD,Q+=c*ez,_+=(c=r[1])*ew,w+=c*eE,P+=c*eI,O+=c*eP,C+=c*ex,A+=c*eS,T+=c*eR,q+=c*eO,M+=c*eC,k+=c*eA,$+=c*eL,U+=c*eN,B+=c*ej,J+=c*eT,Q+=c*eD,X+=c*ez,w+=(c=r[2])*ew,P+=c*eE,O+=c*eI,C+=c*eP,A+=c*ex,T+=c*eS,q+=c*eR,M+=c*eO,k+=c*eC,$+=c*eA,U+=c*eL,B+=c*eN,J+=c*ej,Q+=c*eT,X+=c*eD,et+=c*ez,P+=(c=r[3])*ew,O+=c*eE,C+=c*eI,A+=c*eP,T+=c*ex,q+=c*eS,M+=c*eR,k+=c*eO,$+=c*eC,U+=c*eA,B+=c*eL,J+=c*eN,Q+=c*ej,X+=c*eT,et+=c*eD,es+=c*ez,O+=(c=r[4])*ew,C+=c*eE,A+=c*eI,T+=c*eP,q+=c*ex,M+=c*eS,k+=c*eR,$+=c*eO,U+=c*eC,B+=c*eA,J+=c*eL,Q+=c*eN,X+=c*ej,et+=c*eT,es+=c*eD,eo+=c*ez,C+=(c=r[5])*ew,A+=c*eE,T+=c*eI,q+=c*eP,M+=c*ex,k+=c*eS,$+=c*eR,U+=c*eO,B+=c*eC,J+=c*eA,Q+=c*eL,X+=c*eN,et+=c*ej,es+=c*eT,eo+=c*eD,ec+=c*ez,A+=(c=r[6])*ew,T+=c*eE,q+=c*eI,M+=c*eP,k+=c*ex,$+=c*eS,U+=c*eR,B+=c*eO,J+=c*eC,Q+=c*eA,X+=c*eL,et+=c*eN,es+=c*ej,eo+=c*eT,ec+=c*eD,eh+=c*ez,T+=(c=r[7])*ew,q+=c*eE,M+=c*eI,k+=c*eP,$+=c*ex,U+=c*eS,B+=c*eR,J+=c*eO,Q+=c*eC,X+=c*eA,et+=c*eL,es+=c*eN,eo+=c*ej,ec+=c*eT,eh+=c*eD,el+=c*ez,q+=(c=r[8])*ew,M+=c*eE,k+=c*eI,$+=c*eP,U+=c*ex,B+=c*eS,J+=c*eR,Q+=c*eO,X+=c*eC,et+=c*eA,es+=c*eL,eo+=c*eN,ec+=c*ej,eh+=c*eT,el+=c*eD,ep+=c*ez,M+=(c=r[9])*ew,k+=c*eE,$+=c*eI,U+=c*eP,B+=c*ex,J+=c*eS,Q+=c*eR,X+=c*eO,et+=c*eC,es+=c*eA,eo+=c*eL,ec+=c*eN,eh+=c*ej,el+=c*eT,ep+=c*eD,ef+=c*ez,k+=(c=r[10])*ew,$+=c*eE,U+=c*eI,B+=c*eP,J+=c*ex,Q+=c*eS,X+=c*eR,et+=c*eO,es+=c*eC,eo+=c*eA,ec+=c*eL,eh+=c*eN,el+=c*ej,ep+=c*eT,ef+=c*eD,ed+=c*ez,$+=(c=r[11])*ew,U+=c*eE,B+=c*eI,J+=c*eP,Q+=c*ex,X+=c*eS,et+=c*eR,es+=c*eO,eo+=c*eC,ec+=c*eA,eh+=c*eL,el+=c*eN,ep+=c*ej,ef+=c*eT,ed+=c*eD,eg+=c*ez,U+=(c=r[12])*ew,B+=c*eE,J+=c*eI,Q+=c*eP,X+=c*ex,et+=c*eS,es+=c*eR,eo+=c*eO,ec+=c*eC,eh+=c*eA,el+=c*eL,ep+=c*eN,ef+=c*ej,ed+=c*eT,eg+=c*eD,ey+=c*ez,B+=(c=r[13])*ew,J+=c*eE,Q+=c*eI,X+=c*eP,et+=c*ex,es+=c*eS,eo+=c*eR,ec+=c*eO,eh+=c*eC,el+=c*eA,ep+=c*eL,ef+=c*eN,ed+=c*ej,eg+=c*eT,ey+=c*eD,em+=c*ez,J+=(c=r[14])*ew,Q+=c*eE,X+=c*eI,et+=c*eP,es+=c*ex,eo+=c*eS,ec+=c*eR,eh+=c*eO,el+=c*eC,ep+=c*eA,ef+=c*eL,ed+=c*eN,eg+=c*ej,ey+=c*eT,em+=c*eD,e_+=c*ez,Q+=(c=r[15])*ew,X+=c*eE,et+=c*eI,es+=c*eP,eo+=c*ex,ec+=c*eS,eh+=c*eR,el+=c*eO,ep+=c*eC,ef+=c*eA,ed+=c*eL,eg+=c*eN,ey+=c*ej,em+=c*eT,e_+=c*eD,eb+=c*ez,v+=38*X,_+=38*et,w+=38*es,P+=38*eo,O+=38*ec,C+=38*eh,A+=38*el,T+=38*ep,q+=38*ef,M+=38*ed,k+=38*eg,$+=38*ey,U+=38*em,B+=38*e_,J+=38*eb,l=Math.floor((c=v+(l=1)+65535)/65536),v=c-65536*l,l=Math.floor((c=_+l+65535)/65536),_=c-65536*l,l=Math.floor((c=w+l+65535)/65536),w=c-65536*l,l=Math.floor((c=P+l+65535)/65536),P=c-65536*l,l=Math.floor((c=O+l+65535)/65536),O=c-65536*l,l=Math.floor((c=C+l+65535)/65536),C=c-65536*l,l=Math.floor((c=A+l+65535)/65536),A=c-65536*l,l=Math.floor((c=T+l+65535)/65536),T=c-65536*l,l=Math.floor((c=q+l+65535)/65536),q=c-65536*l,l=Math.floor((c=M+l+65535)/65536),M=c-65536*l,l=Math.floor((c=k+l+65535)/65536),k=c-65536*l,l=Math.floor((c=$+l+65535)/65536),$=c-65536*l,l=Math.floor((c=U+l+65535)/65536),U=c-65536*l,l=Math.floor((c=B+l+65535)/65536),B=c-65536*l,l=Math.floor((c=J+l+65535)/65536),J=c-65536*l,l=Math.floor((c=Q+l+65535)/65536),Q=c-65536*l,v+=l-1+37*(l-1),l=Math.floor((c=v+(l=1)+65535)/65536),v=c-65536*l,l=Math.floor((c=_+l+65535)/65536),_=c-65536*l,l=Math.floor((c=w+l+65535)/65536),w=c-65536*l,l=Math.floor((c=P+l+65535)/65536),P=c-65536*l,l=Math.floor((c=O+l+65535)/65536),O=c-65536*l,l=Math.floor((c=C+l+65535)/65536),C=c-65536*l,l=Math.floor((c=A+l+65535)/65536),A=c-65536*l,l=Math.floor((c=T+l+65535)/65536),T=c-65536*l,l=Math.floor((c=q+l+65535)/65536),q=c-65536*l,l=Math.floor((c=M+l+65535)/65536),M=c-65536*l,l=Math.floor((c=k+l+65535)/65536),k=c-65536*l,l=Math.floor((c=$+l+65535)/65536),$=c-65536*l,l=Math.floor((c=U+l+65535)/65536),U=c-65536*l,l=Math.floor((c=B+l+65535)/65536),B=c-65536*l,l=Math.floor((c=J+l+65535)/65536),J=c-65536*l,l=Math.floor((c=Q+l+65535)/65536),Q=c-65536*l,v+=l-1+37*(l-1),t[0]=v,t[1]=_,t[2]=w,t[3]=P,t[4]=O,t[5]=C,t[6]=A,t[7]=T,t[8]=q,t[9]=M,t[10]=k,t[11]=$,t[12]=U,t[13]=B,t[14]=J,t[15]=Q}function edadd(t,r){let i=gf(),c=gf(),l=gf(),v=gf(),_=gf(),P=gf(),O=gf(),C=gf(),A=gf();sub(i,t[1],t[0]),sub(A,r[1],r[0]),mul(i,i,A),add(c,t[0],t[1]),add(A,r[0],r[1]),mul(c,c,A),mul(l,t[3],r[3]),mul(l,l,w),mul(v,t[2],r[2]),add(v,v,v),sub(_,c,i),sub(P,v,l),add(O,v,l),add(C,c,i),mul(t[0],_,P),mul(t[1],C,O),mul(t[2],O,P),mul(t[3],_,C)}function cswap(t,r,i){for(let c=0;c<4;c++)sel25519(t[c],r[c],i)}function pack(t,r){let i=gf(),c=gf(),l=gf();(function(t,r){let i;let c=gf();for(i=0;i<16;i++)c[i]=r[i];for(i=253;i>=0;i--)mul(c,c,c),2!==i&&4!==i&&mul(c,c,r);for(i=0;i<16;i++)t[i]=c[i]})(l,r[2]),mul(i,r[0],l),mul(c,r[1],l),pack25519(t,c),t[31]^=function(t){let r=new Uint8Array(32);return pack25519(r,t),1&r[0]}(i)<<7}function scalarbase(t,r){let i=[gf(),gf(),gf(),gf()];set25519(i[0],P),set25519(i[1],O),set25519(i[2],_),mul(i[3],P,O),function(t,r,i){set25519(t[0],v),set25519(t[1],_),set25519(t[2],_),set25519(t[3],v);for(let c=255;c>=0;--c){let l=i[c/8|0]>>(7&c)&1;cswap(t,r,l),edadd(r,t),edadd(t,t),cswap(t,r,l)}}(t,i,r)}r._w=function(t){if(t.length!==r.aP)throw Error(`ed25519: seed must be ${r.aP} bytes`);let i=(0,c.hash)(t);i[0]&=248,i[31]&=127,i[31]|=64;let l=new Uint8Array(32),v=[gf(),gf(),gf(),gf()];scalarbase(v,i),pack(l,v);let _=new Uint8Array(64);return _.set(t),_.set(l,32),{publicKey:l,secretKey:_}};let C=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(t,r){let i,c,l,v;for(c=63;c>=32;--c){for(i=0,l=c-32,v=c-12;l<v;++l)r[l]+=i-16*r[c]*C[l-(c-32)],i=Math.floor((r[l]+128)/256),r[l]-=256*i;r[l]+=i,r[c]=0}for(l=0,i=0;l<32;l++)r[l]+=i-(r[31]>>4)*C[l],i=r[l]>>8,r[l]&=255;for(l=0;l<32;l++)r[l]-=i*C[l];for(c=0;c<32;c++)r[c+1]+=r[c]>>8,t[c]=255&r[c]}function reduce(t){let r=new Float64Array(64);for(let i=0;i<64;i++)r[i]=t[i];for(let r=0;r<64;r++)t[r]=0;modL(t,r)}r.Xx=function(t,r){let i=new Float64Array(64),l=[gf(),gf(),gf(),gf()],v=(0,c.hash)(t.subarray(0,32));v[0]&=248,v[31]&=127,v[31]|=64;let _=new Uint8Array(64);_.set(v.subarray(32),32);let w=new c.SHA512;w.update(_.subarray(32)),w.update(r);let P=w.digest();w.clean(),reduce(P),scalarbase(l,P),pack(_,l),w.reset(),w.update(_.subarray(0,32)),w.update(t.subarray(32)),w.update(r);let O=w.digest();reduce(O);for(let t=0;t<32;t++)i[t]=P[t];for(let t=0;t<32;t++)for(let r=0;r<32;r++)i[t+r]+=O[t]*v[r];return modL(_.subarray(32),i),_}},93350:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var c=i(98099),l=i(17309);r.DIGEST_LENGTH=64,r.BLOCK_SIZE=128;var v=function(){function SHA512(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return SHA512.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},SHA512.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},SHA512.prototype.clean=function(){l.wipe(this._buffer),l.wipe(this._tempHi),l.wipe(this._tempLo),this.reset()},SHA512.prototype.update=function(t,i){if(void 0===i&&(i=t.length),this._finished)throw Error("SHA512: can't update because hash was finished.");var c=0;if(this._bytesHashed+=i,this._bufferLength>0){for(;this._bufferLength<r.BLOCK_SIZE&&i>0;)this._buffer[this._bufferLength++]=t[c++],i--;this._bufferLength===this.blockSize&&(hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(i>=this.blockSize&&(c=hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,t,c,i),i%=this.blockSize);i>0;)this._buffer[this._bufferLength++]=t[c++],i--;return this},SHA512.prototype.finish=function(t){if(!this._finished){var r=this._bytesHashed,i=this._bufferLength,l=r%128<112?128:256;this._buffer[i]=128;for(var v=i+1;v<l-8;v++)this._buffer[v]=0;c.writeUint32BE(r/536870912|0,this._buffer,l-8),c.writeUint32BE(r<<3,this._buffer,l-4),hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,l),this._finished=!0}for(var v=0;v<this.digestLength/8;v++)c.writeUint32BE(this._stateHi[v],t,8*v),c.writeUint32BE(this._stateLo[v],t,8*v+4);return this},SHA512.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},SHA512.prototype.saveState=function(){if(this._finished)throw Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},SHA512.prototype.restoreState=function(t){return this._stateHi.set(t.stateHi),this._stateLo.set(t.stateLo),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},SHA512.prototype.cleanSavedState=function(t){l.wipe(t.stateHi),l.wipe(t.stateLo),t.buffer&&l.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},SHA512}();r.SHA512=v;var _=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function hashBlocks(t,r,i,l,v,w,P){for(var O,C,A,T,q,M,k,$,U=i[0],B=i[1],J=i[2],Q=i[3],X=i[4],et=i[5],es=i[6],eo=i[7],ec=l[0],eh=l[1],el=l[2],ep=l[3],ef=l[4],ed=l[5],eg=l[6],ey=l[7];P>=128;){for(var em=0;em<16;em++){var e_=8*em+w;t[em]=c.readUint32BE(v,e_),r[em]=c.readUint32BE(v,e_+4)}for(var em=0;em<80;em++){var eb=U,ew=B,eE=J,eI=Q,eP=X,ex=et,eS=es,eR=eo,eO=ec,eC=eh,eA=el,eL=ep,eN=ef,ej=ed,eT=eg,eD=ey;if(O=eo,q=65535&(C=ey),M=C>>>16,k=65535&O,$=O>>>16,O=(X>>>14|ef<<18)^(X>>>18|ef<<14)^(ef>>>9|X<<23),q+=65535&(C=(ef>>>14|X<<18)^(ef>>>18|X<<14)^(X>>>9|ef<<23)),M+=C>>>16,k+=65535&O,$+=O>>>16,O=X&et^~X&es,q+=65535&(C=ef&ed^~ef&eg),M+=C>>>16,k+=65535&O,$+=O>>>16,O=_[2*em],q+=65535&(C=_[2*em+1]),M+=C>>>16,k+=65535&O,$+=O>>>16,O=t[em%16],q+=65535&(C=r[em%16]),M+=C>>>16,k+=65535&O,$+=O>>>16,M+=q>>>16,k+=M>>>16,$+=k>>>16,A=65535&k|$<<16,T=65535&q|M<<16,O=A,q=65535&(C=T),M=C>>>16,k=65535&O,$=O>>>16,O=(U>>>28|ec<<4)^(ec>>>2|U<<30)^(ec>>>7|U<<25),q+=65535&(C=(ec>>>28|U<<4)^(U>>>2|ec<<30)^(U>>>7|ec<<25)),M+=C>>>16,k+=65535&O,$+=O>>>16,O=U&B^U&J^B&J,q+=65535&(C=ec&eh^ec&el^eh&el),M+=C>>>16,k+=65535&O,$+=O>>>16,M+=q>>>16,k+=M>>>16,$+=k>>>16,eR=65535&k|$<<16,eD=65535&q|M<<16,O=eI,q=65535&(C=eL),M=C>>>16,k=65535&O,$=O>>>16,O=A,q+=65535&(C=T),M+=C>>>16,k+=65535&O,$+=O>>>16,M+=q>>>16,k+=M>>>16,$+=k>>>16,eI=65535&k|$<<16,eL=65535&q|M<<16,B=eb,J=ew,Q=eE,X=eI,et=eP,es=ex,eo=eS,U=eR,eh=eO,el=eC,ep=eA,ef=eL,ed=eN,eg=ej,ey=eT,ec=eD,em%16==15)for(var e_=0;e_<16;e_++)O=t[e_],q=65535&(C=r[e_]),M=C>>>16,k=65535&O,$=O>>>16,O=t[(e_+9)%16],q+=65535&(C=r[(e_+9)%16]),M+=C>>>16,k+=65535&O,$+=O>>>16,O=((A=t[(e_+1)%16])>>>1|(T=r[(e_+1)%16])<<31)^(A>>>8|T<<24)^A>>>7,q+=65535&(C=(T>>>1|A<<31)^(T>>>8|A<<24)^(T>>>7|A<<25)),M+=C>>>16,k+=65535&O,$+=O>>>16,O=((A=t[(e_+14)%16])>>>19|(T=r[(e_+14)%16])<<13)^(T>>>29|A<<3)^A>>>6,q+=65535&(C=(T>>>19|A<<13)^(A>>>29|T<<3)^(T>>>6|A<<26)),M+=C>>>16,k+=65535&O,$+=O>>>16,M+=q>>>16,k+=M>>>16,$+=k>>>16,t[e_]=65535&k|$<<16,r[e_]=65535&q|M<<16}O=U,q=65535&(C=ec),M=C>>>16,k=65535&O,$=O>>>16,O=i[0],q+=65535&(C=l[0]),M+=C>>>16,k+=65535&O,$+=O>>>16,M+=q>>>16,k+=M>>>16,$+=k>>>16,i[0]=U=65535&k|$<<16,l[0]=ec=65535&q|M<<16,O=B,q=65535&(C=eh),M=C>>>16,k=65535&O,$=O>>>16,O=i[1],q+=65535&(C=l[1]),M+=C>>>16,k+=65535&O,$+=O>>>16,M+=q>>>16,k+=M>>>16,$+=k>>>16,i[1]=B=65535&k|$<<16,l[1]=eh=65535&q|M<<16,O=J,q=65535&(C=el),M=C>>>16,k=65535&O,$=O>>>16,O=i[2],q+=65535&(C=l[2]),M+=C>>>16,k+=65535&O,$+=O>>>16,M+=q>>>16,k+=M>>>16,$+=k>>>16,i[2]=J=65535&k|$<<16,l[2]=el=65535&q|M<<16,O=Q,q=65535&(C=ep),M=C>>>16,k=65535&O,$=O>>>16,O=i[3],q+=65535&(C=l[3]),M+=C>>>16,k+=65535&O,$+=O>>>16,M+=q>>>16,k+=M>>>16,$+=k>>>16,i[3]=Q=65535&k|$<<16,l[3]=ep=65535&q|M<<16,O=X,q=65535&(C=ef),M=C>>>16,k=65535&O,$=O>>>16,O=i[4],q+=65535&(C=l[4]),M+=C>>>16,k+=65535&O,$+=O>>>16,M+=q>>>16,k+=M>>>16,$+=k>>>16,i[4]=X=65535&k|$<<16,l[4]=ef=65535&q|M<<16,O=et,q=65535&(C=ed),M=C>>>16,k=65535&O,$=O>>>16,O=i[5],q+=65535&(C=l[5]),M+=C>>>16,k+=65535&O,$+=O>>>16,M+=q>>>16,k+=M>>>16,$+=k>>>16,i[5]=et=65535&k|$<<16,l[5]=ed=65535&q|M<<16,O=es,q=65535&(C=eg),M=C>>>16,k=65535&O,$=O>>>16,O=i[6],q+=65535&(C=l[6]),M+=C>>>16,k+=65535&O,$+=O>>>16,M+=q>>>16,k+=M>>>16,$+=k>>>16,i[6]=es=65535&k|$<<16,l[6]=eg=65535&q|M<<16,O=eo,q=65535&(C=ey),M=C>>>16,k=65535&O,$=O>>>16,O=i[7],q+=65535&(C=l[7]),M+=C>>>16,k+=65535&O,$+=O>>>16,M+=q>>>16,k+=M>>>16,$+=k>>>16,i[7]=eo=65535&k|$<<16,l[7]=ey=65535&q|M<<16,w+=128,P-=128}return w}r.hash=function(t){var r=new v;r.update(t);var i=r.digest();return r.clean(),i}},40926:function(t,r,i){"use strict";function getBrowerCrypto(){return(null===i.g||void 0===i.g?void 0:i.g.crypto)||(null===i.g||void 0===i.g?void 0:i.g.msCrypto)||{}}function getSubtleCrypto(){let t=getBrowerCrypto();return t.subtle||t.webkitSubtle}Object.defineProperty(r,"__esModule",{value:!0}),r.isBrowserCryptoAvailable=r.getSubtleCrypto=r.getBrowerCrypto=void 0,r.getBrowerCrypto=getBrowerCrypto,r.getSubtleCrypto=getSubtleCrypto,r.isBrowserCryptoAvailable=function(){return!!getBrowerCrypto()&&!!getSubtleCrypto()}},88618:function(t,r,i){"use strict";var c=i(83454);function isReactNative(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function isNode(){return void 0!==c&&void 0!==c.versions&&void 0!==c.versions.node}Object.defineProperty(r,"__esModule",{value:!0}),r.isBrowser=r.isNode=r.isReactNative=void 0,r.isReactNative=isReactNative,r.isNode=isNode,r.isBrowser=function(){return!isReactNative()&&!isNode()}},1468:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0});let c=i(70655);c.__exportStar(i(40926),r),c.__exportStar(i(88618),r)},20882:function(t,r,i){"use strict";i.d(r,{EthereumProvider:function(){return rA},OPTIONAL_EVENTS:function(){return rI},OPTIONAL_METHODS:function(){return rw}});var c=i(17187),l=i.n(c),v=i(5015),_=i(85150),w=i(90772),P=i(9107),O=i(38200);let n=class n extends O.q{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}};let h=class h extends O.q{constructor(t,r){super(),this.core=t,this.logger=r,this.records=new Map}};let a=class a{constructor(t,r){this.logger=t,this.core=r}};let u=class u extends O.q{constructor(t,r){super(),this.relayer=t,this.logger=r}};let g=class g extends O.q{constructor(t){super()}};let p=class p{constructor(t,r,i,c){this.core=t,this.logger=r,this.name=i}};let d=class d extends O.q{constructor(t,r){super(),this.relayer=t,this.logger=r}};let E=class E extends O.q{constructor(t,r){super(),this.core=t,this.logger=r}};let y=class y{constructor(t,r){this.projectId=t,this.logger=r}};let b=class b{constructor(t){this.opts=t,this.protocol="wc",this.version=2}};let S=class S{constructor(t){this.client=t}};let JSONStringify=t=>JSON.stringify(t,(t,r)=>"bigint"==typeof r?r.toString()+"n":r),JSONParse=t=>{let r=t.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(r,(t,r)=>{let i="string"==typeof r&&r.match(/^\d+n$/);return i?BigInt(r.substring(0,r.length-1)):r})};function esm_safeJsonParse(t){if("string"!=typeof t)throw Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSONParse(t)}catch(r){return t}}function safeJsonStringify(t){return"string"==typeof t?t:JSONStringify(t)||""}var C=i(31050),A=i(31416),T=i(66736);let q="base64url",M="base58btc";var k=i(20605),$=i(92263),U=i(52217);function encodeJSON(t){return(0,$.B)((0,U.m)(safeJsonStringify(t),"utf8"),q)}function encodeIss(t){let r=(0,U.m)("K36",M),i="z"+(0,$.B)((0,k.z)([r,t]),M);return["did","key",i].join(":")}function generateKeyPair(t=(0,A.randomBytes)(32)){return C._w(t)}async function signJWT(t,r,i,c,l=(0,T.fromMiliseconds)(Date.now())){var v,_,w;let P={alg:"EdDSA",typ:"JWT"},O=encodeIss(c.publicKey),A={iss:O,sub:t,aud:r,iat:l,exp:l+i},M=(v={header:P,payload:A},(0,U.m)([encodeJSON(v.header),encodeJSON(v.payload)].join("."),"utf8")),k=C.Xx(c.secretKey,M);return[encodeJSON((_={header:P,payload:A,signature:k}).header),encodeJSON(_.payload),(w=_.signature,(0,$.B)(w,q))].join(".")}i(43014);var B=i(37466);let J="INTERNAL_ERROR",Q="SERVER_ERROR",X=[-32700,-32600,-32601,-32602,-32603],et={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[J]:{code:-32603,message:"Internal error"},[Q]:{code:-32e3,message:"Server error"}};function getError(t){return Object.keys(et).includes(t)?et[t]:et[Q]}function parseConnectionError(t,r,i){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?Error(`Unavailable ${i} RPC url at ${r}`):t}var es=i(1468);function payloadId(t=3){let r=Date.now()*Math.pow(10,t);return r+Math.floor(Math.random()*Math.pow(10,t))}function getBigIntRpcId(t=6){return BigInt(payloadId(t))}function formatJsonRpcRequest(t,r,i){return{id:i||payloadId(),jsonrpc:"2.0",method:t,params:r}}function formatJsonRpcResult(t,r){return{id:t,jsonrpc:"2.0",result:r}}function formatJsonRpcError(t,r,i){var c,l;return{id:t,jsonrpc:"2.0",error:void 0===(c=r)?getError(J):("string"==typeof c&&(c=Object.assign(Object.assign({},getError(Q)),{message:c})),void 0!==i&&(c.data=i),l=c.code,X.includes(l)&&(c=function(t){let r=Object.values(et).find(r=>r.code===t);return r||et[Q]}(c.code)),c)}}let misc_IEvents=class misc_IEvents{};let IBaseJsonRpcProvider=class IBaseJsonRpcProvider extends misc_IEvents{constructor(){super()}};let IJsonRpcProvider=class IJsonRpcProvider extends IBaseJsonRpcProvider{constructor(t){super()}};function matchRegexProtocol(t,r){let i=function(t){let r=t.match(RegExp(/^\w+:/,"gi"));if(r&&r.length)return r[0]}(t);return void 0!==i&&new RegExp(r).test(i)}function isHttpUrl(t){return matchRegexProtocol(t,"^https?:")}function isWsUrl(t){return matchRegexProtocol(t,"^wss?:")}function isJsonRpcPayload(t){return"object"==typeof t&&"id"in t&&"jsonrpc"in t&&"2.0"===t.jsonrpc}function isJsonRpcRequest(t){return isJsonRpcPayload(t)&&"method"in t}function isJsonRpcResponse(t){return isJsonRpcPayload(t)&&(isJsonRpcResult(t)||isJsonRpcError(t))}function isJsonRpcResult(t){return"result"in t}function isJsonRpcError(t){return"error"in t}let JsonRpcProvider=class JsonRpcProvider extends IJsonRpcProvider{constructor(t){super(t),this.events=new c.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async request(t,r){return this.requestStrict(formatJsonRpcRequest(t.method,t.params||[],t.id||getBigIntRpcId().toString()),r)}async requestStrict(t,r){return new Promise(async(i,c)=>{if(!this.connection.connected)try{await this.open()}catch(t){c(t)}this.events.on(`${t.id}`,t=>{isJsonRpcError(t)?c(t.error):i(t.result)});try{await this.connection.send(t,r)}catch(t){c(t)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),isJsonRpcResponse(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&3e3===t.code&&this.events.emit("error",Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof t&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}};let hasBuiltInWebSocket=()=>"undefined"!=typeof WebSocket||void 0!==i.g&&void 0!==i.g.WebSocket||"undefined"!=typeof window&&void 0!==window.WebSocket||"undefined"!=typeof self&&void 0!==self.WebSocket,truncateQuery=t=>t.split("?")[0],eo="undefined"!=typeof WebSocket?WebSocket:void 0!==i.g&&void 0!==i.g.WebSocket?i.g.WebSocket:"undefined"!=typeof window&&void 0!==window.WebSocket?window.WebSocket:"undefined"!=typeof self&&void 0!==self.WebSocket?self.WebSocket:i(57026);var ec=class{constructor(t){if(this.url=t,this.events=new c.EventEmitter,this.registering=!1,!isWsUrl(t))throw Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return void 0!==this.socket}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,r)=>{if(void 0===this.socket){r(Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),t()},this.socket.close()})}async send(t,r){void 0===this.socket&&(this.socket=await this.register());try{this.socket.send(safeJsonStringify(t))}catch(r){this.onError(t.id,r)}}register(t=this.url){if(!isWsUrl(t))throw Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){let t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((t,r)=>{this.events.once("register_error",t=>{this.resetMaxListeners(),r(t)}),this.events.once("open",()=>{if(this.resetMaxListeners(),void 0===this.socket)return r(Error("WebSocket connection is missing or invalid"));t(this.socket)})})}return this.url=t,this.registering=!0,new Promise((r,i)=>{let c=(0,es.isReactNative)()?void 0:{rejectUnauthorized:!RegExp("wss?://localhost(:d{2,5})?").test(t)},l=new eo(t,[],c);hasBuiltInWebSocket()?l.onerror=t=>{i(this.emitError(t.error))}:l.on("error",t=>{i(this.emitError(t))}),l.onopen=()=>{this.onOpen(l),r(l)}})}onOpen(t){t.onmessage=t=>this.onPayload(t),t.onclose=t=>this.onClose(t),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(void 0===t.data)return;let r="string"==typeof t.data?esm_safeJsonParse(t.data):t.data;this.events.emit("payload",r)}onError(t,r){let i=this.parseError(r),c=i.message||i.toString(),l=formatJsonRpcError(t,c);this.events.emit("payload",l)}parseError(t,r=this.url){return parseConnectionError(t,truncateQuery(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(t){let r=this.parseError(Error((null==t?void 0:t.message)||`WebSocket connection failed for host: ${truncateQuery(this.url)}`));return this.events.emit("register_error",r),r}},eh=i(72307),el=i.n(eh),ep=i(83454),Vi=function(t,r){if(t.length>=255)throw TypeError("Alphabet too long");for(var i=new Uint8Array(256),c=0;c<i.length;c++)i[c]=255;for(var l=0;l<t.length;l++){var v=t.charAt(l),_=v.charCodeAt(0);if(255!==i[_])throw TypeError(v+" is ambiguous");i[_]=l}var w=t.length,P=t.charAt(0),O=Math.log(w)/Math.log(256),C=Math.log(256)/Math.log(w);function y(t){if("string"!=typeof t)throw TypeError("Expected String");if(0===t.length)return new Uint8Array;var r=0;if(" "!==t[0]){for(var c=0,l=0;t[r]===P;)c++,r++;for(var v=(t.length-r)*O+1>>>0,_=new Uint8Array(v);t[r];){var C=i[t.charCodeAt(r)];if(255===C)return;for(var A=0,T=v-1;(0!==C||A<l)&&-1!==T;T--,A++)C+=w*_[T]>>>0,_[T]=C%256>>>0,C=C/256>>>0;if(0!==C)throw Error("Non-zero carry");l=A,r++}if(" "!==t[r]){for(var q=v-l;q!==v&&0===_[q];)q++;for(var M=new Uint8Array(c+(v-q)),k=c;q!==v;)M[k++]=_[q++];return M}}}return{encode:function(r){if(r instanceof Uint8Array||(ArrayBuffer.isView(r)?r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength):Array.isArray(r)&&(r=Uint8Array.from(r))),!(r instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===r.length)return"";for(var i=0,c=0,l=0,v=r.length;l!==v&&0===r[l];)l++,i++;for(var _=(v-l)*C+1>>>0,O=new Uint8Array(_);l!==v;){for(var A=r[l],T=0,q=_-1;(0!==A||T<c)&&-1!==q;q--,T++)A+=256*O[q]>>>0,O[q]=A%w>>>0,A=A/w>>>0;if(0!==A)throw Error("Non-zero carry");c=T,l++}for(var M=_-c;M!==_&&0===O[M];)M++;for(var k=P.repeat(i);M<_;++M)k+=t.charAt(O[M]);return k},decodeUnsafe:y,decode:function(t){var i=y(t);if(i)return i;throw Error(`Non-${r} character`)}}};let ze=t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw Error("Unknown type, must be binary type")},qi=t=>new TextEncoder().encode(t),ji=t=>new TextDecoder().decode(t);let Yi=class Yi{constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}};let Gi=class Gi{constructor(t,r,i){if(this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if("string"==typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return Ne(this,t)}};let Hi=class Hi{constructor(t){this.decoders=t}or(t){return Ne(this,t)}decode(t){let r=t[0],i=this.decoders[r];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};let Ne=(t,r)=>new Hi({...t.decoders||{[t.prefix]:t},...r.decoders||{[r.prefix]:r}});let Ji=class Ji{constructor(t,r,i,c){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=c,this.encoder=new Yi(t,r,i),this.decoder=new Gi(t,r,c)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};let W=({name:t,prefix:r,encode:i,decode:c})=>new Ji(t,r,i,c),K=({prefix:t,name:r,alphabet:i})=>{let{encode:c,decode:l}=Vi(i,r);return W({prefix:t,name:r,encode:c,decode:t=>ze(l(t))})},Wi=(t,r,i,c)=>{let l={};for(let t=0;t<r.length;++t)l[r[t]]=t;let v=t.length;for(;"="===t[v-1];)--v;let _=new Uint8Array(v*i/8|0),w=0,P=0,O=0;for(let r=0;r<v;++r){let v=l[t[r]];if(void 0===v)throw SyntaxError(`Non-${c} character`);P=P<<i|v,(w+=i)>=8&&(w-=8,_[O++]=255&P>>w)}if(w>=i||255&P<<8-w)throw SyntaxError("Unexpected end of data");return _},Xi=(t,r,i)=>{let c="="===r[r.length-1],l=(1<<i)-1,v="",_=0,w=0;for(let c=0;c<t.length;++c)for(w=w<<8|t[c],_+=8;_>i;)_-=i,v+=r[l&w>>_];if(_&&(v+=r[l&w<<i-_]),c)for(;v.length*i&7;)v+="=";return v},index_es_g=({name:t,prefix:r,bitsPerChar:i,alphabet:c})=>W({prefix:r,name:t,encode:t=>Xi(t,c,i),decode:r=>Wi(r,c,i,t)}),ef=W({prefix:"\x00",name:"identity",encode:t=>ji(t),decode:t=>qi(t)});var ed=Object.freeze({__proto__:null,identity:ef});let eg=index_es_g({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ey=Object.freeze({__proto__:null,base2:eg});let em=index_es_g({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var e_=Object.freeze({__proto__:null,base8:em});let eb=K({prefix:"9",name:"base10",alphabet:"0123456789"});var ew=Object.freeze({__proto__:null,base10:eb});let eE=index_es_g({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),eI=index_es_g({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var eP=Object.freeze({__proto__:null,base16:eE,base16upper:eI});let ex=index_es_g({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),eS=index_es_g({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),eR=index_es_g({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),eO=index_es_g({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),eC=index_es_g({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),eA=index_es_g({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),eL=index_es_g({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),eN=index_es_g({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ej=index_es_g({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var eT=Object.freeze({__proto__:null,base32:ex,base32upper:eS,base32pad:eR,base32padupper:eO,base32hex:eC,base32hexupper:eA,base32hexpad:eL,base32hexpadupper:eN,base32z:ej});let eD=K({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ez=K({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var eM=Object.freeze({__proto__:null,base36:eD,base36upper:ez});let ek=K({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),eH=K({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var e$=Object.freeze({__proto__:null,base58btc:ek,base58flickr:eH});let eU=index_es_g({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),eV=index_es_g({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),eB=index_es_g({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),eK=index_es_g({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var eJ=Object.freeze({__proto__:null,base64:eU,base64pad:eV,base64url:eB,base64urlpad:eK});let eF=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),eW=eF.reduce((t,r,i)=>(t[i]=r,t),[]),eG=eF.reduce((t,r,i)=>(t[r.codePointAt(0)]=i,t),[]),eZ=W({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(t){return t.reduce((t,r)=>t+=eW[r],"")},decode:function(t){let r=[];for(let i of t){let t=eG[i.codePointAt(0)];if(void 0===t)throw Error(`Non-base256emoji character: ${i}`);r.push(t)}return new Uint8Array(r)}});var eY=Object.freeze({__proto__:null,base256emoji:eZ});function Fe(t,r,i){r=r||[],i=i||0;for(var c=i;t>=2147483648;)r[i++]=255&t|128,t/=128;for(;-128&t;)r[i++]=255&t|128,t>>>=7;return r[i]=0|t,Fe.bytes=i-c+1,r}function oe(t,r){var i,c=0,r=r||0,l=0,v=r,_=t.length;do{if(v>=_)throw oe.bytes=0,RangeError("Could not decode varint");i=t[v++],c+=l<28?(127&i)<<l:(127&i)*Math.pow(2,l),l+=7}while(i>=128);return oe.bytes=v-r,c}var eQ={encode:Fe,decode:oe,encodingLength:function(t){return t<128?1:t<16384?2:t<2097152?3:t<268435456?4:t<34359738368?5:t<4398046511104?6:t<562949953421312?7:t<72057594037927940?8:t<0x7fffffffffffffff?9:10}};let ke=(t,r,i=0)=>(eQ.encode(t,r,i),r),Ke=t=>eQ.encodingLength(t),he=(t,r)=>{let i=r.byteLength,c=Ke(t),l=c+Ke(i),v=new Uint8Array(l+i);return ke(t,v,0),ke(i,v,c),v.set(r,l),new Zs(t,i,r,v)};let Zs=class Zs{constructor(t,r,i,c){this.code=t,this.size=r,this.digest=i,this.bytes=c}};let Be=({name:t,code:r,encode:i})=>new er(t,r,i);let er=class er{constructor(t,r,i){this.name=t,this.code=r,this.encode=i}digest(t){if(t instanceof Uint8Array){let r=this.encode(t);return r instanceof Uint8Array?he(this.code,r):r.then(t=>he(this.code,t))}throw Error("Unknown type, must be binary type")}};let Ve=t=>async r=>new Uint8Array(await crypto.subtle.digest(t,r)),eX=Be({name:"sha2-256",code:18,encode:Ve("SHA-256")}),e0=Be({name:"sha2-512",code:19,encode:Ve("SHA-512")});var e1=Object.freeze({__proto__:null,sha256:eX,sha512:e0}),e5=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:ze,digest:t=>he(0,ze(t))}});new TextEncoder,new TextDecoder;let e6={...ed,...ey,...e_,...ew,...eP,...eT,...eM,...e$,...eJ,...eY};function Ge(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function He(t,r,i,c){return{name:t,prefix:r,encoder:{name:t,prefix:r,encode:i},decoder:{decode:c}}}({...e1,...e5});let e2=He("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),e3=He("ascii","a",t=>{let r="a";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r},t=>{t=t.substring(1);let r=function(t=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?Ge(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}),e4={utf8:e2,"utf-8":e2,hex:e6.base16,latin1:e3,ascii:e3,binary:e3,...e6},e9="core",e7=`wc@2:${e9}:`,e8={logger:"error"},te={database:":memory:"},tn="client_ed25519_seed",ts=T.ONE_DAY,to=T.SIX_HOURS,ta="wss://relay.walletconnect.com",tc="wss://relay.walletconnect.org",th={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},tl={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},tp=T.ONE_SECOND,tf={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},td=1e3*T.FIVE_SECONDS,tg={wc_pairingDelete:{req:{ttl:T.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:T.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:T.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:T.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:T.ONE_DAY,prompt:!1,tag:0},res:{ttl:T.ONE_DAY,prompt:!1,tag:0}}},ty={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},tm={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},t_={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},tb="verify-api",tw="https://verify.walletconnect.com",tE="https://verify.walletconnect.org";let Rt=class Rt{constructor(t,r){this.core=t,this.logger=r,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=e7,this.init=async()=>{if(!this.initialized){let t=await this.getKeyChain();"u">typeof t&&(this.keychain=t),this.initialized=!0}},this.has=t=>(this.isInitialized(),this.keychain.has(t)),this.set=async(t,r)=>{this.isInitialized(),this.keychain.set(t,r),await this.persist()},this.get=t=>{this.isInitialized();let r=this.keychain.get(t);if(typeof r>"u"){let{message:r}=(0,v.Z7)("NO_MATCHING_KEY",`${this.name}: ${t}`);throw Error(r)}return r},this.del=async t=>{this.isInitialized(),this.keychain.delete(t),await this.persist()},this.core=t,this.logger=(0,P.generateChildLogger)(r,this.name)}get context(){return(0,P.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,(0,v.KC)(t))}async getKeyChain(){let t=await this.core.storage.getItem(this.storageKey);return"u">typeof t?(0,v.IP)(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:t}=(0,v.Z7)("NOT_INITIALIZED",this.name);throw Error(t)}}};let _t=class _t{constructor(t,r,i){this.core=t,this.logger=r,this.name="crypto",this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=t=>(this.isInitialized(),this.keychain.has(t)),this.getClientId=async()=>{this.isInitialized();let t=await this.getClientSeed(),r=generateKeyPair(t);return encodeIss(r.publicKey)},this.generateKeyPair=()=>{this.isInitialized();let t=(0,v.Au)();return this.setPrivateKey(t.publicKey,t.privateKey)},this.signJWT=async t=>{this.isInitialized();let r=await this.getClientSeed(),i=generateKeyPair(r),c=(0,v.jd)();return await signJWT(c,t,ts,i)},this.generateSharedKey=(t,r,i)=>{this.isInitialized();let c=this.getPrivateKey(t),l=(0,v.m$)(c,r);return this.setSymKey(l,i)},this.setSymKey=async(t,r)=>{this.isInitialized();let i=r||(0,v.Ym)(t);return await this.keychain.set(i,t),i},this.deleteKeyPair=async t=>{this.isInitialized(),await this.keychain.del(t)},this.deleteSymKey=async t=>{this.isInitialized(),await this.keychain.del(t)},this.encode=async(t,r,i)=>{this.isInitialized();let c=(0,v.EN)(i),l=safeJsonStringify(r);if((0,v.Q8)(c)){let r=c.senderPublicKey,i=c.receiverPublicKey;t=await this.generateSharedKey(r,i)}let _=this.getSymKey(t),{type:w,senderPublicKey:P}=c;return(0,v.HI)({type:w,symKey:_,message:l,senderPublicKey:P})},this.decode=async(t,r,i)=>{this.isInitialized();let c=(0,v.Ll)(r,i);if((0,v.Q8)(c)){let r=c.receiverPublicKey,i=c.senderPublicKey;t=await this.generateSharedKey(r,i)}try{let i=this.getSymKey(t),c=(0,v.pe)({symKey:i,encoded:r});return esm_safeJsonParse(c)}catch(r){this.logger.error(`Failed to decode message from topic: '${t}', clientId: '${await this.getClientId()}'`),this.logger.error(r)}},this.getPayloadType=t=>{let r=(0,v.vB)(t);return(0,v.WG)(r.type)},this.getPayloadSenderPublicKey=t=>{let r=(0,v.vB)(t);return r.senderPublicKey?(0,B.BB)(r.senderPublicKey,v.AW):void 0},this.core=t,this.logger=(0,P.generateChildLogger)(r,this.name),this.keychain=i||new Rt(this.core,this.logger)}get context(){return(0,P.getLoggerContext)(this.logger)}async setPrivateKey(t,r){return await this.keychain.set(t,r),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(tn)}catch{t=(0,v.jd)(),await this.keychain.set(tn,t)}return function(t,r="utf8"){let i=e4[r];if(!i)throw Error(`Unsupported encoding "${r}"`);return("utf8"===r||"utf-8"===r)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?Ge(globalThis.Buffer.from(t,"utf-8")):i.decoder.decode(`${i.prefix}${t}`)}(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){let{message:t}=(0,v.Z7)("NOT_INITIALIZED",this.name);throw Error(t)}}};let St=class St extends a{constructor(t,r){super(t,r),this.logger=t,this.core=r,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=e7,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let t=await this.getRelayerMessages();"u">typeof t&&(this.messages=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}finally{this.initialized=!0}}},this.set=async(t,r)=>{this.isInitialized();let i=(0,v.rj)(r),c=this.messages.get(t);return typeof c>"u"&&(c={}),"u">typeof c[i]||(c[i]=r,this.messages.set(t,c),await this.persist()),i},this.get=t=>{this.isInitialized();let r=this.messages.get(t);return typeof r>"u"&&(r={}),r},this.has=(t,r)=>{this.isInitialized();let i=this.get(t),c=(0,v.rj)(r);return"u">typeof i[c]},this.del=async t=>{this.isInitialized(),this.messages.delete(t),await this.persist()},this.logger=(0,P.generateChildLogger)(t,this.name),this.core=r}get context(){return(0,P.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,(0,v.KC)(t))}async getRelayerMessages(){let t=await this.core.storage.getItem(this.storageKey);return"u">typeof t?(0,v.IP)(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){let{message:t}=(0,v.Z7)("NOT_INITIALIZED",this.name);throw Error(t)}}};let Dr=class Dr extends u{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.events=new c.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,T.toMiliseconds)(T.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(t,r,i)=>{var c;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:t,message:r,opts:i}});try{let l=i?.ttl||to,_=(0,v._H)(i),w=i?.prompt||!1,P=i?.tag||0,O=i?.id||getBigIntRpcId().toString(),C={topic:t,message:r,opts:{ttl:l,relay:_,prompt:w,tag:P,id:O}},A=setTimeout(()=>this.queue.set(O,C),this.publishTimeout);try{await await (0,v.hF)(this.rpcPublish(t,r,l,_,w,P,O),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(O),this.relayer.events.emit(th.publish,C)}catch(t){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,null!=(c=i?.internal)&&c.throwOnFailedPublish)throw this.removeRequestFromQueue(O),t;return}finally{clearTimeout(A)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:t,message:r,opts:i}})}catch(t){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(t),t}},this.on=(t,r)=>{this.events.on(t,r)},this.once=(t,r)=>{this.events.once(t,r)},this.off=(t,r)=>{this.events.off(t,r)},this.removeListener=(t,r)=>{this.events.removeListener(t,r)},this.relayer=t,this.logger=(0,P.generateChildLogger)(r,this.name),this.registerEventListeners()}get context(){return(0,P.getLoggerContext)(this.logger)}rpcPublish(t,r,i,c,l,_,w){var P,O,C,A;let T={method:(0,v.cO)(c.protocol).publish,params:{topic:t,message:r,ttl:i,prompt:l,tag:_},id:w};return(0,v.o8)(null==(P=T.params)?void 0:P.prompt)&&(null==(O=T.params)||delete O.prompt),(0,v.o8)(null==(C=T.params)?void 0:C.tag)&&(null==(A=T.params)||delete A.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:T}),this.relayer.request(T)}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async t=>{let{topic:r,message:i,opts:c}=t;await this.publish(r,i,c)})}registerEventListeners(){this.relayer.core.heartbeat.on(w.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(th.connection_stalled);return}this.checkQueue()}),this.relayer.on(th.message_ack,t=>{this.removeRequestFromQueue(t.id.toString())})}};let yr=class yr{constructor(){this.map=new Map,this.set=(t,r)=>{let i=this.get(t);this.exists(t,r)||this.map.set(t,[...i,r])},this.get=t=>this.map.get(t)||[],this.exists=(t,r)=>this.get(t).includes(r),this.delete=(t,r)=>{if(typeof r>"u"){this.map.delete(t);return}if(!this.map.has(t))return;let i=this.get(t);if(!this.exists(t,r))return;let c=i.filter(t=>t!==r);if(!c.length){this.map.delete(t);return}this.map.set(t,c)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}};var tI=Object.defineProperty,tP=Object.defineProperties,tx=Object.getOwnPropertyDescriptors,tS=Object.getOwnPropertySymbols,tR=Object.prototype.hasOwnProperty,tO=Object.prototype.propertyIsEnumerable,Tt=(t,r,i)=>r in t?tI(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,V=(t,r)=>{for(var i in r||(r={}))tR.call(r,i)&&Tt(t,i,r[i]);if(tS)for(var i of tS(r))tO.call(r,i)&&Tt(t,i,r[i]);return t},De=(t,r)=>tP(t,tx(r));let xt=class xt extends d{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.subscriptions=new Map,this.topicMap=new yr,this.events=new c.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=e7,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(t,r)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:t,opts:r}});try{let i=(0,v._H)(r),c={topic:t,relay:i};this.pending.set(t,c);let l=await this.rpcSubscribe(t,i);return this.onSubscribe(l,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:t,opts:r}}),l}catch(t){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(t),t}},this.unsubscribe=async(t,r)=>{await this.restartToComplete(),this.isInitialized(),"u">typeof r?.id?await this.unsubscribeById(t,r.id,r):await this.unsubscribeByTopic(t,r)},this.isSubscribed=async t=>!!this.topics.includes(t)||await new Promise((r,i)=>{let c=new T.Watch;c.start(this.pendingSubscriptionWatchLabel);let l=setInterval(()=>{!this.pending.has(t)&&this.topics.includes(t)&&(clearInterval(l),c.stop(this.pendingSubscriptionWatchLabel),r(!0)),c.elapsed(this.pendingSubscriptionWatchLabel)>=td&&(clearInterval(l),c.stop(this.pendingSubscriptionWatchLabel),i(Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(t,r)=>{this.events.on(t,r)},this.once=(t,r)=>{this.events.once(t,r)},this.off=(t,r)=>{this.events.off(t,r)},this.removeListener=(t,r)=>{this.events.removeListener(t,r)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=(0,P.generateChildLogger)(r,this.name),this.clientId=""}get context(){return(0,P.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,r){let i=!1;try{i=this.getSubscription(t).topic===r}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,r){let i=this.topicMap.get(t);await Promise.all(i.map(async i=>await this.unsubscribeById(t,i,r)))}async unsubscribeById(t,r,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:i}});try{let c=(0,v._H)(i);await this.rpcUnsubscribe(t,r,c);let l=(0,v.D6)("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,r,l),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:i}})}catch(t){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(t),t}}async rpcSubscribe(t,r){let i={method:(0,v.cO)(r.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await (0,v.hF)(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(th.connection_stalled)}return(0,v.rj)(t+this.clientId)}async rpcBatchSubscribe(t){if(!t.length)return;let r=t[0].relay,i={method:(0,v.cO)(r.protocol).batchSubscribe,params:{topics:t.map(t=>t.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await (0,v.hF)(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(th.connection_stalled)}}rpcUnsubscribe(t,r,i){let c={method:(0,v.cO)(i.protocol).unsubscribe,params:{topic:t,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:c}),this.relayer.request(c)}onSubscribe(t,r){this.setSubscription(t,De(V({},r),{id:t})),this.pending.delete(r.topic)}onBatchSubscribe(t){t.length&&t.forEach(t=>{this.setSubscription(t.id,V({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(t,r,i){this.events.removeAllListeners(r),this.hasSubscription(r,t)&&this.deleteSubscription(r,i),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,r){this.subscriptions.has(t)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:r}),this.addSubscription(t,r))}addSubscription(t,r){this.subscriptions.set(t,V({},r)),this.topicMap.set(r.topic,t),this.events.emit(tf.created,r)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});let r=this.subscriptions.get(t);if(!r){let{message:r}=(0,v.Z7)("NO_MATCHING_KEY",`${this.name}: ${t}`);throw Error(r)}return r}deleteSubscription(t,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:r});let i=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(i.topic,t),this.events.emit(tf.deleted,De(V({},i),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(tf.sync)}async reset(){if(this.cached.length){let t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){let t=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit(tf.resubscribed)}async restore(){try{let t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){let{message:t}=(0,v.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),Error(t)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;let r=await this.rpcBatchSubscribe(t);(0,v.qt)(r)&&this.onBatchSubscribe(r.map((r,i)=>De(V({},t[i]),{id:r})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;let t=[];this.pending.forEach(r=>{t.push(r)}),await this.batchSubscribe(t)}registerEventListeners(){this.relayer.core.heartbeat.on(w.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(th.connect,async()=>{await this.onConnect()}),this.relayer.on(th.disconnect,()=>{this.onDisconnect()}),this.events.on(tf.created,async t=>{let r=tf.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()}),this.events.on(tf.deleted,async t=>{let r=tf.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()})}isInitialized(){if(!this.initialized){let{message:t}=(0,v.Z7)("NOT_INITIALIZED",this.name);throw Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise(t=>{let r=setInterval(()=>{this.restartInProgress||(clearInterval(r),t())},this.pollingInterval)})}};var tC=Object.defineProperty,tA=Object.getOwnPropertySymbols,tL=Object.prototype.hasOwnProperty,tN=Object.prototype.propertyIsEnumerable,At=(t,r,i)=>r in t?tC(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,Rr=(t,r)=>{for(var i in r||(r={}))tL.call(r,i)&&At(t,i,r[i]);if(tA)for(var i of tA(r))tN.call(r,i)&&At(t,i,r[i]);return t};let zt=class zt extends g{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new c.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(t){throw this.logger.debug("Failed to Publish Request"),this.logger.error(t),t}},this.onPayloadHandler=t=>{this.onProviderPayload(t)},this.onConnectHandler=()=>{this.events.emit(th.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(th.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(tl.payload,this.onPayloadHandler),this.provider.on(tl.connect,this.onConnectHandler),this.provider.on(tl.disconnect,this.onDisconnectHandler),this.provider.on(tl.error,this.onProviderErrorHandler)},this.core=t.core,this.logger="u">typeof t.logger&&"string"!=typeof t.logger?(0,P.generateChildLogger)(t.logger,this.name):(0,P.pino)((0,P.getDefaultLoggerOptions)({level:t.logger||"error"})),this.messages=new St(this.logger,t.core),this.subscriber=new xt(this,this.logger),this.publisher=new Dr(this,this.logger),this.relayUrl=t?.relayUrl||ta,this.projectId=t.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${tc}...`),await this.restartTransport(tc)}this.initialized=!0,setTimeout(async()=>{0===this.subscriber.topics.length&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},1e4)}get context(){return(0,P.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(t,r,i){this.isInitialized(),await this.publisher.publish(t,r,i),await this.recordMessageEvent({topic:t,message:r,publishedAt:Date.now()})}async subscribe(t,r){var i;let c;this.isInitialized();let l=(null==(i=this.subscriber.topicMap.get(t))?void 0:i[0])||"";if(l)return l;let a=r=>{r.topic===t&&(this.subscriber.off(tf.created,a),c())};return await Promise.all([new Promise(t=>{c=t,this.subscriber.on(tf.created,a)}),new Promise(async i=>{l=await this.subscriber.subscribe(t,r),i()})]),l}async unsubscribe(t,r){this.isInitialized(),await this.subscriber.unsubscribe(t,r)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await (0,v.hF)(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(t){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(t=>{if(!this.initialized)return t();this.subscriber.once(tf.resubscribed,()=>{t()})}),new Promise(async(t,r)=>{try{await (0,v.hF)(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(t){r(t);return}t()})])}catch(t){if(this.logger.error(t),!this.isConnectionStalled(t.message))throw t;this.provider.events.emit(tl.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(t){await this.confirmOnlineStateOrThrow(),this.connectionAttemptInProgress||(this.relayUrl=t||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await (0,v.Gg)())throw Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(t){return this.staleConnectionErrors.some(r=>t.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new JsonRpcProvider(new ec((0,v.$0)({sdkVersion:"2.10.2",protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(t){let{topic:r,message:i}=t;await this.messages.set(r,i)}async shouldIgnoreMessageEvent(t){let{topic:r,message:i}=t;if(!i||0===i.length)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;let c=this.messages.has(r,i);return c&&this.logger.debug(`Ignoring duplicate message: ${i}`),c}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),isJsonRpcRequest(t)){if(!t.method.endsWith("_subscription"))return;let r=t.params,{topic:i,message:c,publishedAt:l}=r.data,v={topic:i,message:c,publishedAt:l};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Rr({type:"event",event:r.id},v)),this.events.emit(r.id,v),await this.acknowledgePayload(t),await this.onMessageEvent(v)}else isJsonRpcResponse(t)&&this.events.emit(th.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(th.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){let r=formatJsonRpcResult(t.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(tl.payload,this.onPayloadHandler),this.provider.off(tl.connect,this.onConnectHandler),this.provider.off(tl.disconnect,this.onDisconnectHandler),this.provider.off(tl.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(th.connection_stalled,()=>{this.restartTransport().catch(t=>this.logger.error(t))});let t=await (0,v.Gg)();(0,v.uw)(async r=>{this.initialized&&t!==r&&(t=r,r?await this.restartTransport().catch(t=>this.logger.error(t)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(t=>this.logger.error(t))))})}onProviderDisconnect(){this.events.emit(th.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(t=>this.logger.error(t))},(0,T.toMiliseconds)(tp)))}isInitialized(){if(!this.initialized){let{message:t}=(0,v.Z7)("NOT_INITIALIZED",this.name);throw Error(t)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(t=>{let r=setInterval(()=>{this.connected&&(clearInterval(r),t())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var tj=Object.defineProperty,tT=Object.getOwnPropertySymbols,tq=Object.prototype.hasOwnProperty,tD=Object.prototype.propertyIsEnumerable,Lt=(t,r,i)=>r in t?tj(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,Ut=(t,r)=>{for(var i in r||(r={}))tq.call(r,i)&&Lt(t,i,r[i]);if(tT)for(var i of tT(r))tD.call(r,i)&&Lt(t,i,r[i]);return t};let Ft=class Ft extends p{constructor(t,r,i,c=e7,l){super(t,r,i,c),this.core=t,this.logger=r,this.name=i,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=e7,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(t=>{this.getKey&&null!==t&&!(0,v.o8)(t)?this.map.set(this.getKey(t),t):(0,v.xW)(t)?this.map.set(t.id,t):(0,v.h1)(t)&&this.map.set(t.topic,t)}),this.cached=[],this.initialized=!0)},this.set=async(t,r)=>{this.isInitialized(),this.map.has(t)?await this.update(t,r):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:t,value:r}),this.map.set(t,r),await this.persist())},this.get=t=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:t}),this.getData(t)),this.getAll=t=>(this.isInitialized(),t?this.values.filter(r=>Object.keys(t).every(i=>el()(r[i],t[i]))):this.values),this.update=async(t,r)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:t,update:r});let i=Ut(Ut({},this.getData(t)),r);this.map.set(t,i),await this.persist()},this.delete=async(t,r)=>{this.isInitialized(),this.map.has(t)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:t,reason:r}),this.map.delete(t),await this.persist())},this.logger=(0,P.generateChildLogger)(r,this.name),this.storagePrefix=c,this.getKey=l}get context(){return(0,P.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){let r=this.map.get(t);if(!r){let{message:r}=(0,v.Z7)("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(r),Error(r)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{let t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){let{message:t}=(0,v.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),Error(t)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){let{message:t}=(0,v.Z7)("NOT_INITIALIZED",this.name);throw Error(t)}}};let $t=class $t{constructor(t,r){this.core=t,this.logger=r,this.name="pairing",this.version="0.3",this.events=new(l()),this.initialized=!1,this.storagePrefix=e7,this.ignoredPayloadTypes=[v.rV],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:t})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...t])]},this.create=async()=>{this.isInitialized();let t=(0,v.jd)(),r=await this.core.crypto.setSymKey(t),i=(0,v.gn)(T.FIVE_MINUTES),c={protocol:"irn"},l=(0,v.Bv)({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:t,relay:c});return await this.pairings.set(r,{topic:r,expiry:i,relay:c,active:!1}),await this.core.relayer.subscribe(r),this.core.expirer.set(r,i),{topic:r,uri:l}},this.pair=async t=>{this.isInitialized(),this.isValidPair(t);let{topic:r,symKey:i,relay:c}=(0,v.he)(t.uri);if(this.pairings.keys.includes(r)&&this.pairings.get(r).active)throw Error(`Pairing already exists: ${r}. Please try again with a new connection URI.`);this.core.crypto.keychain.has(r)||(await this.core.crypto.setSymKey(i,r),await this.core.relayer.subscribe(r,{relay:c}));let l=(0,v.gn)(T.FIVE_MINUTES),_={topic:r,relay:c,expiry:l,active:!1};return await this.pairings.set(r,_),this.core.expirer.set(r,l),t.activatePairing&&await this.activate({topic:r}),this.events.emit(ty.create,_),_},this.activate=async({topic:t})=>{this.isInitialized();let r=(0,v.gn)(T.THIRTY_DAYS);await this.pairings.update(t,{active:!0,expiry:r}),this.core.expirer.set(t,r)},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);let{topic:r}=t;if(this.pairings.keys.includes(r)){let t=await this.sendRequest(r,"wc_pairingPing",{}),{done:i,resolve:c,reject:l}=(0,v.H1)();this.events.once((0,v.E0)("pairing_ping",t),({error:t})=>{t?l(t):c()}),await i()}},this.updateExpiry=async({topic:t,expiry:r})=>{this.isInitialized(),await this.pairings.update(t,{expiry:r})},this.updateMetadata=async({topic:t,metadata:r})=>{this.isInitialized(),await this.pairings.update(t,{peerMetadata:r})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);let{topic:r}=t;this.pairings.keys.includes(r)&&(await this.sendRequest(r,"wc_pairingDelete",(0,v.D6)("USER_DISCONNECTED")),await this.deletePairing(r))},this.sendRequest=async(t,r,i)=>{let c=formatJsonRpcRequest(r,i),l=await this.core.crypto.encode(t,c),v=tg[r].req;return this.core.history.set(t,c),this.core.relayer.publish(t,l,v),c.id},this.sendResult=async(t,r,i)=>{let c=formatJsonRpcResult(t,i),l=await this.core.crypto.encode(r,c),v=await this.core.history.get(r,t),_=tg[v.request.method].res;await this.core.relayer.publish(r,l,_),await this.core.history.resolve(c)},this.sendError=async(t,r,i)=>{let c=formatJsonRpcError(t,i),l=await this.core.crypto.encode(r,c),v=await this.core.history.get(r,t),_=tg[v.request.method]?tg[v.request.method].res:tg.unregistered_method.res;await this.core.relayer.publish(r,l,_),await this.core.history.resolve(c)},this.deletePairing=async(t,r)=>{await this.core.relayer.unsubscribe(t),await Promise.all([this.pairings.delete(t,(0,v.D6)("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(t),r?Promise.resolve():this.core.expirer.del(t)])},this.cleanup=async()=>{let t=this.pairings.getAll().filter(t=>(0,v.Bw)(t.expiry));await Promise.all(t.map(t=>this.deletePairing(t.topic)))},this.onRelayEventRequest=t=>{let{topic:r,payload:i}=t;switch(i.method){case"wc_pairingPing":return this.onPairingPingRequest(r,i);case"wc_pairingDelete":return this.onPairingDeleteRequest(r,i);default:return this.onUnknownRpcMethodRequest(r,i)}},this.onRelayEventResponse=async t=>{let{topic:r,payload:i}=t,c=(await this.core.history.get(r,i.id)).request.method;return"wc_pairingPing"===c?this.onPairingPingResponse(r,i):this.onUnknownRpcMethodResponse(c)},this.onPairingPingRequest=async(t,r)=>{let{id:i}=r;try{this.isValidPing({topic:t}),await this.sendResult(i,t,!0),this.events.emit(ty.ping,{id:i,topic:t})}catch(r){await this.sendError(i,t,r),this.logger.error(r)}},this.onPairingPingResponse=(t,r)=>{let{id:i}=r;setTimeout(()=>{isJsonRpcResult(r)?this.events.emit((0,v.E0)("pairing_ping",i),{}):isJsonRpcError(r)&&this.events.emit((0,v.E0)("pairing_ping",i),{error:r.error})},500)},this.onPairingDeleteRequest=async(t,r)=>{let{id:i}=r;try{this.isValidDisconnect({topic:t}),await this.deletePairing(t),this.events.emit(ty.delete,{id:i,topic:t})}catch(r){await this.sendError(i,t,r),this.logger.error(r)}},this.onUnknownRpcMethodRequest=async(t,r)=>{let{id:i,method:c}=r;try{if(this.registeredMethods.includes(c))return;let r=(0,v.D6)("WC_METHOD_UNSUPPORTED",c);await this.sendError(i,t,r),this.logger.error(r)}catch(r){await this.sendError(i,t,r),this.logger.error(r)}},this.onUnknownRpcMethodResponse=t=>{this.registeredMethods.includes(t)||this.logger.error((0,v.D6)("WC_METHOD_UNSUPPORTED",t))},this.isValidPair=t=>{if(!(0,v.EJ)(t)){let{message:r}=(0,v.Z7)("MISSING_OR_INVALID",`pair() params: ${t}`);throw Error(r)}if(!(0,v.jv)(t.uri)){let{message:r}=(0,v.Z7)("MISSING_OR_INVALID",`pair() uri: ${t.uri}`);throw Error(r)}},this.isValidPing=async t=>{if(!(0,v.EJ)(t)){let{message:r}=(0,v.Z7)("MISSING_OR_INVALID",`ping() params: ${t}`);throw Error(r)}let{topic:r}=t;await this.isValidPairingTopic(r)},this.isValidDisconnect=async t=>{if(!(0,v.EJ)(t)){let{message:r}=(0,v.Z7)("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw Error(r)}let{topic:r}=t;await this.isValidPairingTopic(r)},this.isValidPairingTopic=async t=>{if(!(0,v.M_)(t,!1)){let{message:r}=(0,v.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw Error(r)}if(!this.pairings.keys.includes(t)){let{message:r}=(0,v.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw Error(r)}if((0,v.Bw)(this.pairings.get(t).expiry)){await this.deletePairing(t);let{message:r}=(0,v.Z7)("EXPIRED",`pairing topic: ${t}`);throw Error(r)}},this.core=t,this.logger=(0,P.generateChildLogger)(r,this.name),this.pairings=new Ft(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,P.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){let{message:t}=(0,v.Z7)("NOT_INITIALIZED",this.name);throw Error(t)}}registerRelayerEvents(){this.core.relayer.on(th.message,async t=>{let{topic:r,message:i}=t;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;let c=await this.core.crypto.decode(r,i);try{isJsonRpcRequest(c)?(this.core.history.set(r,c),this.onRelayEventRequest({topic:r,payload:c})):isJsonRpcResponse(c)&&(await this.core.history.resolve(c),await this.onRelayEventResponse({topic:r,payload:c}),this.core.history.delete(r,c.id))}catch(t){this.logger.error(t)}})}registerExpirerEvents(){this.core.expirer.on(t_.expired,async t=>{let{topic:r}=(0,v.iP)(t.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(ty.expire,{topic:r}))})}};let Mt=class Mt extends h{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.records=new Map,this.events=new c.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=e7,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(t=>this.records.set(t.id,t)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(t,r,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:t,request:r,chainId:i}),this.records.has(r.id))return;let c={id:r.id,topic:t,request:{method:r.method,params:r.params||null},chainId:i,expiry:(0,v.gn)(T.THIRTY_DAYS)};this.records.set(c.id,c),this.events.emit(tm.created,c)},this.resolve=async t=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:t}),!this.records.has(t.id))return;let r=await this.getRecord(t.id);typeof r.response>"u"&&(r.response=isJsonRpcError(t)?{error:t.error}:{result:t.result},this.records.set(r.id,r),this.events.emit(tm.updated,r))},this.get=async(t,r)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:t,id:r}),await this.getRecord(r)),this.delete=(t,r)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:r}),this.values.forEach(i=>{i.topic!==t||"u">typeof r&&i.id!==r||(this.records.delete(i.id),this.events.emit(tm.deleted,i))})},this.exists=async(t,r)=>(this.isInitialized(),!!this.records.has(r)&&(await this.getRecord(r)).topic===t),this.on=(t,r)=>{this.events.on(t,r)},this.once=(t,r)=>{this.events.once(t,r)},this.off=(t,r)=>{this.events.off(t,r)},this.removeListener=(t,r)=>{this.events.removeListener(t,r)},this.logger=(0,P.generateChildLogger)(r,this.name)}get context(){return(0,P.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let t=[];return this.values.forEach(r=>{if("u">typeof r.response)return;let i={topic:r.topic,request:formatJsonRpcRequest(r.request.method,r.request.params,r.id),chainId:r.chainId};return t.push(i)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();let r=this.records.get(t);if(!r){let{message:r}=(0,v.Z7)("NO_MATCHING_KEY",`${this.name}: ${t}`);throw Error(r)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(tm.sync)}async restore(){try{let t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){let{message:t}=(0,v.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),Error(t)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(tm.created,t=>{let r=tm.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(tm.updated,t=>{let r=tm.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(tm.deleted,t=>{let r=tm.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.core.heartbeat.on(w.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(t=>{(0,T.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.delete(t.topic,t.id))})}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){let{message:t}=(0,v.Z7)("NOT_INITIALIZED",this.name);throw Error(t)}}};let kt=class kt extends E{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.expirations=new Map,this.events=new c.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=e7,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(t=>this.expirations.set(t.target,t)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=t=>{try{let r=this.formatTarget(t);return"u">typeof this.getExpiration(r)}catch{return!1}},this.set=(t,r)=>{this.isInitialized();let i=this.formatTarget(t),c={target:i,expiry:r};this.expirations.set(i,c),this.checkExpiry(i,c),this.events.emit(t_.created,{target:i,expiration:c})},this.get=t=>{this.isInitialized();let r=this.formatTarget(t);return this.getExpiration(r)},this.del=t=>{if(this.isInitialized(),this.has(t)){let r=this.formatTarget(t),i=this.getExpiration(r);this.expirations.delete(r),this.events.emit(t_.deleted,{target:r,expiration:i})}},this.on=(t,r)=>{this.events.on(t,r)},this.once=(t,r)=>{this.events.once(t,r)},this.off=(t,r)=>{this.events.off(t,r)},this.removeListener=(t,r)=>{this.events.removeListener(t,r)},this.logger=(0,P.generateChildLogger)(r,this.name)}get context(){return(0,P.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if("string"==typeof t)return(0,v.Z4)(t);if("number"==typeof t)return(0,v.Gq)(t);let{message:r}=(0,v.Z7)("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw Error(r)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(t_.sync)}async restore(){try{let t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){let{message:t}=(0,v.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),Error(t)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){let r=this.expirations.get(t);if(!r){let{message:r}=(0,v.Z7)("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(r),Error(r)}return r}checkExpiry(t,r){let{expiry:i}=r;(0,T.toMiliseconds)(i)-Date.now()<=0&&this.expire(t,r)}expire(t,r){this.expirations.delete(t),this.events.emit(t_.expired,{target:t,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,r)=>this.checkExpiry(r,t))}registerEventListeners(){this.core.heartbeat.on(w.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(t_.created,t=>{let r=t_.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(t_.expired,t=>{let r=t_.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(t_.deleted,t=>{let r=t_.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})}isInitialized(){if(!this.initialized){let{message:t}=(0,v.Z7)("NOT_INITIALIZED",this.name);throw Error(t)}}};let Kt=class Kt extends y{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.name=tb,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async()=>{if(!(this.verifyDisabled||(0,v.b$)())&&(0,v.jU)()){this.verifyUrl!==tw&&this.removeIframe(),this.verifyUrl=tw;try{await this.createIframe()}catch(t){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(t)}if(!this.initialized){this.removeIframe(),this.verifyUrl=tE;try{await this.createIframe()}catch(t){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(t),this.verifyDisabled=!0}}}},this.register=async t=>{this.initialized?this.sendPost(t.attestationId):(this.addToQueue(t.attestationId),await this.init())},this.resolve=async t=>{let r;if(this.isDevEnv)return"";let i=t?.verifyUrl||tw;try{r=await this.fetchAttestation(t.attestationId,i)}catch(c){this.logger.info(`failed to resolve attestation: ${t.attestationId} from url: ${i}`),this.logger.info(c),r=await this.fetchAttestation(t.attestationId,tE)}return r},this.fetchAttestation=async(t,r)=>{this.logger.info(`resolving attestation: ${t} from url: ${r}`);let i=this.startAbortTimer(2*T.ONE_SECOND),c=await fetch(`${r}/attestation/${t}`,{signal:this.abortController.signal});return clearTimeout(i),200===c.status?await c.json():void 0},this.addToQueue=t=>{this.queue.push(t)},this.processQueue=()=>{0!==this.queue.length&&(this.queue.forEach(t=>this.sendPost(t)),this.queue=[])},this.sendPost=t=>{var r;try{if(!this.iframe)return;null==(r=this.iframe.contentWindow)||r.postMessage(t,"*"),this.logger.info(`postMessage sent: ${t} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let t;let s=r=>{"verify_ready"===r.data&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",s),t())};await Promise.race([new Promise(r=>{if(document.getElementById(tb))return r();window.addEventListener("message",s);let i=document.createElement("iframe");i.id=tb,i.src=`${this.verifyUrl}/${this.projectId}`,i.style.display="none",document.body.append(i),this.iframe=i,t=r}),new Promise((t,r)=>setTimeout(()=>{window.removeEventListener("message",s),r("verify iframe load timeout")},(0,T.toMiliseconds)(T.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=(0,P.generateChildLogger)(r,this.name),this.verifyUrl=tw,this.abortController=new AbortController,this.isDevEnv=(0,v.UG)()&&ep.env.IS_VITEST}get context(){return(0,P.getLoggerContext)(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,T.toMiliseconds)(t))}};var tz=Object.defineProperty,tM=Object.getOwnPropertySymbols,tk=Object.prototype.hasOwnProperty,tH=Object.prototype.propertyIsEnumerable,Vt=(t,r,i)=>r in t?tz(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,qt=(t,r)=>{for(var i in r||(r={}))tk.call(r,i)&&Vt(t,i,r[i]);if(tM)for(var i of tM(r))tH.call(r,i)&&Vt(t,i,r[i]);return t};let ee=class ee extends n{constructor(t){super(t),this.protocol="wc",this.version=2,this.name=e9,this.events=new c.EventEmitter,this.initialized=!1,this.on=(t,r)=>this.events.on(t,r),this.once=(t,r)=>this.events.once(t,r),this.off=(t,r)=>this.events.off(t,r),this.removeListener=(t,r)=>this.events.removeListener(t,r),this.projectId=t?.projectId,this.relayUrl=t?.relayUrl||ta,this.customStoragePrefix=null!=t&&t.customStoragePrefix?`:${t.customStoragePrefix}`:"";let r="u">typeof t?.logger&&"string"!=typeof t?.logger?t.logger:(0,P.pino)((0,P.getDefaultLoggerOptions)({level:t?.logger||e8.logger}));this.logger=(0,P.generateChildLogger)(r,this.name),this.heartbeat=new w.HeartBeat,this.crypto=new _t(this,this.logger,t?.keychain),this.history=new Mt(this,this.logger),this.expirer=new kt(this,this.logger),this.storage=null!=t&&t.storage?t.storage:new _.ZP(qt(qt({},te),t?.storageOptions)),this.relayer=new zt({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new $t(this,this.logger),this.verify=new Kt(this.projectId||"",this.logger)}static async init(t){let r=new ee(t);await r.initialize();let i=await r.crypto.getClientId();return await r.storage.setItem("WALLETCONNECT_CLIENT_ID",i),r}get context(){return(0,P.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}};let t$="client",tU=`wc@2:${t$}:`,tV={name:t$,logger:"error"},tB="WALLETCONNECT_DEEPLINK_CHOICE",tK="Proposal expired",tJ=T.SEVEN_DAYS,tF={wc_sessionPropose:{req:{ttl:T.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:T.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:T.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:T.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:T.ONE_DAY,prompt:!1,tag:1104},res:{ttl:T.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:T.ONE_DAY,prompt:!1,tag:1106},res:{ttl:T.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:T.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:T.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:T.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:T.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:T.ONE_DAY,prompt:!1,tag:1112},res:{ttl:T.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:T.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:T.THIRTY_SECONDS,prompt:!1,tag:1115}}},tW={min:T.FIVE_MINUTES,max:T.SEVEN_DAYS},tG={idle:"IDLE",active:"ACTIVE"},tZ=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var tY=Object.defineProperty,tQ=Object.defineProperties,tX=Object.getOwnPropertyDescriptors,t0=Object.getOwnPropertySymbols,t1=Object.prototype.hasOwnProperty,t5=Object.prototype.propertyIsEnumerable,index_es_de=(t,r,i)=>r in t?tY(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,dist_index_es_g=(t,r)=>{for(var i in r||(r={}))t1.call(r,i)&&index_es_de(t,i,r[i]);if(t0)for(var i of t0(r))t5.call(r,i)&&index_es_de(t,i,r[i]);return t},index_es_b=(t,r)=>tQ(t,tX(r));let index_es_ps=class index_es_ps extends S{constructor(t){super(t),this.name="engine",this.events=new(l()),this.initialized=!1,this.ignoredPayloadTypes=[v.rV],this.requestQueue={state:tG.idle,queue:[]},this.sessionRequestQueue={state:tG.idle,queue:[]},this.requestQueueDelay=T.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(tF)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,T.toMiliseconds)(this.requestQueueDelay)))},this.connect=async t=>{await this.isInitialized();let r=index_es_b(dist_index_es_g({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(r);let{pairingTopic:i,requiredNamespaces:c,optionalNamespaces:l,sessionProperties:_,relays:w}=r,P=i,O,C=!1;if(P&&(C=this.client.core.pairing.pairings.get(P).active),!P||!C){let{topic:t,uri:r}=await this.client.core.pairing.create();P=t,O=r}let A=await this.client.core.crypto.generateKeyPair(),q=dist_index_es_g({requiredNamespaces:c,optionalNamespaces:l,relays:w??[{protocol:"irn"}],proposer:{publicKey:A,metadata:this.client.metadata}},_&&{sessionProperties:_}),{reject:M,resolve:k,done:$}=(0,v.H1)(T.FIVE_MINUTES,tK);if(this.events.once((0,v.E0)("session_connect"),async({error:t,session:r})=>{if(t)M(t);else if(r){r.self.publicKey=A;let t=index_es_b(dist_index_es_g({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces});await this.client.session.set(r.topic,t),await this.setExpiry(r.topic,r.expiry),P&&await this.client.core.pairing.updateMetadata({topic:P,metadata:r.peer.metadata}),k(t)}}),!P){let{message:t}=(0,v.Z7)("NO_MATCHING_KEY",`connect() pairing topic: ${P}`);throw Error(t)}let U=await this.sendRequest({topic:P,method:"wc_sessionPropose",params:q}),B=(0,v.gn)(T.FIVE_MINUTES);return await this.setProposal(U,dist_index_es_g({id:U,expiry:B},q)),{uri:O,approval:$}},this.pair=async t=>(await this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{await this.isInitialized(),await this.isValidApprove(t);let{id:r,relayProtocol:i,namespaces:c,sessionProperties:l}=t,_=this.client.proposal.get(r),{pairingTopic:w,proposer:P,requiredNamespaces:O,optionalNamespaces:C}=_;w=w||"",(0,v.L5)(O)||(O=(0,v.fc)(c,"approve()"));let A=await this.client.core.crypto.generateKeyPair(),T=P.publicKey,q=await this.client.core.crypto.generateSharedKey(A,T);w&&r&&(await this.client.core.pairing.updateMetadata({topic:w,metadata:P.metadata}),await this.sendResult({id:r,topic:w,result:{relay:{protocol:i??"irn"},responderPublicKey:A}}),await this.client.proposal.delete(r,(0,v.D6)("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:w}));let M=dist_index_es_g({relay:{protocol:i??"irn"},namespaces:c,requiredNamespaces:O,optionalNamespaces:C,pairingTopic:w,controller:{publicKey:A,metadata:this.client.metadata},expiry:(0,v.gn)(tJ)},l&&{sessionProperties:l});await this.client.core.relayer.subscribe(q),await this.sendRequest({topic:q,method:"wc_sessionSettle",params:M,throwOnFailedPublish:!0});let k=index_es_b(dist_index_es_g({},M),{topic:q,pairingTopic:w,acknowledged:!1,self:M.controller,peer:{publicKey:P.publicKey,metadata:P.metadata},controller:A});return await this.client.session.set(q,k),await this.setExpiry(q,(0,v.gn)(tJ)),{topic:q,acknowledged:()=>new Promise(t=>setTimeout(()=>t(this.client.session.get(q)),500))}},this.reject=async t=>{await this.isInitialized(),await this.isValidReject(t);let{id:r,reason:i}=t,{pairingTopic:c}=this.client.proposal.get(r);c&&(await this.sendError(r,c,i),await this.client.proposal.delete(r,(0,v.D6)("USER_DISCONNECTED")))},this.update=async t=>{await this.isInitialized(),await this.isValidUpdate(t);let{topic:r,namespaces:i}=t,c=await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:i}}),{done:l,resolve:_,reject:w}=(0,v.H1)();return this.events.once((0,v.E0)("session_update",c),({error:t})=>{t?w(t):_()}),await this.client.session.update(r,{namespaces:i}),{acknowledged:l}},this.extend=async t=>{await this.isInitialized(),await this.isValidExtend(t);let{topic:r}=t,i=await this.sendRequest({topic:r,method:"wc_sessionExtend",params:{}}),{done:c,resolve:l,reject:_}=(0,v.H1)();return this.events.once((0,v.E0)("session_extend",i),({error:t})=>{t?_(t):l()}),await this.setExpiry(r,(0,v.gn)(tJ)),{acknowledged:c}},this.request=async t=>{await this.isInitialized(),await this.isValidRequest(t);let{chainId:r,request:i,topic:c,expiry:l}=t,_=payloadId(),{done:w,resolve:P,reject:O}=(0,v.H1)(l,"Request expired. Please try again.");return this.events.once((0,v.E0)("session_request",_),({error:t,result:r})=>{t?O(t):P(r)}),await Promise.all([new Promise(async t=>{await this.sendRequest({clientRpcId:_,topic:c,method:"wc_sessionRequest",params:{request:i,chainId:r},expiry:l,throwOnFailedPublish:!0}).catch(t=>O(t)),this.client.events.emit("session_request_sent",{topic:c,request:i,chainId:r,id:_}),t()}),new Promise(async t=>{let r=await this.client.core.storage.getItem(tB);(0,v.Hh)({id:_,topic:c,wcDeepLink:r}),t()}),w()]).then(t=>t[2])},this.respond=async t=>{await this.isInitialized(),await this.isValidRespond(t);let{topic:r,response:i}=t,{id:c}=i;isJsonRpcResult(i)?await this.sendResult({id:c,topic:r,result:i.result,throwOnFailedPublish:!0}):isJsonRpcError(i)&&await this.sendError(c,r,i.error),this.cleanupAfterResponse(t)},this.ping=async t=>{await this.isInitialized(),await this.isValidPing(t);let{topic:r}=t;if(this.client.session.keys.includes(r)){let t=await this.sendRequest({topic:r,method:"wc_sessionPing",params:{}}),{done:i,resolve:c,reject:l}=(0,v.H1)();this.events.once((0,v.E0)("session_ping",t),({error:t})=>{t?l(t):c()}),await i()}else this.client.core.pairing.pairings.keys.includes(r)&&await this.client.core.pairing.ping({topic:r})},this.emit=async t=>{await this.isInitialized(),await this.isValidEmit(t);let{topic:r,event:i,chainId:c}=t;await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:i,chainId:c}})},this.disconnect=async t=>{await this.isInitialized(),await this.isValidDisconnect(t);let{topic:r}=t;this.client.session.keys.includes(r)?(await this.sendRequest({topic:r,method:"wc_sessionDelete",params:(0,v.D6)("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(r)):await this.client.core.pairing.disconnect({topic:r})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(r=>(0,v.Ih)(r,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{let r=this.client.core.pairing.pairings.get(t.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(i=>{var c,l;return(null==(c=i.peerMetadata)?void 0:c.url)&&(null==(l=i.peerMetadata)?void 0:l.url)===t.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(0===i.length)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(t=>this.client.core.pairing.disconnect({topic:t.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(t){this.client.logger.error(t)}},this.deleteSession=async(t,r)=>{let{self:i}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,(0,v.D6)("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(i.publicKey)&&await this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),r||this.client.core.expirer.del(t),this.client.core.storage.removeItem(tB).catch(t=>this.client.logger.warn(t))},this.deleteProposal=async(t,r)=>{await Promise.all([this.client.proposal.delete(t,(0,v.D6)("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,r,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,r),i?Promise.resolve():this.client.core.expirer.del(t)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(r=>r.id!==t),i&&(this.sessionRequestQueue.state=tG.idle)},this.setExpiry=async(t,r)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:r}),this.client.core.expirer.set(t,r)},this.setProposal=async(t,r)=>{await this.client.proposal.set(t,r),this.client.core.expirer.set(t,r.expiry)},this.setPendingSessionRequest=async t=>{let r=tF.wc_sessionRequest.req.ttl,{id:i,topic:c,params:l,verifyContext:_}=t;await this.client.pendingRequest.set(i,{id:i,topic:c,params:l,verifyContext:_}),r&&this.client.core.expirer.set(i,(0,v.gn)(r))},this.sendRequest=async t=>{let{topic:r,method:i,params:c,expiry:l,relayRpcId:_,clientRpcId:w,throwOnFailedPublish:P}=t,O=formatJsonRpcRequest(i,c,w);if((0,v.jU)()&&tZ.includes(i)){let t=(0,v.rj)(JSON.stringify(O));this.client.core.verify.register({attestationId:t})}let C=await this.client.core.crypto.encode(r,O),A=tF[i].req;return l&&(A.ttl=l),_&&(A.id=_),this.client.core.history.set(r,O),P?(A.internal=index_es_b(dist_index_es_g({},A.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,C,A)):this.client.core.relayer.publish(r,C,A).catch(t=>this.client.logger.error(t)),O.id},this.sendResult=async t=>{let{id:r,topic:i,result:c,throwOnFailedPublish:l}=t,v=formatJsonRpcResult(r,c),_=await this.client.core.crypto.encode(i,v),w=await this.client.core.history.get(i,r),P=tF[w.request.method].res;l?(P.internal=index_es_b(dist_index_es_g({},P.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,_,P)):this.client.core.relayer.publish(i,_,P).catch(t=>this.client.logger.error(t)),await this.client.core.history.resolve(v)},this.sendError=async(t,r,i)=>{let c=formatJsonRpcError(t,i),l=await this.client.core.crypto.encode(r,c),v=await this.client.core.history.get(r,t),_=tF[v.request.method].res;this.client.core.relayer.publish(r,l,_),await this.client.core.history.resolve(c)},this.cleanup=async()=>{let t=[],r=[];this.client.session.getAll().forEach(r=>{(0,v.Bw)(r.expiry)&&t.push(r.topic)}),this.client.proposal.getAll().forEach(t=>{(0,v.Bw)(t.expiry)&&r.push(t.id)}),await Promise.all([...t.map(t=>this.deleteSession(t)),...r.map(t=>this.deleteProposal(t))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===tG.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=tG.active;let t=this.requestQueue.queue.shift();if(t)try{this.processRequest(t),await new Promise(t=>setTimeout(t,300))}catch(t){this.client.logger.warn(t)}}this.requestQueue.state=tG.idle},this.processRequest=t=>{let{topic:r,payload:i}=t,c=i.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(r,i);case"wc_sessionSettle":return this.onSessionSettleRequest(r,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(r,i);case"wc_sessionExtend":return this.onSessionExtendRequest(r,i);case"wc_sessionPing":return this.onSessionPingRequest(r,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(r,i);case"wc_sessionRequest":return this.onSessionRequest(r,i);case"wc_sessionEvent":return this.onSessionEventRequest(r,i);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async t=>{let{topic:r,payload:i}=t,c=(await this.client.core.history.get(r,i.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(r,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,i);case"wc_sessionExtend":return this.onSessionExtendResponse(r,i);case"wc_sessionPing":return this.onSessionPingResponse(r,i);case"wc_sessionRequest":return this.onSessionRequestResponse(r,i);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{let{topic:r}=t,{message:i}=(0,v.Z7)("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw Error(i)},this.onSessionProposeRequest=async(t,r)=>{let{params:i,id:c}=r;try{this.isValidConnect(dist_index_es_g({},r.params));let l=(0,v.gn)(T.FIVE_MINUTES),_=dist_index_es_g({id:c,pairingTopic:t,expiry:l},i);await this.setProposal(c,_);let w=(0,v.rj)(JSON.stringify(r)),P=await this.getVerifyContext(w,_.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:_,verifyContext:P})}catch(r){await this.sendError(c,t,r),this.client.logger.error(r)}},this.onSessionProposeResponse=async(t,r)=>{let{id:i}=r;if(isJsonRpcResult(r)){let{result:c}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});let l=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});let v=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:v});let _=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:_});let w=await this.client.core.crypto.generateSharedKey(v,_);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:w});let P=await this.client.core.relayer.subscribe(w);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:P}),await this.client.core.pairing.activate({topic:t})}else isJsonRpcError(r)&&(await this.client.proposal.delete(i,(0,v.D6)("USER_DISCONNECTED")),this.events.emit((0,v.E0)("session_connect"),{error:r.error}))},this.onSessionSettleRequest=async(t,r)=>{let{id:i,params:c}=r;try{this.isValidSessionSettleRequest(c);let{relay:i,controller:l,expiry:_,namespaces:w,requiredNamespaces:P,optionalNamespaces:O,sessionProperties:C,pairingTopic:A}=r.params,T=dist_index_es_g({topic:t,relay:i,expiry:_,namespaces:w,acknowledged:!0,pairingTopic:A,requiredNamespaces:P,optionalNamespaces:O,controller:l.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},C&&{sessionProperties:C});await this.sendResult({id:r.id,topic:t,result:!0}),this.events.emit((0,v.E0)("session_connect"),{session:T}),this.cleanupDuplicatePairings(T)}catch(r){await this.sendError(i,t,r),this.client.logger.error(r)}},this.onSessionSettleResponse=async(t,r)=>{let{id:i}=r;isJsonRpcResult(r)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit((0,v.E0)("session_approve",i),{})):isJsonRpcError(r)&&(await this.client.session.delete(t,(0,v.D6)("USER_DISCONNECTED")),this.events.emit((0,v.E0)("session_approve",i),{error:r.error}))},this.onSessionUpdateRequest=async(t,r)=>{let{params:i,id:c}=r;try{let r=`${t}_session_update`,l=v.O6.get(r);if(l&&this.isRequestOutOfSync(l,c)){this.client.logger.info(`Discarding out of sync request - ${c}`);return}this.isValidUpdate(dist_index_es_g({topic:t},i)),await this.client.session.update(t,{namespaces:i.namespaces}),await this.sendResult({id:c,topic:t,result:!0}),this.client.events.emit("session_update",{id:c,topic:t,params:i}),v.O6.set(r,c)}catch(r){await this.sendError(c,t,r),this.client.logger.error(r)}},this.isRequestOutOfSync=(t,r)=>parseInt(r.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,r)=>{let{id:i}=r;isJsonRpcResult(r)?this.events.emit((0,v.E0)("session_update",i),{}):isJsonRpcError(r)&&this.events.emit((0,v.E0)("session_update",i),{error:r.error})},this.onSessionExtendRequest=async(t,r)=>{let{id:i}=r;try{this.isValidExtend({topic:t}),await this.setExpiry(t,(0,v.gn)(tJ)),await this.sendResult({id:i,topic:t,result:!0}),this.client.events.emit("session_extend",{id:i,topic:t})}catch(r){await this.sendError(i,t,r),this.client.logger.error(r)}},this.onSessionExtendResponse=(t,r)=>{let{id:i}=r;isJsonRpcResult(r)?this.events.emit((0,v.E0)("session_extend",i),{}):isJsonRpcError(r)&&this.events.emit((0,v.E0)("session_extend",i),{error:r.error})},this.onSessionPingRequest=async(t,r)=>{let{id:i}=r;try{this.isValidPing({topic:t}),await this.sendResult({id:i,topic:t,result:!0}),this.client.events.emit("session_ping",{id:i,topic:t})}catch(r){await this.sendError(i,t,r),this.client.logger.error(r)}},this.onSessionPingResponse=(t,r)=>{let{id:i}=r;setTimeout(()=>{isJsonRpcResult(r)?this.events.emit((0,v.E0)("session_ping",i),{}):isJsonRpcError(r)&&this.events.emit((0,v.E0)("session_ping",i),{error:r.error})},500)},this.onSessionDeleteRequest=async(t,r)=>{let{id:i}=r;try{this.isValidDisconnect({topic:t,reason:r.params}),await Promise.all([new Promise(r=>{this.client.core.relayer.once(th.publish,async()=>{r(await this.deleteSession(t))})}),this.sendResult({id:i,topic:t,result:!0})]),this.client.events.emit("session_delete",{id:i,topic:t})}catch(t){this.client.logger.error(t)}},this.onSessionRequest=async(t,r)=>{let{id:i,params:c}=r;try{this.isValidRequest(dist_index_es_g({topic:t},c));let r=(0,v.rj)(JSON.stringify(formatJsonRpcRequest("wc_sessionRequest",c,i))),l=this.client.session.get(t),_=await this.getVerifyContext(r,l.peer.metadata),w={id:i,topic:t,params:c,verifyContext:_};await this.setPendingSessionRequest(w),this.addSessionRequestToSessionRequestQueue(w),this.processSessionRequestQueue()}catch(r){await this.sendError(i,t,r),this.client.logger.error(r)}},this.onSessionRequestResponse=(t,r)=>{let{id:i}=r;isJsonRpcResult(r)?this.events.emit((0,v.E0)("session_request",i),{result:r.result}):isJsonRpcError(r)&&this.events.emit((0,v.E0)("session_request",i),{error:r.error})},this.onSessionEventRequest=async(t,r)=>{let{id:i,params:c}=r;try{let r=`${t}_session_event_${c.event.name}`,l=v.O6.get(r);if(l&&this.isRequestOutOfSync(l,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(dist_index_es_g({topic:t},c)),this.client.events.emit("session_event",{id:i,topic:t,params:c}),v.O6.set(r,i)}catch(r){await this.sendError(i,t,r),this.client.logger.error(r)}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=tG.idle,this.processSessionRequestQueue()},(0,T.toMiliseconds)(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===tG.active){this.client.logger.info("session request queue is already active.");return}let t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=tG.active,this.client.events.emit("session_request",t)}catch(t){this.client.logger.error(t)}},this.onPairingCreated=t=>{if(t.active)return;let r=this.client.proposal.getAll().find(r=>r.pairingTopic===t.topic);r&&this.onSessionProposeRequest(t.topic,formatJsonRpcRequest("wc_sessionPropose",{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer},r.id))},this.isValidConnect=async t=>{if(!(0,v.EJ)(t)){let{message:r}=(0,v.Z7)("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw Error(r)}let{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:c,sessionProperties:l,relays:_}=t;if((0,v.o8)(r)||await this.isValidPairingTopic(r),!(0,v.PM)(_,!0)){let{message:t}=(0,v.Z7)("MISSING_OR_INVALID",`connect() relays: ${_}`);throw Error(t)}(0,v.o8)(i)||0===(0,v.L5)(i)||this.validateNamespaces(i,"requiredNamespaces"),(0,v.o8)(c)||0===(0,v.L5)(c)||this.validateNamespaces(c,"optionalNamespaces"),(0,v.o8)(l)||this.validateSessionProps(l,"sessionProperties")},this.validateNamespaces=(t,r)=>{let i=(0,v.n)(t,"connect()",r);if(i)throw Error(i.message)},this.isValidApprove=async t=>{if(!(0,v.EJ)(t))throw Error((0,v.Z7)("MISSING_OR_INVALID",`approve() params: ${t}`).message);let{id:r,namespaces:i,relayProtocol:c,sessionProperties:l}=t;await this.isValidProposalId(r);let _=this.client.proposal.get(r),w=(0,v.in)(i,"approve()");if(w)throw Error(w.message);let P=(0,v.rF)(_.requiredNamespaces,i,"approve()");if(P)throw Error(P.message);if(!(0,v.M_)(c,!0)){let{message:t}=(0,v.Z7)("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw Error(t)}(0,v.o8)(l)||this.validateSessionProps(l,"sessionProperties")},this.isValidReject=async t=>{if(!(0,v.EJ)(t)){let{message:r}=(0,v.Z7)("MISSING_OR_INVALID",`reject() params: ${t}`);throw Error(r)}let{id:r,reason:i}=t;if(await this.isValidProposalId(r),!(0,v.$t)(i)){let{message:t}=(0,v.Z7)("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw Error(t)}},this.isValidSessionSettleRequest=t=>{if(!(0,v.EJ)(t)){let{message:r}=(0,v.Z7)("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw Error(r)}let{relay:r,controller:i,namespaces:c,expiry:l}=t;if(!(0,v.Z2)(r)){let{message:t}=(0,v.Z7)("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(t)}let _=(0,v.Dd)(i,"onSessionSettleRequest()");if(_)throw Error(_.message);let w=(0,v.in)(c,"onSessionSettleRequest()");if(w)throw Error(w.message);if((0,v.Bw)(l)){let{message:t}=(0,v.Z7)("EXPIRED","onSessionSettleRequest()");throw Error(t)}},this.isValidUpdate=async t=>{if(!(0,v.EJ)(t)){let{message:r}=(0,v.Z7)("MISSING_OR_INVALID",`update() params: ${t}`);throw Error(r)}let{topic:r,namespaces:i}=t;await this.isValidSessionTopic(r);let c=this.client.session.get(r),l=(0,v.in)(i,"update()");if(l)throw Error(l.message);let _=(0,v.rF)(c.requiredNamespaces,i,"update()");if(_)throw Error(_.message)},this.isValidExtend=async t=>{if(!(0,v.EJ)(t)){let{message:r}=(0,v.Z7)("MISSING_OR_INVALID",`extend() params: ${t}`);throw Error(r)}let{topic:r}=t;await this.isValidSessionTopic(r)},this.isValidRequest=async t=>{if(!(0,v.EJ)(t)){let{message:r}=(0,v.Z7)("MISSING_OR_INVALID",`request() params: ${t}`);throw Error(r)}let{topic:r,request:i,chainId:c,expiry:l}=t;await this.isValidSessionTopic(r);let{namespaces:_}=this.client.session.get(r);if(!(0,v.p8)(_,c)){let{message:t}=(0,v.Z7)("MISSING_OR_INVALID",`request() chainId: ${c}`);throw Error(t)}if(!(0,v.hH)(i)){let{message:t}=(0,v.Z7)("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw Error(t)}if(!(0,v.al)(_,c,i.method)){let{message:t}=(0,v.Z7)("MISSING_OR_INVALID",`request() method: ${i.method}`);throw Error(t)}if(l&&!(0,v.ON)(l,tW)){let{message:t}=(0,v.Z7)("MISSING_OR_INVALID",`request() expiry: ${l}. Expiry must be a number (in seconds) between ${tW.min} and ${tW.max}`);throw Error(t)}},this.isValidRespond=async t=>{if(!(0,v.EJ)(t)){let{message:r}=(0,v.Z7)("MISSING_OR_INVALID",`respond() params: ${t}`);throw Error(r)}let{topic:r,response:i}=t;if(await this.isValidSessionTopic(r),!(0,v.JT)(i)){let{message:t}=(0,v.Z7)("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw Error(t)}},this.isValidPing=async t=>{if(!(0,v.EJ)(t)){let{message:r}=(0,v.Z7)("MISSING_OR_INVALID",`ping() params: ${t}`);throw Error(r)}let{topic:r}=t;await this.isValidSessionOrPairingTopic(r)},this.isValidEmit=async t=>{if(!(0,v.EJ)(t)){let{message:r}=(0,v.Z7)("MISSING_OR_INVALID",`emit() params: ${t}`);throw Error(r)}let{topic:r,event:i,chainId:c}=t;await this.isValidSessionTopic(r);let{namespaces:l}=this.client.session.get(r);if(!(0,v.p8)(l,c)){let{message:t}=(0,v.Z7)("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw Error(t)}if(!(0,v.nf)(i)){let{message:t}=(0,v.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw Error(t)}if(!(0,v.sI)(l,c,i.name)){let{message:t}=(0,v.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw Error(t)}},this.isValidDisconnect=async t=>{if(!(0,v.EJ)(t)){let{message:r}=(0,v.Z7)("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw Error(r)}let{topic:r}=t;await this.isValidSessionOrPairingTopic(r)},this.getVerifyContext=async(t,r)=>{let i={verified:{verifyUrl:r.verifyUrl||tw,validation:"UNKNOWN",origin:r.url||""}};try{let c=await this.client.core.verify.resolve({attestationId:t,verifyUrl:r.verifyUrl});c&&(i.verified.origin=c.origin,i.verified.isScam=c.isScam,i.verified.validation=c.origin===new URL(r.url).origin?"VALID":"INVALID")}catch(t){this.client.logger.info(t)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(t,r)=>{Object.values(t).forEach(t=>{if(!(0,v.M_)(t,!1)){let{message:i}=(0,v.Z7)("MISSING_OR_INVALID",`${r} must be in Record<string, string> format. Received: ${JSON.stringify(t)}`);throw Error(i)}})}}async isInitialized(){if(!this.initialized){let{message:t}=(0,v.Z7)("NOT_INITIALIZED",this.name);throw Error(t)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(th.message,async t=>{let{topic:r,message:i}=t;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(i)))return;let c=await this.client.core.crypto.decode(r,i);try{isJsonRpcRequest(c)?(this.client.core.history.set(r,c),this.onRelayEventRequest({topic:r,payload:c})):isJsonRpcResponse(c)?(await this.client.core.history.resolve(c),await this.onRelayEventResponse({topic:r,payload:c}),this.client.core.history.delete(r,c.id)):this.onRelayEventUnknownPayload({topic:r,payload:c})}catch(t){this.client.logger.error(t)}})}registerExpirerEvents(){this.client.core.expirer.on(t_.expired,async t=>{let{topic:r,id:i}=(0,v.iP)(t.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,(0,v.Z7)("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}registerPairingEvents(){this.client.core.pairing.events.on(ty.create,t=>this.onPairingCreated(t))}isValidPairingTopic(t){if(!(0,v.M_)(t,!1)){let{message:r}=(0,v.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw Error(r)}if(!this.client.core.pairing.pairings.keys.includes(t)){let{message:r}=(0,v.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw Error(r)}if((0,v.Bw)(this.client.core.pairing.pairings.get(t).expiry)){let{message:r}=(0,v.Z7)("EXPIRED",`pairing topic: ${t}`);throw Error(r)}}async isValidSessionTopic(t){if(!(0,v.M_)(t,!1)){let{message:r}=(0,v.Z7)("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw Error(r)}if(!this.client.session.keys.includes(t)){let{message:r}=(0,v.Z7)("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw Error(r)}if((0,v.Bw)(this.client.session.get(t).expiry)){await this.deleteSession(t);let{message:r}=(0,v.Z7)("EXPIRED",`session topic: ${t}`);throw Error(r)}}async isValidSessionOrPairingTopic(t){if(this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if((0,v.M_)(t,!1)){let{message:r}=(0,v.Z7)("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw Error(r)}else{let{message:r}=(0,v.Z7)("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw Error(r)}}async isValidProposalId(t){if(!(0,v.Q0)(t)){let{message:r}=(0,v.Z7)("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw Error(r)}if(!this.client.proposal.keys.includes(t)){let{message:r}=(0,v.Z7)("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw Error(r)}if((0,v.Bw)(this.client.proposal.get(t).expiry)){await this.deleteProposal(t);let{message:r}=(0,v.Z7)("EXPIRED",`proposal id: ${t}`);throw Error(r)}}};let index_es_hs=class index_es_hs extends Ft{constructor(t,r){super(t,r,"proposal",tU),this.core=t,this.logger=r}};let index_es_ds=class index_es_ds extends Ft{constructor(t,r){super(t,r,"session",tU),this.core=t,this.logger=r}};let index_es_us=class index_es_us extends Ft{constructor(t,r){super(t,r,"request",tU,t=>t.id),this.core=t,this.logger=r}};let index_es_Q=class index_es_Q extends b{constructor(t){super(t),this.protocol="wc",this.version=2,this.name=tV.name,this.events=new c.EventEmitter,this.on=(t,r)=>this.events.on(t,r),this.once=(t,r)=>this.events.once(t,r),this.off=(t,r)=>this.events.off(t,r),this.removeListener=(t,r)=>this.events.removeListener(t,r),this.removeAllListeners=t=>this.events.removeAllListeners(t),this.connect=async t=>{try{return await this.engine.connect(t)}catch(t){throw this.logger.error(t.message),t}},this.pair=async t=>{try{return await this.engine.pair(t)}catch(t){throw this.logger.error(t.message),t}},this.approve=async t=>{try{return await this.engine.approve(t)}catch(t){throw this.logger.error(t.message),t}},this.reject=async t=>{try{return await this.engine.reject(t)}catch(t){throw this.logger.error(t.message),t}},this.update=async t=>{try{return await this.engine.update(t)}catch(t){throw this.logger.error(t.message),t}},this.extend=async t=>{try{return await this.engine.extend(t)}catch(t){throw this.logger.error(t.message),t}},this.request=async t=>{try{return await this.engine.request(t)}catch(t){throw this.logger.error(t.message),t}},this.respond=async t=>{try{return await this.engine.respond(t)}catch(t){throw this.logger.error(t.message),t}},this.ping=async t=>{try{return await this.engine.ping(t)}catch(t){throw this.logger.error(t.message),t}},this.emit=async t=>{try{return await this.engine.emit(t)}catch(t){throw this.logger.error(t.message),t}},this.disconnect=async t=>{try{return await this.engine.disconnect(t)}catch(t){throw this.logger.error(t.message),t}},this.find=t=>{try{return this.engine.find(t)}catch(t){throw this.logger.error(t.message),t}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(t){throw this.logger.error(t.message),t}},this.name=t?.name||tV.name,this.metadata=t?.metadata||(0,v.D)();let r="u">typeof t?.logger&&"string"!=typeof t?.logger?t.logger:(0,P.pino)((0,P.getDefaultLoggerOptions)({level:t?.logger||tV.logger}));this.core=t?.core||new ee(t),this.logger=(0,P.generateChildLogger)(r,this.name),this.session=new index_es_ds(this.core,this.logger),this.proposal=new index_es_hs(this.core,this.logger),this.pendingRequest=new index_es_us(this.core,this.logger),this.engine=new index_es_ps(this)}static async init(t){let r=new index_es_Q(t);return await r.initialize(),r}get context(){return(0,P.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}};var t6=i(54098),t2=i.n(t6);let t3={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};let HttpConnection=class HttpConnection{constructor(t,r=!1){if(this.url=t,this.disableProviderPing=r,this.events=new c.EventEmitter,this.isAvailable=!1,this.registering=!1,!isHttpUrl(t))throw Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw Error("Connection already closed");this.onClose()}async send(t,r){this.isAvailable||await this.register();try{let r=safeJsonStringify(t),i=await t2()(this.url,Object.assign(Object.assign({},t3),{body:r})),c=await i.json();this.onPayload({data:c})}catch(r){this.onError(t.id,r)}}async register(t=this.url){if(!isHttpUrl(t))throw Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){let t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((t,r)=>{this.events.once("register_error",t=>{this.resetMaxListeners(),r(t)}),this.events.once("open",()=>{if(this.resetMaxListeners(),void 0===this.isAvailable)return r(Error("HTTP connection is missing or invalid"));t()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){let r=safeJsonStringify({id:1,jsonrpc:"2.0",method:"test",params:[]});await t2()(t,Object.assign(Object.assign({},t3),{body:r}))}this.onOpen()}catch(r){let t=this.parseError(r);throw this.events.emit("register_error",t),this.onClose(),t}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(void 0===t.data)return;let r="string"==typeof t.data?esm_safeJsonParse(t.data):t.data;this.events.emit("payload",r)}onError(t,r){let i=this.parseError(r),c=i.message||i.toString(),l=formatJsonRpcError(t,c);this.events.emit("payload",l)}parseError(t,r=this.url){return parseConnectionError(t,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}};let t4="error",t9="wc@2:universal_provider:",t7={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var t8="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof i.g?i.g:"u">typeof self?self:{},re={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */!function(t,r){(function(){var i,c="Expected a function",l="__lodash_hash_undefined__",v="__lodash_placeholder__",_=1/0,w=0/0,P=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],O="[object Arguments]",C="[object Array]",A="[object Boolean]",T="[object Date]",q="[object Error]",M="[object Function]",k="[object GeneratorFunction]",$="[object Map]",U="[object Number]",B="[object Object]",J="[object Promise]",Q="[object RegExp]",X="[object Set]",et="[object String]",es="[object Symbol]",eo="[object WeakMap]",ec="[object ArrayBuffer]",eh="[object DataView]",el="[object Float32Array]",ep="[object Float64Array]",ef="[object Int8Array]",ed="[object Int16Array]",eg="[object Int32Array]",ey="[object Uint8Array]",em="[object Uint8ClampedArray]",e_="[object Uint16Array]",eb="[object Uint32Array]",ew=/\b__p \+= '';/g,eE=/\b(__p \+=) '' \+/g,eI=/(__e\(.*?\)|\b__t\)) \+\n'';/g,eP=/&(?:amp|lt|gt|quot|#39);/g,ex=/[&<>"']/g,eS=RegExp(eP.source),eR=RegExp(ex.source),eO=/<%-([\s\S]+?)%>/g,eC=/<%([\s\S]+?)%>/g,eA=/<%=([\s\S]+?)%>/g,eL=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,eN=/^\w*$/,ej=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,eT=/[\\^$.*+?()[\]{}|]/g,eD=RegExp(eT.source),ez=/^\s+/,eM=/\s/,ek=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,eH=/\{\n\/\* \[wrapped with (.+)\] \*/,e$=/,? & /,eU=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,eV=/[()=,{}\[\]\/\s]/,eB=/\\(\\)?/g,eK=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,eJ=/\w*$/,eF=/^[-+]0x[0-9a-f]+$/i,eW=/^0b[01]+$/i,eG=/^\[object .+?Constructor\]$/,eZ=/^0o[0-7]+$/i,eY=/^(?:0|[1-9]\d*)$/,eQ=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,eX=/($^)/,e0=/['\n\r\u2028\u2029\\]/g,e1="\ud800-\udfff",e5="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",e6="\\u2700-\\u27bf",e2="a-z\\xdf-\\xf6\\xf8-\\xff",e3="A-Z\\xc0-\\xd6\\xd8-\\xde",e4="\\ufe0e\\ufe0f",e9="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",e7="['’]",e8="["+e9+"]",te="["+e5+"]",tn="["+e2+"]",ts="[^"+e1+e9+"\\d+"+e6+e2+e3+"]",to="\ud83c[\udffb-\udfff]",ta="[^"+e1+"]",tc="(?:\ud83c[\udde6-\uddff]){2}",th="[\ud800-\udbff][\udc00-\udfff]",tl="["+e3+"]",tp="\\u200d",tf="(?:"+tn+"|"+ts+")",td="(?:"+e7+"(?:d|ll|m|re|s|t|ve))?",tg="(?:"+e7+"(?:D|LL|M|RE|S|T|VE))?",ty="(?:"+te+"|"+to+")?",tm="["+e4+"]?",t_="(?:"+tp+"(?:"+[ta,tc,th].join("|")+")"+tm+ty+")*",tb=tm+ty+t_,tw="(?:"+["["+e6+"]",tc,th].join("|")+")"+tb,tE="(?:"+[ta+te+"?",te,tc,th,"["+e1+"]"].join("|")+")",tI=RegExp(e7,"g"),tP=RegExp(te,"g"),tx=RegExp(to+"(?="+to+")|"+tE+tb,"g"),tS=RegExp([tl+"?"+tn+"+"+td+"(?="+[e8,tl,"$"].join("|")+")","(?:"+tl+"|"+ts+")+"+tg+"(?="+[e8,tl+tf,"$"].join("|")+")",tl+"?"+tf+"+"+td,tl+"+"+tg,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",tw].join("|"),"g"),tR=RegExp("["+tp+e1+e5+e4+"]"),tO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tC=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tA=-1,tL={};tL[el]=tL[ep]=tL[ef]=tL[ed]=tL[eg]=tL[ey]=tL[em]=tL[e_]=tL[eb]=!0,tL[O]=tL[C]=tL[ec]=tL[A]=tL[eh]=tL[T]=tL[q]=tL[M]=tL[$]=tL[U]=tL[B]=tL[Q]=tL[X]=tL[et]=tL[eo]=!1;var tN={};tN[O]=tN[C]=tN[ec]=tN[eh]=tN[A]=tN[T]=tN[el]=tN[ep]=tN[ef]=tN[ed]=tN[eg]=tN[$]=tN[U]=tN[B]=tN[Q]=tN[X]=tN[et]=tN[es]=tN[ey]=tN[em]=tN[e_]=tN[eb]=!0,tN[q]=tN[M]=tN[eo]=!1;var tj={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tT=parseFloat,tq=parseInt,tD="object"==typeof t8&&t8&&t8.Object===Object&&t8,tz="object"==typeof self&&self&&self.Object===Object&&self,tM=tD||tz||Function("return this")(),tk=r&&!r.nodeType&&r,tH=tk&&t&&!t.nodeType&&t,t$=tH&&tH.exports===tk,tU=t$&&tD.process,tV=function(){try{return tH&&tH.require&&tH.require("util").types||tU&&tU.binding&&tU.binding("util")}catch{}}(),tB=tV&&tV.isArrayBuffer,tK=tV&&tV.isDate,tJ=tV&&tV.isMap,tF=tV&&tV.isRegExp,tW=tV&&tV.isSet,tG=tV&&tV.isTypedArray;function cn(t,r,i){switch(i.length){case 0:return t.call(r);case 1:return t.call(r,i[0]);case 2:return t.call(r,i[0],i[1]);case 3:return t.call(r,i[0],i[1],i[2])}return t.apply(r,i)}function Vo(t,r,i,c){for(var l=-1,v=null==t?0:t.length;++l<v;){var _=t[l];r(c,_,i(_),t)}return c}function mn(t,r){for(var i=-1,c=null==t?0:t.length;++i<c&&!1!==r(t[i],i,t););return t}function As(t,r){for(var i=-1,c=null==t?0:t.length;++i<c;)if(!r(t[i],i,t))return!1;return!0}function jn(t,r){for(var i=-1,c=null==t?0:t.length,l=0,v=[];++i<c;){var _=t[i];r(_,i,t)&&(v[l++]=_)}return v}function Ee(t,r){return!!(null==t?0:t.length)&&Tt(t,r,0)>-1}function Dr(t,r,i){for(var c=-1,l=null==t?0:t.length;++c<l;)if(i(r,t[c]))return!0;return!1}function G(t,r){for(var i=-1,c=null==t?0:t.length,l=Array(c);++i<c;)l[i]=r(t[i],i,t);return l}function nt(t,r){for(var i=-1,c=r.length,l=t.length;++i<c;)t[l+i]=r[i];return t}function Hr(t,r,i,c){var l=-1,v=null==t?0:t.length;for(c&&v&&(i=t[++l]);++l<v;)i=r(i,t[l],l,t);return i}function jo(t,r,i,c){var l=null==t?0:t.length;for(c&&l&&(i=t[--l]);l--;)i=r(i,t[l],l,t);return i}function Nr(t,r){for(var i=-1,c=null==t?0:t.length;++i<c;)if(r(t[i],i,t))return!0;return!1}var tZ=$r("length");function Cs(t,r,i){var c;return i(t,function(t,i,l){if(r(t,i,l))return c=i,!1}),c}function ye(t,r,i,c){for(var l=t.length,v=i+(c?1:-1);c?v--:++v<l;)if(r(t[v],v,t))return v;return -1}function Tt(t,r,i){return r==r?function(t,r,i){for(var c=i-1,l=t.length;++c<l;)if(t[c]===r)return c;return -1}(t,r,i):ye(t,Is,i)}function rf(t,r,i,c){for(var l=i-1,v=t.length;++l<v;)if(c(t[l],r))return l;return -1}function Is(t){return t!=t}function xs(t,r){var i=null==t?0:t.length;return i?Wr(t,r)/i:w}function $r(t){return function(r){return null==r?i:r[t]}}function Ur(t){return function(r){return null==t?i:t[r]}}function Es(t,r,i,c,l){return l(t,function(t,l,v){i=c?(c=!1,t):r(i,t,l,v)}),i}function Wr(t,r){for(var c,l=-1,v=t.length;++l<v;){var _=r(t[l]);_!==i&&(c=c===i?_:c+_)}return c}function Fr(t,r){for(var i=-1,c=Array(t);++i<t;)c[i]=r(i);return c}function ys(t){return t&&t.slice(0,bs(t)+1).replace(ez,"")}function hn(t){return function(r){return t(r)}}function Mr(t,r){return G(r,function(r){return t[r]})}function jt(t,r){return t.has(r)}function Ss(t,r){for(var i=-1,c=t.length;++i<c&&Tt(r,t[i],0)>-1;);return i}function Os(t,r){for(var i=t.length;i--&&Tt(r,t[i],0)>-1;);return i}var tY=Ur({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),tQ=Ur({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function cf(t){return"\\"+tj[t]}function Lt(t){return tR.test(t)}function qr(t){var r=-1,i=Array(t.size);return t.forEach(function(t,c){i[++r]=[c,t]}),i}function Rs(t,r){return function(i){return t(r(i))}}function tt(t,r){for(var i=-1,c=t.length,l=0,_=[];++i<c;){var w=t[i];(w===r||w===v)&&(t[i]=v,_[l++]=i)}return _}function Se(t){var r=-1,i=Array(t.size);return t.forEach(function(t){i[++r]=t}),i}function Dt(t){return Lt(t)?function(t){for(var r=tx.lastIndex=0;tx.test(t);)++r;return r}(t):tZ(t)}function On(t){return Lt(t)?t.match(tx)||[]:t.split("")}function bs(t){for(var r=t.length;r--&&eM.test(t.charAt(r)););return r}var tX=Ur({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),t0=function h(t){var r,eM,e1,e5,e6=(t=null==t?tM:t0.defaults(tM.Object(),t,t0.pick(tM,tC))).Array,e2=t.Date,e3=t.Error,e4=t.Function,e9=t.Math,e7=t.Object,e8=t.RegExp,te=t.String,tn=t.TypeError,ts=e6.prototype,to=e4.prototype,ta=e7.prototype,tc=t["__core-js_shared__"],th=to.toString,tl=ta.hasOwnProperty,tp=0,tf=(r=/[^.]+$/.exec(tc&&tc.keys&&tc.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",td=ta.toString,tg=th.call(e7),ty=tM._,tm=e8("^"+th.call(tl).replace(eT,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),t_=t$?t.Buffer:i,tb=t.Symbol,tw=t.Uint8Array,tE=t_?t_.allocUnsafe:i,tx=Rs(e7.getPrototypeOf,e7),tR=e7.create,tj=ta.propertyIsEnumerable,tD=ts.splice,tz=tb?tb.isConcatSpreadable:i,tk=tb?tb.iterator:i,tH=tb?tb.toStringTag:i,tU=function(){try{var t=mt(e7,"defineProperty");return t({},"",{}),t}catch{}}(),tV=t.clearTimeout!==tM.clearTimeout&&t.clearTimeout,tZ=e2&&e2.now!==tM.Date.now&&e2.now,t1=t.setTimeout!==tM.setTimeout&&t.setTimeout,t5=e9.ceil,t6=e9.floor,t2=e7.getOwnPropertySymbols,t3=t_?t_.isBuffer:i,t4=t.isFinite,t9=ts.join,t7=Rs(e7.keys,e7),t8=e9.max,re=e9.min,rt=e2.now,rs=t.parseInt,ro=e9.random,ra=ts.reverse,rc=mt(t,"DataView"),rh=mt(t,"Map"),rl=mt(t,"Promise"),rp=mt(t,"Set"),rd=mt(t,"WeakMap"),rg=mt(e7,"create"),ry=rd&&new rd,rm={},r_=wt(rc),rb=wt(rh),rw=wt(rl),rE=wt(rp),rI=wt(rd),rP=tb?tb.prototype:i,rx=rP?rP.valueOf:i,rS=rP?rP.toString:i;function a(t){if(Y(t)&&!ix(t)&&!(t instanceof H)){if(t instanceof Pn)return t;if(tl.call(t,"__wrapped__"))return Fu(t)}return new Pn(t)}var rR=function(){function n(){}return function(t){if(!K(t))return{};if(tR)return tR(t);n.prototype=t;var r=new n;return n.prototype=i,r}}();function qe(){}function Pn(t,r){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=i}function H(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function dt(t){var r=-1,i=null==t?0:t.length;for(this.clear();++r<i;){var c=t[r];this.set(c[0],c[1])}}function Bn(t){var r=-1,i=null==t?0:t.length;for(this.clear();++r<i;){var c=t[r];this.set(c[0],c[1])}}function Gn(t){var r=-1,i=null==t?0:t.length;for(this.clear();++r<i;){var c=t[r];this.set(c[0],c[1])}}function gt(t){var r=-1,i=null==t?0:t.length;for(this.__data__=new Gn;++r<i;)this.add(t[r])}function Rn(t){var r=this.__data__=new Bn(t);this.size=r.size}function Fs(t,r){var i=ix(t),c=!i&&iP(t),l=!i&&!c&&iR(t),v=!i&&!c&&!l&&iN(t),_=i||c||l||v,w=_?Fr(t.length,te):[],P=w.length;for(var O in t)(r||tl.call(t,O))&&!(_&&("length"==O||l&&("offset"==O||"parent"==O)||v&&("buffer"==O||"byteLength"==O||"byteOffset"==O)||Zn(O,P)))&&w.push(O);return w}function Ms(t){var r=t.length;return r?t[ei(0,r-1)]:i}function Yr(t,r,c){(c===i||bn(t[r],c))&&(c!==i||r in t)||zn(t,r,c)}function se(t,r,c){var l=t[r];tl.call(t,r)&&bn(l,c)&&(c!==i||r in t)||zn(t,r,c)}function Be(t,r){for(var i=t.length;i--;)if(bn(t[i][0],r))return i;return -1}function gc(t,r,i,c){return rO(t,function(t,l,v){r(c,t,i(t),v)}),c}function qs(t,r){return t&&Un(r,V(r),t)}function zn(t,r,i){"__proto__"==r&&tU?tU(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}function Zr(t,r){for(var c=-1,l=r.length,v=e6(l),_=null==t;++c<l;)v[c]=_?i:Si(t,r[c]);return v}function vt(t,r,c){return t==t&&(c!==i&&(t=t<=c?t:c),r!==i&&(t=t>=r?t:r)),t}function An(t,r,c,l,v,_){var w,P=1&r,C=2&r,q=4&r;if(c&&(w=v?c(t,l,v,_):c(t)),w!==i)return w;if(!K(t))return t;var J=ix(t);if(J){if(eo=t.length,ew=new t.constructor(eo),eo&&"string"==typeof t[0]&&tl.call(t,"index")&&(ew.index=t.index,ew.input=t.input),w=ew,!P)return un(t,w)}else{var eo,ew,eE,eI,eP,ex=rk(t),eS=ex==M||ex==k;if(iR(t))return hu(t,P);if(ex==B||ex==O||eS&&!v){if(w=C||eS?{}:bu(t),!P)return C?(eE=(eP=w)&&Un(t,on(t),eP),Un(t,rM(t),eE)):(eI=qs(w,t),Un(t,rz(t),eI))}else{if(!tN[ex])return v?t:{};w=function(t,r,i){var c,l,v=t.constructor;switch(r){case ec:return fi(t);case A:case T:return new v(+t);case eh:return c=i?fi(t.buffer):t.buffer,new t.constructor(c,t.byteOffset,t.byteLength);case el:case ep:case ef:case ed:case eg:case ey:case em:case e_:case eb:return lu(t,i);case $:return new v;case U:case et:return new v(t);case Q:return(l=new t.constructor(t.source,eJ.exec(t))).lastIndex=t.lastIndex,l;case X:return new v;case es:return rx?e7(rx.call(t)):{}}}(t,ex,P)}}_||(_=new Rn);var eR=_.get(t);if(eR)return eR;_.set(t,w),iL(t)?t.forEach(function(i){w.add(An(i,r,c,i,t,_))}):iC(t)&&t.forEach(function(i,l){w.set(l,An(i,r,c,l,t,_))});var eO=q?C?pi:li:C?on:V,eC=J?i:eO(t);return mn(eC||t,function(i,l){eC&&(i=t[l=i]),se(w,l,An(i,r,c,l,t,_))}),w}function Bs(t,r,c){var l=c.length;if(null==t)return!l;for(t=e7(t);l--;){var v=c[l],_=r[v],w=t[v];if(w===i&&!(v in t)||!_(w))return!1}return!0}function Gs(t,r,l){if("function"!=typeof t)throw new tn(c);return rU(function(){t.apply(i,l)},r)}function ue(t,r,i,c){var l=-1,v=Ee,_=!0,w=t.length,P=[],O=r.length;if(!w)return P;i&&(r=G(r,hn(i))),c?(v=Dr,_=!1):r.length>=200&&(v=jt,_=!1,r=new gt(r));e:for(;++l<w;){var C=t[l],A=null==i?C:i(C);if(C=c||0!==C?C:0,_&&A==A){for(var T=O;T--;)if(r[T]===A)continue e;P.push(C)}else v(r,A,c)||P.push(C)}return P}a.templateSettings={escape:eO,evaluate:eC,interpolate:eA,variable:"",imports:{_:a}},a.prototype=qe.prototype,a.prototype.constructor=a,Pn.prototype=rR(qe.prototype),Pn.prototype.constructor=Pn,H.prototype=rR(qe.prototype),H.prototype.constructor=H,dt.prototype.clear=function(){this.__data__=rg?rg(null):{},this.size=0},dt.prototype.delete=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},dt.prototype.get=function(t){var r=this.__data__;if(rg){var c=r[t];return c===l?i:c}return tl.call(r,t)?r[t]:i},dt.prototype.has=function(t){var r=this.__data__;return rg?r[t]!==i:tl.call(r,t)},dt.prototype.set=function(t,r){var c=this.__data__;return this.size+=this.has(t)?0:1,c[t]=rg&&r===i?l:r,this},Bn.prototype.clear=function(){this.__data__=[],this.size=0},Bn.prototype.delete=function(t){var r=this.__data__,i=Be(r,t);return!(i<0)&&(i==r.length-1?r.pop():tD.call(r,i,1),--this.size,!0)},Bn.prototype.get=function(t){var r=this.__data__,c=Be(r,t);return c<0?i:r[c][1]},Bn.prototype.has=function(t){return Be(this.__data__,t)>-1},Bn.prototype.set=function(t,r){var i=this.__data__,c=Be(i,t);return c<0?(++this.size,i.push([t,r])):i[c][1]=r,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new dt,map:new(rh||Bn),string:new dt}},Gn.prototype.delete=function(t){var r=nr(this,t).delete(t);return this.size-=r?1:0,r},Gn.prototype.get=function(t){return nr(this,t).get(t)},Gn.prototype.has=function(t){return nr(this,t).has(t)},Gn.prototype.set=function(t,r){var i=nr(this,t),c=i.size;return i.set(t,r),this.size+=i.size==c?0:1,this},gt.prototype.add=gt.prototype.push=function(t){return this.__data__.set(t,l),this},gt.prototype.has=function(t){return this.__data__.has(t)},Rn.prototype.clear=function(){this.__data__=new Bn,this.size=0},Rn.prototype.delete=function(t){var r=this.__data__,i=r.delete(t);return this.size=r.size,i},Rn.prototype.get=function(t){return this.__data__.get(t)},Rn.prototype.has=function(t){return this.__data__.has(t)},Rn.prototype.set=function(t,r){var i=this.__data__;if(i instanceof Bn){var c=i.__data__;if(!rh||c.length<199)return c.push([t,r]),this.size=++i.size,this;i=this.__data__=new Gn(c)}return i.set(t,r),this.size=i.size,this};var rO=vu($n),rC=vu(Xr,!0);function mc(t,r){var i=!0;return rO(t,function(t,c,l){return i=!!r(t,c,l)}),i}function Ge(t,r,c){for(var l=-1,v=t.length;++l<v;){var _=t[l],w=r(_);if(null!=w&&(P===i?w==w&&!pn(w):c(w,P)))var P=w,O=_}return O}function Ks(t,r){var i=[];return rO(t,function(t,c,l){r(t,c,l)&&i.push(t)}),i}function j(t,r,i,c,l){var v=-1,_=t.length;for(i||(i=ah),l||(l=[]);++v<_;){var w=t[v];r>0&&i(w)?r>1?j(w,r-1,i,c,l):nt(l,w):c||(l[l.length]=w)}return l}var rA=_u(),rL=_u(!0);function $n(t,r){return t&&rA(t,r,V)}function Xr(t,r){return t&&rL(t,r,V)}function ze(t,r){return jn(r,function(r){return Jn(t[r])})}function _t(t,r){r=st(r,t);for(var c=0,l=r.length;null!=t&&c<l;)t=t[Wn(r[c++])];return c&&c==l?t:i}function Zs(t,r,i){var c=r(t);return ix(t)?c:nt(c,i(t))}function en(t){return null==t?t===i?"[object Undefined]":"[object Null]":tH&&tH in e7(t)?function(t){var r=tl.call(t,tH),c=t[tH];try{t[tH]=i;var l=!0}catch{}var v=td.call(t);return l&&(r?t[tH]=c:delete t[tH]),v}(t):td.call(t)}function Qr(t,r){return t>r}function Pc(t,r){return null!=t&&tl.call(t,r)}function Ac(t,r){return null!=t&&r in e7(t)}function Vr(t,r,c){for(var l=c?Dr:Ee,v=t[0].length,_=t.length,w=_,P=e6(_),O=1/0,C=[];w--;){var A=t[w];w&&r&&(A=G(A,hn(r))),O=re(A.length,O),P[w]=!c&&(r||v>=120&&A.length>=120)?new gt(w&&A):i}A=t[0];var T=-1,q=P[0];e:for(;++T<v&&C.length<O;){var M=A[T],k=r?r(M):M;if(M=c||0!==M?M:0,!(q?jt(q,k):l(C,k,c))){for(w=_;--w;){var $=P[w];if(!($?jt($,k):l(t[w],k,c)))continue e}q&&q.push(k),C.push(M)}}return C}function ae(t,r,c){r=st(r,t);var l=null==(t=Hu(t,r))?t:t[Wn(In(r))];return null==l?i:cn(l,t,c)}function Js(t){return Y(t)&&en(t)==O}function oe(t,r,c,l,v){return t===r||(null!=t&&null!=r&&(Y(t)||Y(r))?function(t,r,c,l,v,_){var w=ix(t),P=ix(r),M=w?C:rk(t),k=P?C:rk(r);M=M==O?B:M,k=k==O?B:k;var J=M==B,eo=k==B,el=M==k;if(el&&iR(t)){if(!iR(r))return!1;w=!0,J=!1}if(el&&!J)return _||(_=new Rn),w||iN(t)?Su(t,r,c,l,v,_):function(t,r,i,c,l,v,_){switch(i){case eh:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)break;t=t.buffer,r=r.buffer;case ec:return!(t.byteLength!=r.byteLength||!v(new tw(t),new tw(r)));case A:case T:case U:return bn(+t,+r);case q:return t.name==r.name&&t.message==r.message;case Q:case et:return t==r+"";case $:var w=qr;case X:var P=1&c;if(w||(w=Se),t.size!=r.size&&!P)break;var O=_.get(t);if(O)return O==r;c|=2,_.set(t,r);var C=Su(w(t),w(r),c,l,v,_);return _.delete(t),C;case es:if(rx)return rx.call(t)==rx.call(r)}return!1}(t,r,M,c,l,v,_);if(!(1&c)){var ep=J&&tl.call(t,"__wrapped__"),ef=eo&&tl.call(r,"__wrapped__");if(ep||ef){var ed=ep?t.value():t,eg=ef?r.value():r;return _||(_=new Rn),v(ed,eg,c,l,_)}}return!!el&&(_||(_=new Rn),function(t,r,c,l,v,_){var w=1&c,P=li(t),O=P.length;if(O!=li(r).length&&!w)return!1;for(var C=O;C--;){var A=P[C];if(!(w?A in r:tl.call(r,A)))return!1}var T=_.get(t),q=_.get(r);if(T&&q)return T==r&&q==t;var M=!0;_.set(t,r),_.set(r,t);for(var k=w;++C<O;){var $=t[A=P[C]],U=r[A];if(l)var B=w?l(U,$,A,r,t,_):l($,U,A,t,r,_);if(!(B===i?$===U||v($,U,c,l,_):B)){M=!1;break}k||(k="constructor"==A)}if(M&&!k){var J=t.constructor,Q=r.constructor;J!=Q&&"constructor"in t&&"constructor"in r&&!("function"==typeof J&&J instanceof J&&"function"==typeof Q&&Q instanceof Q)&&(M=!1)}return _.delete(t),_.delete(r),M}(t,r,c,l,v,_))}(t,r,c,l,oe,v):t!=t&&r!=r)}function kr(t,r,c,l){var v=c.length,_=v,w=!l;if(null==t)return!_;for(t=e7(t);v--;){var P=c[v];if(w&&P[2]?P[1]!==t[P[0]]:!(P[0]in t))return!1}for(;++v<_;){var O=(P=c[v])[0],C=t[O],A=P[1];if(w&&P[2]){if(C===i&&!(O in t))return!1}else{var T=new Rn;if(l)var q=l(C,A,O,t,r,T);if(!(q===i?oe(A,C,3,l,T):q))return!1}}return!0}function Xs(t){return!(!K(t)||tf&&tf in t)&&(Jn(t)?tm:eG).test(wt(t))}function Qs(t){return"function"==typeof t?t:null==t?fn:"object"==typeof t?ix(t)?js(t[0],t[1]):ks(t):ma(t)}function jr(t){if(!he(t))return t7(t);var r=[];for(var i in e7(t))tl.call(t,i)&&"constructor"!=i&&r.push(i);return r}function ni(t,r){return t<r}function Vs(t,r){var i=-1,c=an(t)?e6(t.length):[];return rO(t,function(t,l,v){c[++i]=r(t,l,v)}),c}function ks(t){var r=gi(t);return 1==r.length&&r[0][2]?Lu(r[0][0],r[0][1]):function(i){return i===t||kr(i,t,r)}}function js(t,r){var c;return _i(t)&&(c=r)==c&&!K(c)?Lu(Wn(t),r):function(c){var l=Si(c,t);return l===i&&l===r?Oi(c,t):oe(r,l,3)}}function Ke(t,r,c,l,v){t!==r&&rA(r,function(_,w){if(v||(v=new Rn),K(_))!function(t,r,c,l,v,_,w){var P=wi(t,c),O=wi(r,c),C=w.get(O);if(C){Yr(t,c,C);return}var A=_?_(P,O,c+"",t,r,w):i,T=A===i;if(T){var q=ix(O),M=!q&&iR(O),k=!q&&!M&&iN(O);A=O,q||M||k?ix(P)?A=P:Z(P)?A=un(P):M?(T=!1,A=hu(O,!0)):k?(T=!1,A=lu(O,!0)):A=[]:pe(O)||iP(O)?(A=P,iP(P)?A=oa(P):(!K(P)||Jn(P))&&(A=bu(O))):T=!1}T&&(w.set(O,A),v(A,O,l,_,w),w.delete(O)),Yr(t,c,A)}(t,r,w,c,Ke,l,v);else{var P=l?l(wi(t,w),_,w+"",t,r,v):i;P===i&&(P=_),Yr(t,w,P)}},on)}function nu(t,r){var c=t.length;if(c)return Zn(r+=r<0?c:0,c)?t[r]:i}function tu(t,r,i){r=r.length?G(r,function(t){return ix(t)?function(r){return _t(r,1===t.length?t[0]:t)}:t}):[fn];var c=-1;return r=G(r,hn(x())),function(t,r){var i=t.length;for(t.sort(r);i--;)t[i]=t[i].value;return t}(Vs(t,function(t,i,l){return{criteria:G(r,function(r){return r(t)}),index:++c,value:t}}),function(t,r){return function(t,r,i){for(var c=-1,l=t.criteria,v=r.criteria,_=l.length,w=i.length;++c<_;){var P=pu(l[c],v[c]);if(P){if(c>=w)return P;return P*("desc"==i[c]?-1:1)}}return t.index-r.index}(t,r,i)})}function eu(t,r,i){for(var c=-1,l=r.length,v={};++c<l;){var _=r[c],w=_t(t,_);i(w,_)&&fe(v,st(_,t),w)}return v}function ti(t,r,i,c){var l=c?rf:Tt,v=-1,_=r.length,w=t;for(t===r&&(r=un(r)),i&&(w=G(t,hn(i)));++v<_;)for(var P=0,O=r[v],C=i?i(O):O;(P=l(w,C,P,c))>-1;)w!==t&&tD.call(w,P,1),tD.call(t,P,1);return t}function ru(t,r){for(var i=t?r.length:0,c=i-1;i--;){var l=r[i];if(i==c||l!==v){var v=l;Zn(l)?tD.call(t,l,1):si(t,l)}}return t}function ei(t,r){return t+t6(ro()*(r-t+1))}function ri(t,r){var i="";if(!t||r<1||r>9007199254740991)return i;do r%2&&(i+=t),(r=t6(r/2))&&(t+=t);while(r);return i}function L(t,r){return rV(Du(t,r,fn),t+"")}function fe(t,r,c,l){if(!K(t))return t;r=st(r,t);for(var v=-1,_=r.length,w=_-1,P=t;null!=P&&++v<_;){var O=Wn(r[v]),C=c;if("__proto__"===O||"constructor"===O||"prototype"===O)break;if(v!=w){var A=P[O];(C=l?l(A,O,P):i)===i&&(C=K(A)?A:Zn(r[v+1])?[]:{})}se(P,O,C),P=P[O]}return t}var rN=ry?function(t,r){return ry.set(t,r),t}:fn,rj=tU?function(t,r){return tU(t,"toString",{configurable:!0,enumerable:!1,value:bi(r),writable:!0})}:fn;function Cn(t,r,i){var c=-1,l=t.length;r<0&&(r=-r>l?0:l+r),(i=i>l?l:i)<0&&(i+=l),l=r>i?0:i-r>>>0,r>>>=0;for(var v=e6(l);++c<l;)v[c]=t[c+r];return v}function Mc(t,r){var i;return rO(t,function(t,c,l){return!(i=r(t,c,l))}),!!i}function Ye(t,r,i){var c=0,l=null==t?c:t.length;if("number"==typeof r&&r==r&&l<=2147483647){for(;c<l;){var v=c+l>>>1,_=t[v];null!==_&&!pn(_)&&(i?_<=r:_<r)?c=v+1:l=v}return l}return ii(t,r,fn,i)}function ii(t,r,c,l){var v=0,_=null==t?0:t.length;if(0===_)return 0;r=c(r);for(var w=r!=r,P=null===r,O=pn(r),C=r===i;v<_;){var A=t6((v+_)/2),T=c(t[A]),q=T!==i,M=null===T,k=T==T,$=pn(T);if(w)var U=l||k;else U=C?k&&(l||q):P?k&&q&&(l||!M):O?k&&q&&!M&&(l||!$):!M&&!$&&(l?T<=r:T<r);U?v=A+1:_=A}return re(_,4294967294)}function su(t,r){for(var i=-1,c=t.length,l=0,v=[];++i<c;){var _=t[i],w=r?r(_):_;if(!i||!bn(w,P)){var P=w;v[l++]=0===_?0:_}}return v}function uu(t){return"number"==typeof t?t:pn(t)?w:+t}function ln(t){if("string"==typeof t)return t;if(ix(t))return G(t,ln)+"";if(pn(t))return rS?rS.call(t):"";var r=t+"";return"0"==r&&1/t==-_?"-0":r}function it(t,r,i){var c=-1,l=Ee,v=t.length,_=!0,w=[],P=w;if(i)_=!1,l=Dr;else if(v>=200){var O=r?null:rq(t);if(O)return Se(O);_=!1,l=jt,P=new gt}else P=r?[]:w;e:for(;++c<v;){var C=t[c],A=r?r(C):C;if(C=i||0!==C?C:0,_&&A==A){for(var T=P.length;T--;)if(P[T]===A)continue e;r&&P.push(A),w.push(C)}else l(P,A,i)||(P!==w&&P.push(A),w.push(C))}return w}function si(t,r){return r=st(r,t),null==(t=Hu(t,r))||delete t[Wn(In(r))]}function au(t,r,i,c){return fe(t,r,i(_t(t,r)),c)}function Ze(t,r,i,c){for(var l=t.length,v=c?l:-1;(c?v--:++v<l)&&r(t[v],v,t););return i?Cn(t,c?0:v,c?v+1:l):Cn(t,c?v+1:0,c?l:v)}function ou(t,r){var i=t;return i instanceof H&&(i=i.value()),Hr(r,function(t,r){return r.func.apply(r.thisArg,nt([t],r.args))},i)}function ui(t,r,i){var c=t.length;if(c<2)return c?it(t[0]):[];for(var l=-1,v=e6(c);++l<c;)for(var _=t[l],w=-1;++w<c;)w!=l&&(v[l]=ue(v[l]||_,t[w],r,i));return it(j(v,1),r,i)}function fu(t,r,c){for(var l=-1,v=t.length,_=r.length,w={};++l<v;){var P=l<_?r[l]:i;c(w,t[l],P)}return w}function ai(t){return Z(t)?t:[]}function oi(t){return"function"==typeof t?t:fn}function st(t,r){return ix(t)?t:_i(t,r)?[t]:rB(W(t))}function ut(t,r,c){var l=t.length;return c=c===i?l:c,!r&&c>=l?t:Cn(t,r,c)}var rT=tV||function(t){return tM.clearTimeout(t)};function hu(t,r){if(r)return t.slice();var i=t.length,c=tE?tE(i):new t.constructor(i);return t.copy(c),c}function fi(t){var r=new t.constructor(t.byteLength);return new tw(r).set(new tw(t)),r}function lu(t,r){var i=r?fi(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function pu(t,r){if(t!==r){var c=t!==i,l=null===t,v=t==t,_=pn(t),w=r!==i,P=null===r,O=r==r,C=pn(r);if(!P&&!C&&!_&&t>r||_&&w&&O&&!P&&!C||l&&w&&O||!c&&O||!v)return 1;if(!l&&!_&&!C&&t<r||C&&c&&v&&!l&&!_||P&&c&&v||!w&&v||!O)return -1}return 0}function du(t,r,i,c){for(var l=-1,v=t.length,_=i.length,w=-1,P=r.length,O=t8(v-_,0),C=e6(P+O),A=!c;++w<P;)C[w]=r[w];for(;++l<_;)(A||l<v)&&(C[i[l]]=t[l]);for(;O--;)C[w++]=t[l++];return C}function gu(t,r,i,c){for(var l=-1,v=t.length,_=-1,w=i.length,P=-1,O=r.length,C=t8(v-w,0),A=e6(C+O),T=!c;++l<C;)A[l]=t[l];for(var q=l;++P<O;)A[q+P]=r[P];for(;++_<w;)(T||l<v)&&(A[q+i[_]]=t[l++]);return A}function un(t,r){var i=-1,c=t.length;for(r||(r=e6(c));++i<c;)r[i]=t[i];return r}function Un(t,r,c,l){var v=!c;c||(c={});for(var _=-1,w=r.length;++_<w;){var P=r[_],O=l?l(c[P],t[P],P,c,t):i;O===i&&(O=t[P]),v?zn(c,P,O):se(c,P,O)}return c}function Je(t,r){return function(i,c){var l=ix(i)?Vo:gc,v=r?r():{};return l(i,t,x(c,2),v)}}function Ft(t){return L(function(r,c){var l=-1,v=c.length,_=v>1?c[v-1]:i,w=v>2?c[2]:i;for(_=t.length>3&&"function"==typeof _?(v--,_):i,w&&rn(c[0],c[1],w)&&(_=v<3?i:_,v=1),r=e7(r);++l<v;){var P=c[l];P&&t(r,P,l,_)}return r})}function vu(t,r){return function(i,c){if(null==i)return i;if(!an(i))return t(i,c);for(var l=i.length,v=r?l:-1,_=e7(i);(r?v--:++v<l)&&!1!==c(_[v],v,_););return i}}function _u(t){return function(r,i,c){for(var l=-1,v=e7(r),_=c(r),w=_.length;w--;){var P=_[t?w:++l];if(!1===i(v[P],P,v))break}return r}}function mu(t){return function(r){var c=Lt(r=W(r))?On(r):i,l=c?c[0]:r.charAt(0),v=c?ut(c,1).join(""):r.slice(1);return l[t]()+v}}function Mt(t){return function(r){return Hr(va(ga(r).replace(tI,"")),t,"")}}function ce(t){return function(){var r=arguments;switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3]);case 5:return new t(r[0],r[1],r[2],r[3],r[4]);case 6:return new t(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new t(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var i=rR(t.prototype),c=t.apply(i,r);return K(c)?c:i}}function wu(t){return function(r,c,l){var v=e7(r);if(!an(r)){var _=x(c,3);r=V(r),c=function(t){return _(v[t],t,v)}}var w=t(r,c,l);return w>-1?v[_?r[w]:w]:i}}function Pu(t){return Yn(function(r){var l=r.length,v=l,_=Pn.prototype.thru;for(t&&r.reverse();v--;){var w=r[v];if("function"!=typeof w)throw new tn(c);if(_&&!P&&"wrapper"==je(w))var P=new Pn([],!0)}for(v=P?v:l;++v<l;){var O=je(w=r[v]),C="wrapper"==O?rD(w):i;P=C&&mi(C[0])&&424==C[1]&&!C[4].length&&1==C[9]?P[je(C[0])].apply(P,C[3]):1==w.length&&mi(w)?P[O]():P.thru(w)}return function(){var t=arguments,i=t[0];if(P&&1==t.length&&ix(i))return P.plant(i).value();for(var c=0,v=l?r[c].apply(this,t):i;++c<l;)v=r[c].call(this,v);return v}})}function Xe(t,r,c,l,v,_,w,P,O,C){var A=128&r,T=1&r,q=2&r,M=24&r,k=512&r,$=q?i:ce(t);return function y(){for(var U=arguments.length,B=e6(U),J=U;J--;)B[J]=arguments[J];if(M)var Q=qt(y),X=function(t,r){for(var i=t.length,c=0;i--;)t[i]===r&&++c;return c}(B,Q);if(l&&(B=du(B,l,v,M)),_&&(B=gu(B,_,w,M)),U-=X,M&&U<C){var et=tt(B,Q);return Iu(t,r,Xe,y.placeholder,c,B,et,P,O,C-U)}var es=T?c:this,eo=q?es[t]:t;return U=B.length,P?B=function(t,r){for(var c=t.length,l=re(r.length,c),v=un(t);l--;){var _=r[l];t[l]=Zn(_,c)?v[_]:i}return t}(B,P):k&&U>1&&B.reverse(),A&&O<U&&(B.length=O),this&&this!==tM&&this instanceof y&&(eo=$||ce(eo)),eo.apply(es,B)}}function Au(t,r){return function(i,c){var l,v;return l=r(c),v={},$n(i,function(r,i,c){t(v,l(r),i,c)}),v}}function Qe(t,r){return function(c,l){var v;if(c===i&&l===i)return r;if(c!==i&&(v=c),l!==i){if(v===i)return l;"string"==typeof c||"string"==typeof l?(c=ln(c),l=ln(l)):(c=uu(c),l=uu(l)),v=t(c,l)}return v}}function ci(t){return Yn(function(r){return r=G(r,hn(x())),L(function(i){var c=this;return t(r,function(t){return cn(t,c,i)})})})}function Ve(t,r){var c=(r=r===i?" ":ln(r)).length;if(c<2)return c?ri(r,t):r;var l=ri(r,t5(t/Dt(r)));return Lt(r)?ut(On(l),0,t).join(""):l.slice(0,t)}function Cu(t){return function(r,c,l){return l&&"number"!=typeof l&&rn(r,c,l)&&(c=l=i),r=Xn(r),c===i?(c=r,r=0):c=Xn(c),l=l===i?r<c?1:-1:Xn(l),function(t,r,i,c){for(var l=-1,v=t8(t5((r-t)/(i||1)),0),_=e6(v);v--;)_[c?v:++l]=t,t+=i;return _}(r,c,l,t)}}function ke(t){return function(r,i){return"string"==typeof r&&"string"==typeof i||(r=xn(r),i=xn(i)),t(r,i)}}function Iu(t,r,c,l,v,_,w,P,O,C){var A=8&r,T=A?w:i,q=A?i:w,M=A?_:i,k=A?i:_;r|=A?32:64,4&(r&=~(A?64:32))||(r&=-4);var $=[t,r,v,M,T,k,q,P,O,C],U=c.apply(i,$);return mi(t)&&r$(U,$),U.placeholder=l,$u(U,t,r)}function hi(t){var r=e9[t];return function(t,i){if(t=xn(t),(i=null==i?0:re(R(i),292))&&t4(t)){var c=(W(t)+"e").split("e");return+((c=(W(r(c[0]+"e"+(+c[1]+i)))+"e").split("e"))[0]+"e"+(+c[1]-i))}return r(t)}}var rq=rp&&1/Se(new rp([,-0]))[1]==_?function(t){return new rp(t)}:Di;function xu(t){return function(r){var i,c,l=rk(r);return l==$?qr(r):l==X?(i=-1,c=Array(r.size),r.forEach(function(t){c[++i]=[t,t]}),c):G(t(r),function(t){return[t,r[t]]})}}function Kn(t,r,l,_,w,P,O,C){var A=2&r;if(!A&&"function"!=typeof t)throw new tn(c);var T=_?_.length:0;if(T||(r&=-97,_=w=i),O=O===i?O:t8(R(O),0),C=C===i?C:R(C),T-=w?w.length:0,64&r){var q=_,M=w;_=w=i}var k=A?i:rD(t),$=[t,r,l,_,w,q,M,P,O,C];if(k&&function(t,r){var i=t[1],c=r[1],l=i|c,_=l<131,w=128==c&&8==i||128==c&&256==i&&t[7].length<=r[8]||384==c&&r[7].length<=r[8]&&8==i;if(_||w){1&c&&(t[2]=r[2],l|=1&i?0:4);var P=r[3];if(P){var O=t[3];t[3]=O?du(O,P,r[4]):P,t[4]=O?tt(t[3],v):r[4]}(P=r[5])&&(O=t[5],t[5]=O?gu(O,P,r[6]):P,t[6]=O?tt(t[5],v):r[6]),(P=r[7])&&(t[7]=P),128&c&&(t[8]=null==t[8]?r[8]:re(t[8],r[8])),null==t[9]&&(t[9]=r[9]),t[0]=r[0],t[1]=l}}($,k),t=$[0],r=$[1],l=$[2],_=$[3],w=$[4],(C=$[9]=$[9]===i?A?0:t.length:t8($[9]-T,0))||!(24&r)||(r&=-25),r&&1!=r)8==r||16==r?(U=t,B=r,J=C,Q=ce(U),ey=function s(){for(var t=arguments.length,r=e6(t),c=t,l=qt(s);c--;)r[c]=arguments[c];var v=t<3&&r[0]!==l&&r[t-1]!==l?[]:tt(r,l);return(t-=v.length)<J?Iu(U,B,Xe,s.placeholder,i,r,v,i,i,J-t):cn(this&&this!==tM&&this instanceof s?Q:U,this,r)}):32!=r&&33!=r||w.length?ey=Xe.apply(i,$):(X=t,et=r,es=l,eo=_,ec=1&et,eh=ce(X),ey=function f(){for(var t=-1,r=arguments.length,i=-1,c=eo.length,l=e6(c+r),v=this&&this!==tM&&this instanceof f?eh:X;++i<c;)l[i]=eo[i];for(;r--;)l[i++]=arguments[++t];return cn(v,ec?es:this,l)});else var U,B,J,Q,X,et,es,eo,ec,eh,el,ep,ef,ed,eg,ey=(el=t,ep=r,ef=l,ed=1&ep,eg=ce(el),function o(){return(this&&this!==tM&&this instanceof o?eg:el).apply(ed?ef:this,arguments)});return $u((k?rN:r$)(ey,$),t,r)}function Eu(t,r,c,l){return t===i||bn(t,ta[c])&&!tl.call(l,c)?r:t}function yu(t,r,c,l,v,_){return K(t)&&K(r)&&(_.set(r,t),Ke(t,r,i,yu,_),_.delete(r)),t}function kc(t){return pe(t)?i:t}function Su(t,r,c,l,v,_){var w=1&c,P=t.length,O=r.length;if(P!=O&&!(w&&O>P))return!1;var C=_.get(t),A=_.get(r);if(C&&A)return C==r&&A==t;var T=-1,q=!0,M=2&c?new gt:i;for(_.set(t,r),_.set(r,t);++T<P;){var k=t[T],$=r[T];if(l)var U=w?l($,k,T,r,t,_):l(k,$,T,t,r,_);if(U!==i){if(U)continue;q=!1;break}if(M){if(!Nr(r,function(t,r){if(!jt(M,r)&&(k===t||v(k,t,c,l,_)))return M.push(r)})){q=!1;break}}else if(!(k===$||v(k,$,c,l,_))){q=!1;break}}return _.delete(t),_.delete(r),q}function Yn(t){return rV(Du(t,i,Bu),t+"")}function li(t){return Zs(t,V,rz)}function pi(t){return Zs(t,on,rM)}var rD=ry?function(t){return ry.get(t)}:Di;function je(t){for(var r=t.name+"",i=rm[r],c=tl.call(rm,r)?i.length:0;c--;){var l=i[c],v=l.func;if(null==v||v==t)return l.name}return r}function qt(t){return(tl.call(a,"placeholder")?a:t).placeholder}function x(){var t=a.iteratee||Ti;return t=t===Ti?Qs:t,arguments.length?t(arguments[0],arguments[1]):t}function nr(t,r){var i,c=t.__data__;return("string"==(i=typeof r)||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?c["string"==typeof r?"string":"hash"]:c.map}function gi(t){for(var r=V(t),i=r.length;i--;){var c=r[i],l=t[c];r[i]=[c,l,l==l&&!K(l)]}return r}function mt(t,r){var c=null==t?i:t[r];return Xs(c)?c:i}var rz=t2?function(t){return null==t?[]:jn(t2(t=e7(t)),function(r){return tj.call(t,r)})}:Hi,rM=t2?function(t){for(var r=[];t;)nt(r,rz(t)),t=tx(t);return r}:Hi,rk=en;function Ru(t,r,i){r=st(r,t);for(var c=-1,l=r.length,v=!1;++c<l;){var _=Wn(r[c]);if(!(v=null!=t&&i(t,_)))break;t=t[_]}return v||++c!=l?v:!!(l=null==t?0:t.length)&&ar(l)&&Zn(_,l)&&(ix(t)||iP(t))}function bu(t){return"function"!=typeof t.constructor||he(t)?{}:rR(tx(t))}function ah(t){return ix(t)||iP(t)||!!(tz&&t&&t[tz])}function Zn(t,r){var i=typeof t;return!!(r=r??9007199254740991)&&("number"==i||"symbol"!=i&&eY.test(t))&&t>-1&&t%1==0&&t<r}function rn(t,r,i){if(!K(i))return!1;var c=typeof r;return("number"==c?!!(an(i)&&Zn(r,i.length)):"string"==c&&r in i)&&bn(i[r],t)}function _i(t,r){if(ix(t))return!1;var i=typeof t;return!!("number"==i||"symbol"==i||"boolean"==i||null==t||pn(t))||eN.test(t)||!eL.test(t)||null!=r&&t in e7(r)}function mi(t){var r=je(t),i=a[r];if("function"!=typeof i||!(r in H.prototype))return!1;if(t===i)return!0;var c=rD(i);return!!c&&t===c[0]}(rc&&rk(new rc(new ArrayBuffer(1)))!=eh||rh&&rk(new rh)!=$||rl&&rk(rl.resolve())!=J||rp&&rk(new rp)!=X||rd&&rk(new rd)!=eo)&&(rk=function(t){var r=en(t),c=r==B?t.constructor:i,l=c?wt(c):"";if(l)switch(l){case r_:return eh;case rb:return $;case rw:return J;case rE:return X;case rI:return eo}return r});var rH=tc?Jn:Ni;function he(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||ta)}function Lu(t,r){return function(c){return null!=c&&c[t]===r&&(r!==i||t in e7(c))}}function Du(t,r,c){return r=t8(r===i?t.length-1:r,0),function(){for(var i=arguments,l=-1,v=t8(i.length-r,0),_=e6(v);++l<v;)_[l]=i[r+l];l=-1;for(var w=e6(r+1);++l<r;)w[l]=i[l];return w[r]=c(_),cn(t,this,w)}}function Hu(t,r){return r.length<2?t:_t(t,Cn(r,0,-1))}function wi(t,r){if(!("constructor"===r&&"function"==typeof t[r])&&"__proto__"!=r)return t[r]}var r$=Uu(rN),rU=t1||function(t,r){return tM.setTimeout(t,r)},rV=Uu(rj);function $u(t,r,i){var c,l,v=r+"";return rV(t,function(t,r){var i=r.length;if(!i)return t;var c=i-1;return r[c]=(i>1?"& ":"")+r[c],r=r.join(i>2?", ":" "),t.replace(ek,`{
/* [wrapped with `+r+`] */
`)}(v,(c=(l=v.match(eH))?l[1].split(e$):[],mn(P,function(t){var r="_."+t[0];i&t[1]&&!Ee(c,r)&&c.push(r)}),c.sort())))}function Uu(t){var r=0,c=0;return function(){var l=rt(),v=16-(l-c);if(c=l,v>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(i,arguments)}}function tr(t,r){var c=-1,l=t.length,v=l-1;for(r=r===i?l:r;++c<r;){var _=ei(c,v),w=t[_];t[_]=t[c],t[c]=w}return t.length=r,t}var rB=(e1=(eM=sr(function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(ej,function(t,i,c,l){r.push(c?l.replace(eB,"$1"):i||t)}),r},function(t){return 500===e1.size&&e1.clear(),t})).cache,eM);function Wn(t){if("string"==typeof t||pn(t))return t;var r=t+"";return"0"==r&&1/t==-_?"-0":r}function wt(t){if(null!=t){try{return th.call(t)}catch{}try{return t+""}catch{}}return""}function Fu(t){if(t instanceof H)return t.clone();var r=new Pn(t.__wrapped__,t.__chain__);return r.__actions__=un(t.__actions__),r.__index__=t.__index__,r.__values__=t.__values__,r}var rK=L(function(t,r){return Z(t)?ue(t,j(r,1,Z,!0)):[]}),rJ=L(function(t,r){var c=In(r);return Z(c)&&(c=i),Z(t)?ue(t,j(r,1,Z,!0),x(c,2)):[]}),rF=L(function(t,r){var c=In(r);return Z(c)&&(c=i),Z(t)?ue(t,j(r,1,Z,!0),i,c):[]});function Mu(t,r,i){var c=null==t?0:t.length;if(!c)return -1;var l=null==i?0:R(i);return l<0&&(l=t8(c+l,0)),ye(t,x(r,3),l)}function qu(t,r,c){var l=null==t?0:t.length;if(!l)return -1;var v=l-1;return c!==i&&(v=R(c),v=c<0?t8(l+v,0):re(v,l-1)),ye(t,x(r,3),v,!0)}function Bu(t){return(null==t?0:t.length)?j(t,1):[]}function Gu(t){return t&&t.length?t[0]:i}var rW=L(function(t){var r=G(t,ai);return r.length&&r[0]===t[0]?Vr(r):[]}),rG=L(function(t){var r=In(t),c=G(t,ai);return r===In(c)?r=i:c.pop(),c.length&&c[0]===t[0]?Vr(c,x(r,2)):[]}),rZ=L(function(t){var r=In(t),c=G(t,ai);return(r="function"==typeof r?r:i)&&c.pop(),c.length&&c[0]===t[0]?Vr(c,i,r):[]});function In(t){var r=null==t?0:t.length;return r?t[r-1]:i}var rY=L(zu);function zu(t,r){return t&&t.length&&r&&r.length?ti(t,r):t}var rQ=Yn(function(t,r){var i=null==t?0:t.length,c=Zr(t,r);return ru(t,G(r,function(t){return Zn(t,i)?+t:t}).sort(pu)),c});function Ai(t){return null==t?t:ra.call(t)}var rX=L(function(t){return it(j(t,1,Z,!0))}),r0=L(function(t){var r=In(t);return Z(r)&&(r=i),it(j(t,1,Z,!0),x(r,2))}),r1=L(function(t){var r=In(t);return r="function"==typeof r?r:i,it(j(t,1,Z,!0),i,r)});function Ci(t){if(!(t&&t.length))return[];var r=0;return t=jn(t,function(t){if(Z(t))return r=t8(t.length,r),!0}),Fr(r,function(r){return G(t,$r(r))})}function Ku(t,r){if(!(t&&t.length))return[];var c=Ci(t);return null==r?c:G(c,function(t){return cn(r,i,t)})}var r5=L(function(t,r){return Z(t)?ue(t,r):[]}),r6=L(function(t){return ui(jn(t,Z))}),r2=L(function(t){var r=In(t);return Z(r)&&(r=i),ui(jn(t,Z),x(r,2))}),r3=L(function(t){var r=In(t);return r="function"==typeof r?r:i,ui(jn(t,Z),i,r)}),r4=L(Ci),r9=L(function(t){var r=t.length,c=r>1?t[r-1]:i;return c="function"==typeof c?(t.pop(),c):i,Ku(t,c)});function Yu(t){var r=a(t);return r.__chain__=!0,r}function er(t,r){return r(t)}var r7=Yn(function(t){var r=t.length,c=r?t[0]:0,l=this.__wrapped__,s=function(r){return Zr(r,t)};return!(r>1)&&!this.__actions__.length&&l instanceof H&&Zn(c)?((l=l.slice(c,+c+(r?1:0))).__actions__.push({func:er,args:[s],thisArg:i}),new Pn(l,this.__chain__).thru(function(t){return r&&!t.length&&t.push(i),t})):this.thru(s)}),r8=Je(function(t,r,i){tl.call(t,i)?++t[i]:zn(t,i,1)}),ie=wu(Mu),ir=wu(qu);function Zu(t,r){return(ix(t)?mn:rO)(t,x(r,3))}function Ju(t,r){return(ix(t)?function(t,r){for(var i=null==t?0:t.length;i--&&!1!==r(t[i],i,t););return t}:rC)(t,x(r,3))}var is=Je(function(t,r,i){tl.call(t,i)?t[i].push(r):zn(t,i,[r])}),io=L(function(t,r,i){var c=-1,l="function"==typeof r,v=an(t)?e6(t.length):[];return rO(t,function(t){v[++c]=l?cn(r,t,i):ae(t,r,i)}),v}),ic=Je(function(t,r,i){zn(t,i,r)});function rr(t,r){return(ix(t)?G:Vs)(t,x(r,3))}var ih=Je(function(t,r,i){t[i?0:1].push(r)},function(){return[[],[]]}),iu=L(function(t,r){if(null==t)return[];var i=r.length;return i>1&&rn(t,r[0],r[1])?r=[]:i>2&&rn(r[0],r[1],r[2])&&(r=[r[0]]),tu(t,j(r,1),[])}),il=tZ||function(){return tM.Date.now()};function Xu(t,r,c){return r=c?i:r,r=t&&null==r?t.length:r,Kn(t,128,i,i,i,i,r)}function Qu(t,r){var l;if("function"!=typeof r)throw new tn(c);return t=R(t),function(){return--t>0&&(l=r.apply(this,arguments)),t<=1&&(r=i),l}}var ip=L(function(t,r,i){var c=1;if(i.length){var l=tt(i,qt(ip));c|=32}return Kn(t,c,r,i,l)}),id=L(function(t,r,i){var c=3;if(i.length){var l=tt(i,qt(id));c|=32}return Kn(r,c,t,i,l)});function na(t,r,l){var v,_,w,P,O,C,A=0,T=!1,q=!1,M=!0;if("function"!=typeof t)throw new tn(c);function I(r){var c=v,l=_;return v=_=i,A=r,P=t.apply(l,c)}function y(t){var c=t-C,l=t-A;return C===i||c>=r||c<0||q&&l>=w}function D(){var t,i,c,l=il();if(y(l))return N(l);O=rU(D,(t=l-C,i=l-A,c=r-t,q?re(c,w-i):c))}function N(t){return O=i,M&&v?I(t):(v=_=i,P)}function gn(){var t,c=il(),l=y(c);if(v=arguments,_=this,C=c,l){if(O===i)return A=t=C,O=rU(D,r),T?I(t):P;if(q)return rT(O),O=rU(D,r),I(C)}return O===i&&(O=rU(D,r)),P}return r=xn(r)||0,K(l)&&(T=!!l.leading,w=(q="maxWait"in l)?t8(xn(l.maxWait)||0,r):w,M="trailing"in l?!!l.trailing:M),gn.cancel=function(){O!==i&&rT(O),A=0,v=C=_=O=i},gn.flush=function(){return O===i?P:N(il())},gn}var ig=L(function(t,r){return Gs(t,1,r)}),iy=L(function(t,r,i){return Gs(t,xn(r)||0,i)});function sr(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new tn(c);var e=function(){var i=arguments,c=r?r.apply(this,i):i[0],l=e.cache;if(l.has(c))return l.get(c);var v=t.apply(this,i);return e.cache=l.set(c,v)||l,v};return e.cache=new(sr.Cache||Gn),e}function ur(t){if("function"!=typeof t)throw new tn(c);return function(){var r=arguments;switch(r.length){case 0:return!t.call(this);case 1:return!t.call(this,r[0]);case 2:return!t.call(this,r[0],r[1]);case 3:return!t.call(this,r[0],r[1],r[2])}return!t.apply(this,r)}}sr.Cache=Gn;var im=L(function(t,r){var i=(r=1==r.length&&ix(r[0])?G(r[0],hn(x())):G(j(r,1),hn(x()))).length;return L(function(c){for(var l=-1,v=re(c.length,i);++l<v;)c[l]=r[l].call(this,c[l]);return cn(t,this,c)})}),i_=L(function(t,r){var c=tt(r,qt(i_));return Kn(t,32,i,r,c)}),ib=L(function(t,r){var c=tt(r,qt(ib));return Kn(t,64,i,r,c)}),iw=Yn(function(t,r){return Kn(t,256,i,i,i,r)});function bn(t,r){return t===r||t!=t&&r!=r}var iE=ke(Qr),iI=ke(function(t,r){return t>=r}),iP=Js(function(){return arguments}())?Js:function(t){return Y(t)&&tl.call(t,"callee")&&!tj.call(t,"callee")},ix=e6.isArray,iS=tB?hn(tB):function(t){return Y(t)&&en(t)==ec};function an(t){return null!=t&&ar(t.length)&&!Jn(t)}function Z(t){return Y(t)&&an(t)}var iR=t3||Ni,iO=tK?hn(tK):function(t){return Y(t)&&en(t)==T};function Ei(t){if(!Y(t))return!1;var r=en(t);return r==q||"[object DOMException]"==r||"string"==typeof t.message&&"string"==typeof t.name&&!pe(t)}function Jn(t){if(!K(t))return!1;var r=en(t);return r==M||r==k||"[object AsyncFunction]"==r||"[object Proxy]"==r}function ea(t){return"number"==typeof t&&t==R(t)}function ar(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function K(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)}function Y(t){return null!=t&&"object"==typeof t}var iC=tJ?hn(tJ):function(t){return Y(t)&&rk(t)==$};function ia(t){return"number"==typeof t||Y(t)&&en(t)==U}function pe(t){if(!Y(t)||en(t)!=B)return!1;var r=tx(t);if(null===r)return!0;var i=tl.call(r,"constructor")&&r.constructor;return"function"==typeof i&&i instanceof i&&th.call(i)==tg}var iA=tF?hn(tF):function(t){return Y(t)&&en(t)==Q},iL=tW?hn(tW):function(t){return Y(t)&&rk(t)==X};function or(t){return"string"==typeof t||!ix(t)&&Y(t)&&en(t)==et}function pn(t){return"symbol"==typeof t||Y(t)&&en(t)==es}var iN=tG?hn(tG):function(t){return Y(t)&&ar(t.length)&&!!tL[en(t)]},ij=ke(ni),iT=ke(function(t,r){return t<=r});function ua(t){if(!t)return[];if(an(t))return or(t)?On(t):un(t);if(tk&&t[tk])return function(t){for(var r,i=[];!(r=t.next()).done;)i.push(r.value);return i}(t[tk]());var r=rk(t);return(r==$?qr:r==X?Se:Gt)(t)}function Xn(t){return t?(t=xn(t))===_||t===-_?(t<0?-1:1)*17976931348623157e292:t==t?t:0:0===t?t:0}function R(t){var r=Xn(t),i=r%1;return r==r?i?r-i:r:0}function aa(t){return t?vt(R(t),0,4294967295):0}function xn(t){if("number"==typeof t)return t;if(pn(t))return w;if(K(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=K(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=ys(t);var i=eW.test(t);return i||eZ.test(t)?tq(t.slice(2),i?2:8):eF.test(t)?w:+t}function oa(t){return Un(t,on(t))}function W(t){return null==t?"":ln(t)}var iq=Ft(function(t,r){if(he(r)||an(r)){Un(r,V(r),t);return}for(var i in r)tl.call(r,i)&&se(t,i,r[i])}),iD=Ft(function(t,r){Un(r,on(r),t)}),iz=Ft(function(t,r,i,c){Un(r,on(r),t,c)}),iM=Ft(function(t,r,i,c){Un(r,V(r),t,c)}),ik=Yn(Zr),iH=L(function(t,r){t=e7(t);var c=-1,l=r.length,v=l>2?r[2]:i;for(v&&rn(r[0],r[1],v)&&(l=1);++c<l;)for(var _=r[c],w=on(_),P=-1,O=w.length;++P<O;){var C=w[P],A=t[C];(A===i||bn(A,ta[C])&&!tl.call(t,C))&&(t[C]=_[C])}return t}),i$=L(function(t){return t.push(i,yu),cn(iJ,i,t)});function Si(t,r,c){var l=null==t?i:_t(t,r);return l===i?c:l}function Oi(t,r){return null!=t&&Ru(t,r,Ac)}var iU=Au(function(t,r,i){null!=r&&"function"!=typeof r.toString&&(r=td.call(r)),t[r]=i},bi(fn)),iV=Au(function(t,r,i){null!=r&&"function"!=typeof r.toString&&(r=td.call(r)),tl.call(t,r)?t[r].push(i):t[r]=[i]},x),iB=L(ae);function V(t){return an(t)?Fs(t):jr(t)}function on(t){return an(t)?Fs(t,!0):function(t){if(!K(t))return function(t){var r=[];if(null!=t)for(var i in e7(t))r.push(i);return r}(t);var r=he(t),i=[];for(var c in t)"constructor"==c&&(r||!tl.call(t,c))||i.push(c);return i}(t)}var iK=Ft(function(t,r,i){Ke(t,r,i)}),iJ=Ft(function(t,r,i,c){Ke(t,r,i,c)}),iF=Yn(function(t,r){var i={};if(null==t)return i;var c=!1;r=G(r,function(r){return r=st(r,t),c||(c=r.length>1),r}),Un(t,pi(t),i),c&&(i=An(i,7,kc));for(var l=r.length;l--;)si(i,r[l]);return i}),iW=Yn(function(t,r){return null==t?{}:eu(t,r,function(r,i){return Oi(t,i)})});function ha(t,r){if(null==t)return{};var i=G(pi(t),function(t){return[t]});return r=x(r),eu(t,i,function(t,i){return r(t,i[0])})}var iG=xu(V),iZ=xu(on);function Gt(t){return null==t?[]:Mr(t,V(t))}var iY=Mt(function(t,r,i){return r=r.toLowerCase(),t+(i?da(r):r)});function da(t){return i2(W(t).toLowerCase())}function ga(t){return(t=W(t))&&t.replace(eQ,tY).replace(tP,"")}var iQ=Mt(function(t,r,i){return t+(i?"-":"")+r.toLowerCase()}),iX=Mt(function(t,r,i){return t+(i?" ":"")+r.toLowerCase()}),i0=mu("toLowerCase"),i1=Mt(function(t,r,i){return t+(i?"_":"")+r.toLowerCase()}),i5=Mt(function(t,r,i){return t+(i?" ":"")+i2(r)}),i6=Mt(function(t,r,i){return t+(i?" ":"")+r.toUpperCase()}),i2=mu("toUpperCase");function va(t,r,c){var l;return t=W(t),(r=c?i:r)===i?(l=t,tO.test(l))?t.match(tS)||[]:t.match(eU)||[]:t.match(r)||[]}var i3=L(function(t,r){try{return cn(t,i,r)}catch(t){return Ei(t)?t:new e3(t)}}),i4=Yn(function(t,r){return mn(r,function(r){zn(t,r=Wn(r),ip(t[r],t))}),t});function bi(t){return function(){return t}}var i9=Pu(),i7=Pu(!0);function fn(t){return t}function Ti(t){return Qs("function"==typeof t?t:An(t,1))}var i8=L(function(t,r){return function(i){return ae(i,t,r)}}),ne=L(function(t,r){return function(i){return ae(t,i,r)}});function Li(t,r,i){var c=V(r),l=ze(r,c);null!=i||K(r)&&(l.length||!c.length)||(i=r,r=t,t=this,l=ze(r,V(r)));var v=!(K(i)&&"chain"in i)||!!i.chain,_=Jn(t);return mn(l,function(i){var c=r[i];t[i]=c,_&&(t.prototype[i]=function(){var r=this.__chain__;if(v||r){var i=t(this.__wrapped__);return(i.__actions__=un(this.__actions__)).push({func:c,args:arguments,thisArg:t}),i.__chain__=r,i}return c.apply(t,nt([this.value()],arguments))})}),t}function Di(){}var nn=ci(G),ns=ci(As),no=ci(Nr);function ma(t){return _i(t)?$r(Wn(t)):function(r){return _t(r,t)}}var nc=Cu(),nh=Cu(!0);function Hi(){return[]}function Ni(){return!1}var nl=Qe(function(t,r){return t+r},0),np=hi("ceil"),nf=Qe(function(t,r){return t/r},1),nd=hi("floor"),ng=Qe(function(t,r){return t*r},1),ny=hi("round"),nm=Qe(function(t,r){return t-r},0);return a.after=function(t,r){if("function"!=typeof r)throw new tn(c);return t=R(t),function(){if(--t<1)return r.apply(this,arguments)}},a.ary=Xu,a.assign=iq,a.assignIn=iD,a.assignInWith=iz,a.assignWith=iM,a.at=ik,a.before=Qu,a.bind=ip,a.bindAll=i4,a.bindKey=id,a.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return ix(t)?t:[t]},a.chain=Yu,a.chunk=function(t,r,c){r=(c?rn(t,r,c):r===i)?1:t8(R(r),0);var l=null==t?0:t.length;if(!l||r<1)return[];for(var v=0,_=0,w=e6(t5(l/r));v<l;)w[_++]=Cn(t,v,v+=r);return w},a.compact=function(t){for(var r=-1,i=null==t?0:t.length,c=0,l=[];++r<i;){var v=t[r];v&&(l[c++]=v)}return l},a.concat=function(){var t=arguments.length;if(!t)return[];for(var r=e6(t-1),i=arguments[0],c=t;c--;)r[c-1]=arguments[c];return nt(ix(i)?un(i):[i],j(r,1))},a.cond=function(t){var r=null==t?0:t.length,i=x();return t=r?G(t,function(t){if("function"!=typeof t[1])throw new tn(c);return[i(t[0]),t[1]]}):[],L(function(i){for(var c=-1;++c<r;){var l=t[c];if(cn(l[0],this,i))return cn(l[1],this,i)}})},a.conforms=function(t){var r,i;return i=V(r=An(t,1)),function(t){return Bs(t,r,i)}},a.constant=bi,a.countBy=r8,a.create=function(t,r){var i=rR(t);return null==r?i:qs(i,r)},a.curry=function ku(t,r,c){r=c?i:r;var l=Kn(t,8,i,i,i,i,i,r);return l.placeholder=ku.placeholder,l},a.curryRight=function ju(t,r,c){r=c?i:r;var l=Kn(t,16,i,i,i,i,i,r);return l.placeholder=ju.placeholder,l},a.debounce=na,a.defaults=iH,a.defaultsDeep=i$,a.defer=ig,a.delay=iy,a.difference=rK,a.differenceBy=rJ,a.differenceWith=rF,a.drop=function(t,r,c){var l=null==t?0:t.length;return l?Cn(t,(r=c||r===i?1:R(r))<0?0:r,l):[]},a.dropRight=function(t,r,c){var l=null==t?0:t.length;return l?Cn(t,0,(r=l-(r=c||r===i?1:R(r)))<0?0:r):[]},a.dropRightWhile=function(t,r){return t&&t.length?Ze(t,x(r,3),!0,!0):[]},a.dropWhile=function(t,r){return t&&t.length?Ze(t,x(r,3),!0):[]},a.fill=function(t,r,c,l){var v=null==t?0:t.length;return v?(c&&"number"!=typeof c&&rn(t,r,c)&&(c=0,l=v),function(t,r,c,l){var v=t.length;for((c=R(c))<0&&(c=-c>v?0:v+c),(l=l===i||l>v?v:R(l))<0&&(l+=v),l=c>l?0:aa(l);c<l;)t[c++]=r;return t}(t,r,c,l)):[]},a.filter=function(t,r){return(ix(t)?jn:Ks)(t,x(r,3))},a.flatMap=function(t,r){return j(rr(t,r),1)},a.flatMapDeep=function(t,r){return j(rr(t,r),_)},a.flatMapDepth=function(t,r,c){return c=c===i?1:R(c),j(rr(t,r),c)},a.flatten=Bu,a.flattenDeep=function(t){return(null==t?0:t.length)?j(t,_):[]},a.flattenDepth=function(t,r){return(null==t?0:t.length)?j(t,r=r===i?1:R(r)):[]},a.flip=function(t){return Kn(t,512)},a.flow=i9,a.flowRight=i7,a.fromPairs=function(t){for(var r=-1,i=null==t?0:t.length,c={};++r<i;){var l=t[r];c[l[0]]=l[1]}return c},a.functions=function(t){return null==t?[]:ze(t,V(t))},a.functionsIn=function(t){return null==t?[]:ze(t,on(t))},a.groupBy=is,a.initial=function(t){return(null==t?0:t.length)?Cn(t,0,-1):[]},a.intersection=rW,a.intersectionBy=rG,a.intersectionWith=rZ,a.invert=iU,a.invertBy=iV,a.invokeMap=io,a.iteratee=Ti,a.keyBy=ic,a.keys=V,a.keysIn=on,a.map=rr,a.mapKeys=function(t,r){var i={};return r=x(r,3),$n(t,function(t,c,l){zn(i,r(t,c,l),t)}),i},a.mapValues=function(t,r){var i={};return r=x(r,3),$n(t,function(t,c,l){zn(i,c,r(t,c,l))}),i},a.matches=function(t){return ks(An(t,1))},a.matchesProperty=function(t,r){return js(t,An(r,1))},a.memoize=sr,a.merge=iK,a.mergeWith=iJ,a.method=i8,a.methodOf=ne,a.mixin=Li,a.negate=ur,a.nthArg=function(t){return t=R(t),L(function(r){return nu(r,t)})},a.omit=iF,a.omitBy=function(t,r){return ha(t,ur(x(r)))},a.once=function(t){return Qu(2,t)},a.orderBy=function(t,r,c,l){return null==t?[]:(ix(r)||(r=null==r?[]:[r]),ix(c=l?i:c)||(c=null==c?[]:[c]),tu(t,r,c))},a.over=nn,a.overArgs=im,a.overEvery=ns,a.overSome=no,a.partial=i_,a.partialRight=ib,a.partition=ih,a.pick=iW,a.pickBy=ha,a.property=ma,a.propertyOf=function(t){return function(r){return null==t?i:_t(t,r)}},a.pull=rY,a.pullAll=zu,a.pullAllBy=function(t,r,i){return t&&t.length&&r&&r.length?ti(t,r,x(i,2)):t},a.pullAllWith=function(t,r,c){return t&&t.length&&r&&r.length?ti(t,r,i,c):t},a.pullAt=rQ,a.range=nc,a.rangeRight=nh,a.rearg=iw,a.reject=function(t,r){return(ix(t)?jn:Ks)(t,ur(x(r,3)))},a.remove=function(t,r){var i=[];if(!(t&&t.length))return i;var c=-1,l=[],v=t.length;for(r=x(r,3);++c<v;){var _=t[c];r(_,c,t)&&(i.push(_),l.push(c))}return ru(t,l),i},a.rest=function(t,r){if("function"!=typeof t)throw new tn(c);return L(t,r=r===i?r:R(r))},a.reverse=Ai,a.sampleSize=function(t,r,c){return r=(c?rn(t,r,c):r===i)?1:R(r),(ix(t)?function(t,r){return tr(un(t),vt(r,0,t.length))}:function(t,r){var i=Gt(t);return tr(i,vt(r,0,i.length))})(t,r)},a.set=function(t,r,i){return null==t?t:fe(t,r,i)},a.setWith=function(t,r,c,l){return l="function"==typeof l?l:i,null==t?t:fe(t,r,c,l)},a.shuffle=function(t){return(ix(t)?function(t){return tr(un(t))}:function(t){return tr(Gt(t))})(t)},a.slice=function(t,r,c){var l=null==t?0:t.length;return l?(c&&"number"!=typeof c&&rn(t,r,c)?(r=0,c=l):(r=null==r?0:R(r),c=c===i?l:R(c)),Cn(t,r,c)):[]},a.sortBy=iu,a.sortedUniq=function(t){return t&&t.length?su(t):[]},a.sortedUniqBy=function(t,r){return t&&t.length?su(t,x(r,2)):[]},a.split=function(t,r,c){return c&&"number"!=typeof c&&rn(t,r,c)&&(r=c=i),(c=c===i?4294967295:c>>>0)?(t=W(t))&&("string"==typeof r||null!=r&&!iA(r))&&!(r=ln(r))&&Lt(t)?ut(On(t),0,c):t.split(r,c):[]},a.spread=function(t,r){if("function"!=typeof t)throw new tn(c);return r=null==r?0:t8(R(r),0),L(function(i){var c=i[r],l=ut(i,0,r);return c&&nt(l,c),cn(t,this,l)})},a.tail=function(t){var r=null==t?0:t.length;return r?Cn(t,1,r):[]},a.take=function(t,r,c){return t&&t.length?Cn(t,0,(r=c||r===i?1:R(r))<0?0:r):[]},a.takeRight=function(t,r,c){var l=null==t?0:t.length;return l?Cn(t,(r=l-(r=c||r===i?1:R(r)))<0?0:r,l):[]},a.takeRightWhile=function(t,r){return t&&t.length?Ze(t,x(r,3),!1,!0):[]},a.takeWhile=function(t,r){return t&&t.length?Ze(t,x(r,3)):[]},a.tap=function(t,r){return r(t),t},a.throttle=function(t,r,i){var l=!0,v=!0;if("function"!=typeof t)throw new tn(c);return K(i)&&(l="leading"in i?!!i.leading:l,v="trailing"in i?!!i.trailing:v),na(t,r,{leading:l,maxWait:r,trailing:v})},a.thru=er,a.toArray=ua,a.toPairs=iG,a.toPairsIn=iZ,a.toPath=function(t){return ix(t)?G(t,Wn):pn(t)?[t]:un(rB(W(t)))},a.toPlainObject=oa,a.transform=function(t,r,i){var c=ix(t),l=c||iR(t)||iN(t);if(r=x(r,4),null==i){var v=t&&t.constructor;i=l?c?new v:[]:K(t)&&Jn(v)?rR(tx(t)):{}}return(l?mn:$n)(t,function(t,c,l){return r(i,t,c,l)}),i},a.unary=function(t){return Xu(t,1)},a.union=rX,a.unionBy=r0,a.unionWith=r1,a.uniq=function(t){return t&&t.length?it(t):[]},a.uniqBy=function(t,r){return t&&t.length?it(t,x(r,2)):[]},a.uniqWith=function(t,r){return r="function"==typeof r?r:i,t&&t.length?it(t,i,r):[]},a.unset=function(t,r){return null==t||si(t,r)},a.unzip=Ci,a.unzipWith=Ku,a.update=function(t,r,i){return null==t?t:au(t,r,oi(i))},a.updateWith=function(t,r,c,l){return l="function"==typeof l?l:i,null==t?t:au(t,r,oi(c),l)},a.values=Gt,a.valuesIn=function(t){return null==t?[]:Mr(t,on(t))},a.without=r5,a.words=va,a.wrap=function(t,r){return i_(oi(r),t)},a.xor=r6,a.xorBy=r2,a.xorWith=r3,a.zip=r4,a.zipObject=function(t,r){return fu(t||[],r||[],se)},a.zipObjectDeep=function(t,r){return fu(t||[],r||[],fe)},a.zipWith=r9,a.entries=iG,a.entriesIn=iZ,a.extend=iD,a.extendWith=iz,Li(a,a),a.add=nl,a.attempt=i3,a.camelCase=iY,a.capitalize=da,a.ceil=np,a.clamp=function(t,r,c){return c===i&&(c=r,r=i),c!==i&&(c=(c=xn(c))==c?c:0),r!==i&&(r=(r=xn(r))==r?r:0),vt(xn(t),r,c)},a.clone=function(t){return An(t,4)},a.cloneDeep=function(t){return An(t,5)},a.cloneDeepWith=function(t,r){return An(t,5,r="function"==typeof r?r:i)},a.cloneWith=function(t,r){return An(t,4,r="function"==typeof r?r:i)},a.conformsTo=function(t,r){return null==r||Bs(t,r,V(r))},a.deburr=ga,a.defaultTo=function(t,r){return null==t||t!=t?r:t},a.divide=nf,a.endsWith=function(t,r,c){t=W(t),r=ln(r);var l=t.length,v=c=c===i?l:vt(R(c),0,l);return(c-=r.length)>=0&&t.slice(c,v)==r},a.eq=bn,a.escape=function(t){return(t=W(t))&&eR.test(t)?t.replace(ex,tQ):t},a.escapeRegExp=function(t){return(t=W(t))&&eD.test(t)?t.replace(eT,"\\$&"):t},a.every=function(t,r,c){var l=ix(t)?As:mc;return c&&rn(t,r,c)&&(r=i),l(t,x(r,3))},a.find=ie,a.findIndex=Mu,a.findKey=function(t,r){return Cs(t,x(r,3),$n)},a.findLast=ir,a.findLastIndex=qu,a.findLastKey=function(t,r){return Cs(t,x(r,3),Xr)},a.floor=nd,a.forEach=Zu,a.forEachRight=Ju,a.forIn=function(t,r){return null==t?t:rA(t,x(r,3),on)},a.forInRight=function(t,r){return null==t?t:rL(t,x(r,3),on)},a.forOwn=function(t,r){return t&&$n(t,x(r,3))},a.forOwnRight=function(t,r){return t&&Xr(t,x(r,3))},a.get=Si,a.gt=iE,a.gte=iI,a.has=function(t,r){return null!=t&&Ru(t,r,Pc)},a.hasIn=Oi,a.head=Gu,a.identity=fn,a.includes=function(t,r,i,c){t=an(t)?t:Gt(t),i=i&&!c?R(i):0;var l=t.length;return i<0&&(i=t8(l+i,0)),or(t)?i<=l&&t.indexOf(r,i)>-1:!!l&&Tt(t,r,i)>-1},a.indexOf=function(t,r,i){var c=null==t?0:t.length;if(!c)return -1;var l=null==i?0:R(i);return l<0&&(l=t8(c+l,0)),Tt(t,r,l)},a.inRange=function(t,r,c){var l,v,_;return r=Xn(r),c===i?(c=r,r=0):c=Xn(c),(l=t=xn(t))>=re(v=r,_=c)&&l<t8(v,_)},a.invoke=iB,a.isArguments=iP,a.isArray=ix,a.isArrayBuffer=iS,a.isArrayLike=an,a.isArrayLikeObject=Z,a.isBoolean=function(t){return!0===t||!1===t||Y(t)&&en(t)==A},a.isBuffer=iR,a.isDate=iO,a.isElement=function(t){return Y(t)&&1===t.nodeType&&!pe(t)},a.isEmpty=function(t){if(null==t)return!0;if(an(t)&&(ix(t)||"string"==typeof t||"function"==typeof t.splice||iR(t)||iN(t)||iP(t)))return!t.length;var r=rk(t);if(r==$||r==X)return!t.size;if(he(t))return!jr(t).length;for(var i in t)if(tl.call(t,i))return!1;return!0},a.isEqual=function(t,r){return oe(t,r)},a.isEqualWith=function(t,r,c){var l=(c="function"==typeof c?c:i)?c(t,r):i;return l===i?oe(t,r,i,c):!!l},a.isError=Ei,a.isFinite=function(t){return"number"==typeof t&&t4(t)},a.isFunction=Jn,a.isInteger=ea,a.isLength=ar,a.isMap=iC,a.isMatch=function(t,r){return t===r||kr(t,r,gi(r))},a.isMatchWith=function(t,r,c){return c="function"==typeof c?c:i,kr(t,r,gi(r),c)},a.isNaN=function(t){return ia(t)&&t!=+t},a.isNative=function(t){if(rH(t))throw new e3("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Xs(t)},a.isNil=function(t){return null==t},a.isNull=function(t){return null===t},a.isNumber=ia,a.isObject=K,a.isObjectLike=Y,a.isPlainObject=pe,a.isRegExp=iA,a.isSafeInteger=function(t){return ea(t)&&t>=-9007199254740991&&t<=9007199254740991},a.isSet=iL,a.isString=or,a.isSymbol=pn,a.isTypedArray=iN,a.isUndefined=function(t){return t===i},a.isWeakMap=function(t){return Y(t)&&rk(t)==eo},a.isWeakSet=function(t){return Y(t)&&"[object WeakSet]"==en(t)},a.join=function(t,r){return null==t?"":t9.call(t,r)},a.kebabCase=iQ,a.last=In,a.lastIndexOf=function(t,r,c){var l=null==t?0:t.length;if(!l)return -1;var v=l;return c!==i&&(v=(v=R(c))<0?t8(l+v,0):re(v,l-1)),r==r?function(t,r,i){for(var c=i+1;c--&&t[c]!==r;);return c}(t,r,v):ye(t,Is,v,!0)},a.lowerCase=iX,a.lowerFirst=i0,a.lt=ij,a.lte=iT,a.max=function(t){return t&&t.length?Ge(t,fn,Qr):i},a.maxBy=function(t,r){return t&&t.length?Ge(t,x(r,2),Qr):i},a.mean=function(t){return xs(t,fn)},a.meanBy=function(t,r){return xs(t,x(r,2))},a.min=function(t){return t&&t.length?Ge(t,fn,ni):i},a.minBy=function(t,r){return t&&t.length?Ge(t,x(r,2),ni):i},a.stubArray=Hi,a.stubFalse=Ni,a.stubObject=function(){return{}},a.stubString=function(){return""},a.stubTrue=function(){return!0},a.multiply=ng,a.nth=function(t,r){return t&&t.length?nu(t,R(r)):i},a.noConflict=function(){return tM._===this&&(tM._=ty),this},a.noop=Di,a.now=il,a.pad=function(t,r,i){t=W(t);var c=(r=R(r))?Dt(t):0;if(!r||c>=r)return t;var l=(r-c)/2;return Ve(t6(l),i)+t+Ve(t5(l),i)},a.padEnd=function(t,r,i){t=W(t);var c=(r=R(r))?Dt(t):0;return r&&c<r?t+Ve(r-c,i):t},a.padStart=function(t,r,i){t=W(t);var c=(r=R(r))?Dt(t):0;return r&&c<r?Ve(r-c,i)+t:t},a.parseInt=function(t,r,i){return i||null==r?r=0:r&&(r=+r),rs(W(t).replace(ez,""),r||0)},a.random=function(t,r,c){if(c&&"boolean"!=typeof c&&rn(t,r,c)&&(r=c=i),c===i&&("boolean"==typeof r?(c=r,r=i):"boolean"==typeof t&&(c=t,t=i)),t===i&&r===i?(t=0,r=1):(t=Xn(t),r===i?(r=t,t=0):r=Xn(r)),t>r){var l=t;t=r,r=l}if(c||t%1||r%1){var v=ro();return re(t+v*(r-t+tT("1e-"+((v+"").length-1))),r)}return ei(t,r)},a.reduce=function(t,r,i){var c=ix(t)?Hr:Es,l=arguments.length<3;return c(t,x(r,4),i,l,rO)},a.reduceRight=function(t,r,i){var c=ix(t)?jo:Es,l=arguments.length<3;return c(t,x(r,4),i,l,rC)},a.repeat=function(t,r,c){return r=(c?rn(t,r,c):r===i)?1:R(r),ri(W(t),r)},a.replace=function(){var t=arguments,r=W(t[0]);return t.length<3?r:r.replace(t[1],t[2])},a.result=function(t,r,c){r=st(r,t);var l=-1,v=r.length;for(v||(v=1,t=i);++l<v;){var _=null==t?i:t[Wn(r[l])];_===i&&(l=v,_=c),t=Jn(_)?_.call(t):_}return t},a.round=ny,a.runInContext=h,a.sample=function(t){return(ix(t)?Ms:function(t){return Ms(Gt(t))})(t)},a.size=function(t){if(null==t)return 0;if(an(t))return or(t)?Dt(t):t.length;var r=rk(t);return r==$||r==X?t.size:jr(t).length},a.snakeCase=i1,a.some=function(t,r,c){var l=ix(t)?Nr:Mc;return c&&rn(t,r,c)&&(r=i),l(t,x(r,3))},a.sortedIndex=function(t,r){return Ye(t,r)},a.sortedIndexBy=function(t,r,i){return ii(t,r,x(i,2))},a.sortedIndexOf=function(t,r){var i=null==t?0:t.length;if(i){var c=Ye(t,r);if(c<i&&bn(t[c],r))return c}return -1},a.sortedLastIndex=function(t,r){return Ye(t,r,!0)},a.sortedLastIndexBy=function(t,r,i){return ii(t,r,x(i,2),!0)},a.sortedLastIndexOf=function(t,r){if(null==t?0:t.length){var i=Ye(t,r,!0)-1;if(bn(t[i],r))return i}return -1},a.startCase=i5,a.startsWith=function(t,r,i){return t=W(t),i=null==i?0:vt(R(i),0,t.length),r=ln(r),t.slice(i,i+r.length)==r},a.subtract=nm,a.sum=function(t){return t&&t.length?Wr(t,fn):0},a.sumBy=function(t,r){return t&&t.length?Wr(t,x(r,2)):0},a.template=function(t,r,c){var l=a.templateSettings;c&&rn(t,r,c)&&(r=i),t=W(t),r=iz({},r,l,Eu);var v,_,w=iz({},r.imports,l.imports,Eu),P=V(w),O=Mr(w,P),C=0,A=r.interpolate||eX,T="__p += '",q=e8((r.escape||eX).source+"|"+A.source+"|"+(A===eA?eK:eX).source+"|"+(r.evaluate||eX).source+"|$","g"),M="//# sourceURL="+(tl.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tA+"]")+`
`;t.replace(q,function(r,i,c,l,w,P){return c||(c=l),T+=t.slice(C,P).replace(e0,cf),i&&(v=!0,T+=`' +
__e(`+i+`) +
'`),w&&(_=!0,T+=`';
`+w+`;
__p += '`),c&&(T+=`' +
((__t = (`+c+`)) == null ? '' : __t) +
'`),C=P+r.length,r}),T+=`';
`;var k=tl.call(r,"variable")&&r.variable;if(k){if(eV.test(k))throw new e3("Invalid `variable` option passed into `_.template`")}else T=`with (obj) {
`+T+`
}
`;T=(_?T.replace(ew,""):T).replace(eE,"$1").replace(eI,"$1;"),T="function("+(k||"obj")+`) {
`+(k?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(_?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+T+`return __p
}`;var $=i3(function(){return e4(P,M+"return "+T).apply(i,O)});if($.source=T,Ei($))throw $;return $},a.times=function(t,r){if((t=R(t))<1||t>9007199254740991)return[];var i=4294967295,c=re(t,4294967295);r=x(r),t-=4294967295;for(var l=Fr(c,r);++i<t;)r(i);return l},a.toFinite=Xn,a.toInteger=R,a.toLength=aa,a.toLower=function(t){return W(t).toLowerCase()},a.toNumber=xn,a.toSafeInteger=function(t){return t?vt(R(t),-9007199254740991,9007199254740991):0===t?t:0},a.toString=W,a.toUpper=function(t){return W(t).toUpperCase()},a.trim=function(t,r,c){if((t=W(t))&&(c||r===i))return ys(t);if(!t||!(r=ln(r)))return t;var l=On(t),v=On(r),_=Ss(l,v),w=Os(l,v)+1;return ut(l,_,w).join("")},a.trimEnd=function(t,r,c){if((t=W(t))&&(c||r===i))return t.slice(0,bs(t)+1);if(!t||!(r=ln(r)))return t;var l=On(t),v=Os(l,On(r))+1;return ut(l,0,v).join("")},a.trimStart=function(t,r,c){if((t=W(t))&&(c||r===i))return t.replace(ez,"");if(!t||!(r=ln(r)))return t;var l=On(t),v=Ss(l,On(r));return ut(l,v).join("")},a.truncate=function(t,r){var c=30,l="...";if(K(r)){var v="separator"in r?r.separator:v;c="length"in r?R(r.length):c,l="omission"in r?ln(r.omission):l}var _=(t=W(t)).length;if(Lt(t)){var w=On(t);_=w.length}if(c>=_)return t;var P=c-Dt(l);if(P<1)return l;var O=w?ut(w,0,P).join(""):t.slice(0,P);if(v===i)return O+l;if(w&&(P+=O.length-P),iA(v)){if(t.slice(P).search(v)){var C,A=O;for(v.global||(v=e8(v.source,W(eJ.exec(v))+"g")),v.lastIndex=0;C=v.exec(A);)var T=C.index;O=O.slice(0,T===i?P:T)}}else if(t.indexOf(ln(v),P)!=P){var q=O.lastIndexOf(v);q>-1&&(O=O.slice(0,q))}return O+l},a.unescape=function(t){return(t=W(t))&&eS.test(t)?t.replace(eP,tX):t},a.uniqueId=function(t){var r=++tp;return W(t)+r},a.upperCase=i6,a.upperFirst=i2,a.each=Zu,a.eachRight=Ju,a.first=Gu,Li(a,(e5={},$n(a,function(t,r){tl.call(a.prototype,r)||(e5[r]=t)}),e5),{chain:!1}),a.VERSION="4.17.21",mn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){a[t].placeholder=a}),mn(["drop","take"],function(t,r){H.prototype[t]=function(c){c=c===i?1:t8(R(c),0);var l=this.__filtered__&&!r?new H(this):this.clone();return l.__filtered__?l.__takeCount__=re(c,l.__takeCount__):l.__views__.push({size:re(c,4294967295),type:t+(l.__dir__<0?"Right":"")}),l},H.prototype[t+"Right"]=function(r){return this.reverse()[t](r).reverse()}}),mn(["filter","map","takeWhile"],function(t,r){var i=r+1,c=1==i||3==i;H.prototype[t]=function(t){var r=this.clone();return r.__iteratees__.push({iteratee:x(t,3),type:i}),r.__filtered__=r.__filtered__||c,r}}),mn(["head","last"],function(t,r){var i="take"+(r?"Right":"");H.prototype[t]=function(){return this[i](1).value()[0]}}),mn(["initial","tail"],function(t,r){var i="drop"+(r?"":"Right");H.prototype[t]=function(){return this.__filtered__?new H(this):this[i](1)}}),H.prototype.compact=function(){return this.filter(fn)},H.prototype.find=function(t){return this.filter(t).head()},H.prototype.findLast=function(t){return this.reverse().find(t)},H.prototype.invokeMap=L(function(t,r){return"function"==typeof t?new H(this):this.map(function(i){return ae(i,t,r)})}),H.prototype.reject=function(t){return this.filter(ur(x(t)))},H.prototype.slice=function(t,r){t=R(t);var c=this;return c.__filtered__&&(t>0||r<0)?new H(c):(t<0?c=c.takeRight(-t):t&&(c=c.drop(t)),r!==i&&(c=(r=R(r))<0?c.dropRight(-r):c.take(r-t)),c)},H.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},H.prototype.toArray=function(){return this.take(4294967295)},$n(H.prototype,function(t,r){var c=/^(?:filter|find|map|reject)|While$/.test(r),l=/^(?:head|last)$/.test(r),v=a[l?"take"+("last"==r?"Right":""):r],_=l||/^find/.test(r);v&&(a.prototype[r]=function(){var r=this.__wrapped__,w=l?[1]:arguments,P=r instanceof H,O=w[0],C=P||ix(r),m=function(t){var r=v.apply(a,nt([t],w));return l&&A?r[0]:r};C&&c&&"function"==typeof O&&1!=O.length&&(P=C=!1);var A=this.__chain__,T=!!this.__actions__.length,q=_&&!A,M=P&&!T;if(!_&&C){r=M?r:new H(this);var k=t.apply(r,w);return k.__actions__.push({func:er,args:[m],thisArg:i}),new Pn(k,A)}return q&&M?t.apply(this,w):(k=this.thru(m),q?l?k.value()[0]:k.value():k)})}),mn(["pop","push","shift","sort","splice","unshift"],function(t){var r=ts[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",c=/^(?:pop|shift)$/.test(t);a.prototype[t]=function(){var t=arguments;if(c&&!this.__chain__){var l=this.value();return r.apply(ix(l)?l:[],t)}return this[i](function(i){return r.apply(ix(i)?i:[],t)})}}),$n(H.prototype,function(t,r){var i=a[r];if(i){var c=i.name+"";tl.call(rm,c)||(rm[c]=[]),rm[c].push({name:r,func:i})}}),rm[Xe(i,2).name]=[{name:"wrapper",func:i}],H.prototype.clone=function(){var t=new H(this.__wrapped__);return t.__actions__=un(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=un(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=un(this.__views__),t},H.prototype.reverse=function(){if(this.__filtered__){var t=new H(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t},H.prototype.value=function(){var t=this.__wrapped__.value(),r=this.__dir__,i=ix(t),c=r<0,l=i?t.length:0,v=function(t,r,i){for(var c=-1,l=i.length;++c<l;){var v=i[c],_=v.size;switch(v.type){case"drop":t+=_;break;case"dropRight":r-=_;break;case"take":r=re(r,t+_);break;case"takeRight":t=t8(t,r-_)}}return{start:t,end:r}}(0,l,this.__views__),_=v.start,w=v.end,P=w-_,O=c?w:_-1,C=this.__iteratees__,A=C.length,T=0,q=re(P,this.__takeCount__);if(!i||!c&&l==P&&q==P)return ou(t,this.__actions__);var M=[];e:for(;P--&&T<q;){O+=r;for(var k=-1,$=t[O];++k<A;){var U=C[k],B=U.iteratee,J=U.type,Q=B($);if(2==J)$=Q;else if(!Q){if(1==J)continue e;break e}}M[T++]=$}return M},a.prototype.at=r7,a.prototype.chain=function(){return Yu(this)},a.prototype.commit=function(){return new Pn(this.value(),this.__chain__)},a.prototype.next=function(){this.__values__===i&&(this.__values__=ua(this.value()));var t=this.__index__>=this.__values__.length,r=t?i:this.__values__[this.__index__++];return{done:t,value:r}},a.prototype.plant=function(t){for(var r,c=this;c instanceof qe;){var l=Fu(c);l.__index__=0,l.__values__=i,r?v.__wrapped__=l:r=l;var v=l;c=c.__wrapped__}return v.__wrapped__=t,r},a.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof H){var r=t;return this.__actions__.length&&(r=new H(this)),(r=r.reverse()).__actions__.push({func:er,args:[Ai],thisArg:i}),new Pn(r,this.__chain__)}return this.thru(Ai)},a.prototype.toJSON=a.prototype.valueOf=a.prototype.value=function(){return ou(this.__wrapped__,this.__actions__)},a.prototype.first=a.prototype.head,tk&&(a.prototype[tk]=function(){return this}),a}();tH?((tH.exports=t0)._=t0,tk._=t0):tM._=t0}).call(t8)}(re,re.exports);var rt=Object.defineProperty,rs=Object.defineProperties,ro=Object.getOwnPropertyDescriptors,ra=Object.getOwnPropertySymbols,rc=Object.prototype.hasOwnProperty,rh=Object.prototype.propertyIsEnumerable,ya=(t,r,i)=>r in t?rt(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,index_es_cr=(t,r)=>{for(var i in r||(r={}))rc.call(r,i)&&ya(t,i,r[i]);if(ra)for(var i of ra(r))rh.call(r,i)&&ya(t,i,r[i]);return t},Yg=(t,r)=>rs(t,ro(r));function index_es_ft(t,r,i){var c;let l=(0,v.DQ)(t);return(null==(c=r.rpcMap)?void 0:c[l.reference])||`https://rpc.walletconnect.com/v1/?chainId=${l.namespace}:${l.reference}&projectId=${i}`}function index_es_Ct(t){return t.includes(":")?t.split(":")[1]:t}function Sa(t){return t.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function Oa(t){var r,i,c,l;let _={};if(!(0,v.L5)(t))return _;for(let[w,P]of Object.entries(t)){let t=(0,v.gp)(w)?[w]:P.chains,O=P.methods||[],C=P.events||[],A=P.rpcMap||{},T=(0,v.M)(w);_[T]=Yg(index_es_cr(index_es_cr({},_[T]),P),{chains:(0,v.eG)(t,null==(r=_[T])?void 0:r.chains),methods:(0,v.eG)(O,null==(i=_[T])?void 0:i.methods),events:(0,v.eG)(C,null==(c=_[T])?void 0:c.events),rpcMap:index_es_cr(index_es_cr({},A),null==(l=_[T])?void 0:l.rpcMap)})}return _}function Xg(t){return t.includes(":")?t.split(":")[2]:t}function index_es_Wi(t){return"number"==typeof t?t:t.includes("0x")?parseInt(t,16):t.includes(":")?Number(t.split(":")[1]):Number(t)}let rl={},z=t=>rl[t],Fi=(t,r)=>{rl[t]=r};let Vg=class Vg{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=z("events"),this.client=z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(t7.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getAccounts(){let t=this.namespace.accounts;return t&&t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(r=>{var i;let c=index_es_Ct(r);t[c]=this.createHttpProvider(c,null==(i=this.namespace.rpcMap)?void 0:i[r])}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){let i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){let i=r||index_es_ft(t,this.namespace,this.client.core.projectId);if(!i)throw Error(`No RPC url provided for chainId: ${t}`);return new JsonRpcProvider(new HttpConnection(i,z("disableProviderPing")))}};let kg=class kg{constructor(t){this.name="eip155",this.namespace=t.namespace,this.events=z("events"),this.client=z("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(parseInt(t),r),this.chainId=parseInt(t),this.events.emit(t7.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,r){let i=r||index_es_ft(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!i)throw Error(`No RPC url provided for chainId: ${t}`);return new JsonRpcProvider(new HttpConnection(i,z("disableProviderPing")))}setHttpProvider(t,r){let i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProviders(){let t={};return this.namespace.chains.forEach(r=>{var i;let c=parseInt(index_es_Ct(r));t[c]=this.createHttpProvider(c,null==(i=this.namespace.rpcMap)?void 0:i[r])}),t}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){let t=this.chainId,r=this.httpProviders[t];if(typeof r>"u")throw Error(`JSON-RPC provider for ${t} not found`);return r}async handleSwitchChain(t){var r,i;let c=t.request.params?null==(r=t.request.params[0])?void 0:r.chainId:"0x0";c=c.startsWith("0x")?c:`0x${c}`;let l=parseInt(c,16);if(this.isChainApproved(l))this.setDefaultChain(`${l}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:c}]},chainId:null==(i=this.namespace.chains)?void 0:i[0]}),this.setDefaultChain(`${l}`);else throw Error(`Failed to switch to chain 'eip155:${l}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}};let jg=class jg{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=z("events"),this.client=z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(t7.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(r=>{var i;let c=index_es_Ct(r);t[c]=this.createHttpProvider(c,null==(i=this.namespace.rpcMap)?void 0:i[r])}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){let i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){let i=r||index_es_ft(t,this.namespace,this.client.core.projectId);if(!i)throw Error(`No RPC url provided for chainId: ${t}`);return new JsonRpcProvider(new HttpConnection(i,z("disableProviderPing")))}};let nv=class nv{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=z("events"),this.client=z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(t7.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(r=>{var i;let c=index_es_Ct(r);t[c]=this.createHttpProvider(c,null==(i=this.namespace.rpcMap)?void 0:i[r])}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){let i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){let i=r||index_es_ft(t,this.namespace,this.client.core.projectId);if(!i)throw Error(`No RPC url provided for chainId: ${t}`);return new JsonRpcProvider(new HttpConnection(i,z("disableProviderPing")))}};let tv=class tv{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=z("events"),this.client=z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(t7.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(r=>{let i=this.getCardanoRPCUrl(r),c=index_es_Ct(r);t[c]=this.createHttpProvider(c,i)}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw Error(`JSON-RPC provider for ${t} not found`);return r}getCardanoRPCUrl(t){let r=this.namespace.rpcMap;if(r)return r[t]}setHttpProvider(t,r){let i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){let i=r||this.getCardanoRPCUrl(t);if(!i)throw Error(`No RPC url provided for chainId: ${t}`);return new JsonRpcProvider(new HttpConnection(i,z("disableProviderPing")))}};let ev=class ev{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=z("events"),this.client=z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(t7.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(r=>{var i;let c=index_es_Ct(r);t[c]=this.createHttpProvider(c,null==(i=this.namespace.rpcMap)?void 0:i[r])}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){let i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){let i=r||index_es_ft(t,this.namespace,this.client.core.projectId);if(!i)throw Error(`No RPC url provided for chainId: ${t}`);return new JsonRpcProvider(new HttpConnection(i,z("disableProviderPing")))}};let rv=class rv{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=z("events"),this.client=z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(t7.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(r=>{var i;let c=index_es_Ct(r);t[c]=this.createHttpProvider(c,null==(i=this.namespace.rpcMap)?void 0:i[r])}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){let i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){let i=r||index_es_ft(t,this.namespace,this.client.core.projectId);if(!i)throw Error(`No RPC url provided for chainId: ${t}`);return new JsonRpcProvider(new HttpConnection(i,z("disableProviderPing")))}};let iv=class iv{constructor(t){this.name="near",this.namespace=t.namespace,this.events=z("events"),this.client=z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){let i=r||index_es_ft(`${this.name}:${t}`,this.namespace);if(!i)throw Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,i)}this.events.emit(t7.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let t=this.namespace.accounts;return t&&t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(r=>{var i;t[r]=this.createHttpProvider(r,null==(i=this.namespace.rpcMap)?void 0:i[r])}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){let i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){let i=r||index_es_ft(t,this.namespace);return typeof i>"u"?void 0:new JsonRpcProvider(new HttpConnection(i,z("disableProviderPing")))}};var rp=Object.defineProperty,rd=Object.defineProperties,rg=Object.getOwnPropertyDescriptors,ry=Object.getOwnPropertySymbols,rm=Object.prototype.hasOwnProperty,r_=Object.prototype.propertyIsEnumerable,Ta=(t,r,i)=>r in t?rp(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,index_es_hr=(t,r)=>{for(var i in r||(r={}))rm.call(r,i)&&Ta(t,i,r[i]);if(ry)for(var i of ry(r))r_.call(r,i)&&Ta(t,i,r[i]);return t},Mi=(t,r)=>rd(t,rg(r));let index_es_lr=class index_es_lr{constructor(t){this.events=new(l()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=t,this.logger="u">typeof t?.logger&&"string"!=typeof t?.logger?t.logger:(0,P.pino)((0,P.getDefaultLoggerOptions)({level:t?.logger||t4})),this.disableProviderPing=t?.disableProviderPing||!1}static async init(t){let r=new index_es_lr(t);return await r.initialize(),r}async request(t,r){let[i,c]=this.validateChain(r);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(i).request({request:index_es_hr({},t),chainId:`${i}:${c}`,topic:this.session.topic})}sendAsync(t,r,i){this.request(t,i).then(t=>r(null,t)).catch(t=>r(t,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(t=this.session)?void 0:t.topic,reason:(0,v.D6)("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}removeListener(t,r){this.events.removeListener(t,r)}off(t,r){this.events.off(t,r)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw Error("Max auto pairing attempts reached");let{uri:i,approval:c}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});i&&(this.uri=i,this.events.emit("display_uri",i)),await c().then(t=>{this.session=t,this.namespaces||(this.namespaces=function(t){let r={};for(let[i,c]of Object.entries(t)){let t=c.methods||[],l=c.events||[],_=c.accounts||[],w=(0,v.gp)(i)?[i]:c.chains?c.chains:Sa(c.accounts);r[i]={chains:w,methods:t,events:l,accounts:_}}return r}(t.namespaces),this.persist("namespaces",this.namespaces))}).catch(t=>{if(t.message!==tK)throw t;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,r){try{if(!this.session)return;let[i,c]=this.validateChain(t);this.getProvider(i).setDefaultChain(c,r)}catch(t){if(!/Please call connect/.test(t.message))throw t}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");let r=this.client.pairing.getAll();if((0,v.qt)(r)){for(let i of r)t.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){let t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await index_es_Q.init({logger:this.providerOpts.logger||t4,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");if(!this.session)throw Error("Session not initialized. Please call connect() before enable()");let t=[...new Set(Object.keys(this.session.namespaces).map(t=>(0,v.M)(t)))];Fi("client",this.client),Fi("events",this.events),Fi("disableProviderPing",this.disableProviderPing),t.forEach(t=>{if(!this.session)return;let r=function(t,r){let i=Object.keys(r.namespaces).filter(r=>r.includes(t));if(!i.length)return[];let c=[];return i.forEach(t=>{let i=r.namespaces[t].accounts;c.push(...i)}),c}(t,this.session),i=Sa(r),c=function(t={},r={}){let i=Oa(t),c=Oa(r);return re.exports.merge(i,c)}(this.namespaces,this.optionalNamespaces),l=Mi(index_es_hr({},c[t]),{accounts:r,chains:i});switch(t){case"eip155":this.rpcProviders[t]=new kg({namespace:l});break;case"solana":this.rpcProviders[t]=new jg({namespace:l});break;case"cosmos":this.rpcProviders[t]=new nv({namespace:l});break;case"polkadot":this.rpcProviders[t]=new Vg({namespace:l});break;case"cip34":this.rpcProviders[t]=new tv({namespace:l});break;case"elrond":this.rpcProviders[t]=new ev({namespace:l});break;case"multiversx":this.rpcProviders[t]=new rv({namespace:l});break;case"near":this.rpcProviders[t]=new iv({namespace:l})}})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{let{params:r}=t,{event:i}=r;if("accountsChanged"===i.name){let t=i.data;t&&(0,v.qt)(t)&&this.events.emit("accountsChanged",t.map(Xg))}else if("chainChanged"===i.name){let t=r.chainId,i=r.event.data,c=(0,v.M)(t),l=index_es_Wi(t)!==index_es_Wi(i)?`${c}:${index_es_Wi(i)}`:t;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:r})=>{var i;let{namespaces:c}=r,l=null==(i=this.client)?void 0:i.session.get(t);this.session=Mi(index_es_hr({},l),{namespaces:c}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:r})}),this.client.on("session_delete",async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",Mi(index_es_hr({},(0,v.D6)("USER_DISCONNECTED")),{data:t.topic}))}),this.on(t7.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){if(!this.rpcProviders[t])throw Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var r;this.getProvider(t).updateNamespace(null==(r=this.session)?void 0:r.namespaces[t])})}setNamespaces(t){let{namespaces:r,optionalNamespaces:i,sessionProperties:c}=t;r&&Object.keys(r).length&&(this.namespaces=r),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=c,this.persist("namespaces",r),this.persist("optionalNamespaces",i)}validateChain(t){let[r,i]=t?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,i];if(r&&!Object.keys(this.namespaces||{}).map(t=>(0,v.M)(t)).includes(r))throw Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&i)return[r,i];let c=(0,v.M)(Object.keys(this.namespaces)[0]),l=this.rpcProviders[c].getDefaultChain();return[c,l]}async requestAccounts(){let[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,r=!1){var i;if(!this.namespaces)return;let[c,l]=this.validateChain(t);r||this.getProvider(c).setDefaultChain(l),(null!=(i=this.namespaces[c])?i:this.namespaces[`${c}:${l}`]).defaultChain=l,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",l)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(t,r){this.client.core.storage.setItem(`${t9}/${t}`,r)}async getFromStore(t){return await this.client.core.storage.getItem(`${t9}/${t}`)}};let rb=["eth_sendTransaction","personal_sign"],rw=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],rE=["chainChanged","accountsChanged"],rI=["chainChanged","accountsChanged","message","disconnect","connect"];var rP=Object.defineProperty,rx=Object.defineProperties,rS=Object.getOwnPropertyDescriptors,rR=Object.getOwnPropertySymbols,rO=Object.prototype.hasOwnProperty,rC=Object.prototype.propertyIsEnumerable,index_es_O=(t,r,i)=>r in t?rP(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,index_es_p=(t,r)=>{for(var i in r||(r={}))rO.call(r,i)&&index_es_O(t,i,r[i]);if(rR)for(var i of rR(r))rC.call(r,i)&&index_es_O(t,i,r[i]);return t},index_es_M=(t,r)=>rx(t,rS(r));function ethereum_provider_dist_index_es_g(t){return Number(t[0].split(":")[1])}function f(t){return`0x${t.toString(16)}`}let dist_index_es_v=class dist_index_es_v{constructor(){this.events=new c.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY="wc@2:ethereum_provider:",this.on=(t,r)=>(this.events.on(t,r),this),this.once=(t,r)=>(this.events.once(t,r),this),this.removeListener=(t,r)=>(this.events.removeListener(t,r),this),this.off=(t,r)=>(this.events.off(t,r),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){let r=new dist_index_es_v;return await r.initialize(t),r}async request(t){return await this.signer.request(t,this.formatChainId(this.chainId))}sendAsync(t,r){this.signer.sendAsync(t,r,this.formatChainId(this.chainId))}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);let{required:r,optional:i}=function(t){let{chains:r,optionalChains:i,methods:c,optionalMethods:l,events:_,optionalEvents:w,rpcMap:P}=t;if(!(0,v.qt)(r))throw Error("Invalid chains");let O={chains:r,methods:c||rb,events:_||rE,rpcMap:index_es_p({},r.length?{[ethereum_provider_dist_index_es_g(r)]:P[ethereum_provider_dist_index_es_g(r)]}:{})},C=_?.filter(t=>!rE.includes(t)),A=c?.filter(t=>!rb.includes(t));if(!i&&!w&&!l&&!(null!=C&&C.length)&&!(null!=A&&A.length))return{required:r.length?O:void 0};let T=C?.length&&A?.length||!i,q={chains:[...new Set(T?O.chains.concat(i||[]):i)],methods:[...new Set(O.methods.concat(null!=l&&l.length?l:rw))],events:[...new Set(O.events.concat(null!=w&&w.length?w:rI))],rpcMap:P};return{required:r.length?O:void 0,optional:i.length?q:void 0}}(this.rpc);try{let c=await new Promise(async(c,l)=>{var v;this.rpc.showQrModal&&(null==(v=this.modal)||v.subscribeModal(t=>{t.open||this.signer.session||(this.signer.abortPairingAttempt(),l(Error("Connection request reset. Please try again.")))})),await this.signer.connect(index_es_M(index_es_p({namespaces:index_es_p({},r&&{[this.namespace]:r})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:t?.pairingTopic})).then(t=>{c(t)}).catch(t=>{l(Error(t.message))})});if(!c)return;let l=(0,v.gu)(c.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:l),this.setAccounts(l),this.events.emit("connect",{chainId:f(this.chainId)})}catch(t){throw this.signer.logger.error(t),t}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",t=>{let{params:r}=t,{event:i}=r;"accountsChanged"===i.name?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===i.name?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",t)}),this.signer.on("chainChanged",t=>{let r=parseInt(t);this.chainId=r,this.events.emit("chainChanged",f(this.chainId)),this.persist()}),this.signer.on("session_update",t=>{this.events.emit("session_update",t)}),this.signer.on("session_delete",t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",index_es_M(index_es_p({},(0,v.D6)("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",t=>{var r,i;this.rpc.showQrModal&&(null==(r=this.modal)||r.closeModal(),null==(i=this.modal)||i.openModal({uri:t})),this.events.emit("display_uri",t)})}switchEthereumChain(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return"string"==typeof t&&t.startsWith(`${this.namespace}:`)}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){let r=t.filter(t=>this.isCompatibleChainId(t)).map(t=>this.parseChainId(t));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",f(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){let r=this.parseChainId(t);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(t){let[r,i,c]=t.split(":");return{chainId:`${r}:${i}`,address:c}}setAccounts(t){this.accounts=t.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var r,i;let c=null!=(r=t?.chains)?r:[],l=null!=(i=t?.optionalChains)?i:[],v=c.concat(l);if(!v.length)throw Error("No chains specified in either `chains` or `optionalChains`");let _=c.length?t?.methods||rb:[],w=c.length?t?.events||rE:[],P=t?.optionalMethods||[],O=t?.optionalEvents||[],C=t?.rpcMap||this.buildRpcMap(v,t.projectId),A=t?.qrModalOptions||void 0;return{chains:c?.map(t=>this.formatChainId(t)),optionalChains:l.map(t=>this.formatChainId(t)),methods:_,events:w,optionalMethods:P,optionalEvents:O,rpcMap:C,showQrModal:!!(null!=t&&t.showQrModal),qrModalOptions:A,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,r){let i={};return t.forEach(t=>{i[t]=this.getRpcUrl(t,r)}),i}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=this.rpc.chains.length?ethereum_provider_dist_index_es_g(this.rpc.chains):ethereum_provider_dist_index_es_g(this.rpc.optionalChains),this.signer=await index_es_lr.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing,relayUrl:t.relayUrl,storageOptions:t.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{let{WalletConnectModal:r}=await i.e(343).then(i.bind(i,59343));t=r}catch{throw Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(index_es_p({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(t){throw this.signer.logger.error(t),Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(t){if(!t)return;let{chains:r,optionalChains:i,rpcMap:c}=t;r&&(0,v.qt)(r)&&(this.rpc.chains=r.map(t=>this.formatChainId(t)),r.forEach(t=>{this.rpc.rpcMap[t]=c?.[t]||this.getRpcUrl(t)})),i&&(0,v.qt)(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i?.map(t=>this.formatChainId(t)),i.forEach(t=>{this.rpc.rpcMap[t]=c?.[t]||this.getRpcUrl(t)}))}getRpcUrl(t,r){var i;return(null==(i=this.rpc.rpcMap)?void 0:i[t])||`https://rpc.walletconnect.com/v1/?chainId=eip155:${t}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;let t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${t}`]?this.session.namespaces[`${this.namespace}:${t}`]:this.session.namespaces[this.namespace];this.setChainIds(t?[this.formatChainId(t)]:r?.accounts),this.setAccounts(r?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return"string"==typeof t||t instanceof String?[this.parseAccount(t)]:t.map(t=>this.parseAccount(t))}};let rA=dist_index_es_v},38200:function(t,r,i){"use strict";i.d(r,{q:function(){return IEvents}});let IEvents=class IEvents{}},30997:function(t,r,i){"use strict";i.r(r),i.d(r,{IEvents:function(){return c.q}});var c=i(38200)},32568:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HEARTBEAT_EVENTS=r.HEARTBEAT_INTERVAL=void 0;let c=i(66736);r.HEARTBEAT_INTERVAL=c.FIVE_SECONDS,r.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},53401:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0});let c=i(70655);c.__exportStar(i(32568),r)},38969:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HeartBeat=void 0;let c=i(70655),l=i(17187),v=i(66736),_=i(1614),w=i(53401);let HeartBeat=class HeartBeat extends _.IHeartBeat{constructor(t){super(t),this.events=new l.EventEmitter,this.interval=w.HEARTBEAT_INTERVAL,this.interval=(null==t?void 0:t.interval)||w.HEARTBEAT_INTERVAL}static init(t){return c.__awaiter(this,void 0,void 0,function*(){let r=new HeartBeat(t);return yield r.init(),r})}init(){return c.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}initialize(){return c.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),v.toMiliseconds(this.interval))})}pulse(){this.events.emit(w.HEARTBEAT_EVENTS.pulse)}};r.HeartBeat=HeartBeat},90772:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0});let c=i(70655);c.__exportStar(i(38969),r),c.__exportStar(i(1614),r),c.__exportStar(i(53401),r)},44174:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IHeartBeat=void 0;let c=i(30997);let IHeartBeat=class IHeartBeat extends c.IEvents{constructor(t){super()}};r.IHeartBeat=IHeartBeat},1614:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0});let c=i(70655);c.__exportStar(i(44174),r)},85150:function(t,r,i){"use strict";let c=i(70655),l=i(63954),v=c.__importDefault(i(30653)),_=i(59728);r.ZP=class{constructor(){this.localStorage=v.default}getKeys(){return c.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return c.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(_.parseEntry)})}getItem(t){return c.__awaiter(this,void 0,void 0,function*(){let r=this.localStorage.getItem(t);if(null!==r)return l.safeJsonParse(r)})}setItem(t,r){return c.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(t,l.safeJsonStringify(r))})}removeItem(t){return c.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(t)})}}},30653:function(t,r,i){"use strict";!function(){function LocalStorage(){}LocalStorage.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},LocalStorage.prototype.setItem=function(t,r){this[t]=String(r)},LocalStorage.prototype.removeItem=function(t){delete this[t]},LocalStorage.prototype.clear=function(){let t=this;Object.keys(t).forEach(function(r){t[r]=void 0,delete t[r]})},LocalStorage.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},LocalStorage.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),void 0!==i.g&&i.g.localStorage?t.exports=i.g.localStorage:"undefined"!=typeof window&&window.localStorage?t.exports=window.localStorage:t.exports=new LocalStorage}()},59728:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0});let c=i(70655);c.__exportStar(i(39076),r),c.__exportStar(i(20496),r)},39076:function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IKeyValueStorage=void 0,r.IKeyValueStorage=class{}},20496:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseEntry=void 0;let c=i(63954);r.parseEntry=function(t){var r;return[t[0],c.safeJsonParse(null!==(r=t[1])&&void 0!==r?r:"")]}},65727:function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PINO_CUSTOM_CONTEXT_KEY=r.PINO_LOGGER_DEFAULTS=void 0,r.PINO_LOGGER_DEFAULTS={level:"info"},r.PINO_CUSTOM_CONTEXT_KEY="custom_context"},9107:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.pino=void 0;let c=i(70655),l=c.__importDefault(i(36559));Object.defineProperty(r,"pino",{enumerable:!0,get:function(){return l.default}}),c.__exportStar(i(65727),r),c.__exportStar(i(58048),r)},58048:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generateChildLogger=r.formatChildLoggerContext=r.getLoggerContext=r.setBrowserLoggerContext=r.getBrowserLoggerContext=r.getDefaultLoggerOptions=void 0;let c=i(65727);function getBrowserLoggerContext(t,r=c.PINO_CUSTOM_CONTEXT_KEY){return t[r]||""}function setBrowserLoggerContext(t,r,i=c.PINO_CUSTOM_CONTEXT_KEY){return t[i]=r,t}function getLoggerContext(t,r=c.PINO_CUSTOM_CONTEXT_KEY){return void 0===t.bindings?getBrowserLoggerContext(t,r):t.bindings().context||""}function formatChildLoggerContext(t,r,i=c.PINO_CUSTOM_CONTEXT_KEY){let l=getLoggerContext(t,i),v=l.trim()?`${l}/${r}`:r;return v}r.getDefaultLoggerOptions=function(t){return Object.assign(Object.assign({},t),{level:(null==t?void 0:t.level)||c.PINO_LOGGER_DEFAULTS.level})},r.getBrowserLoggerContext=getBrowserLoggerContext,r.setBrowserLoggerContext=setBrowserLoggerContext,r.getLoggerContext=getLoggerContext,r.formatChildLoggerContext=formatChildLoggerContext,r.generateChildLogger=function(t,r,i=c.PINO_CUSTOM_CONTEXT_KEY){let l=formatChildLoggerContext(t,r,i),v=t.child({context:l});return setBrowserLoggerContext(v,l,i)}},43014:function(){},54098:function(t,r){var i="undefined"!=typeof self?self:this,c=function(){function F(){this.fetch=!1,this.DOMException=i.DOMException}return F.prototype=i,new F}();(function(t){var r={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};if(r.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(t){return t&&i.indexOf(Object.prototype.toString.call(t))>-1};function normalizeName(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw TypeError("Invalid character in header field name");return t.toLowerCase()}function normalizeValue(t){return"string"!=typeof t&&(t=String(t)),t}function iteratorFor(t){var i={next:function(){var r=t.shift();return{done:void 0===r,value:r}}};return r.iterable&&(i[Symbol.iterator]=function(){return i}),i}function Headers(t){this.map={},t instanceof Headers?t.forEach(function(t,r){this.append(r,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(r){this.append(r,t[r])},this)}function consumed(t){if(t.bodyUsed)return Promise.reject(TypeError("Already read"));t.bodyUsed=!0}function fileReaderReady(t){return new Promise(function(r,i){t.onload=function(){r(t.result)},t.onerror=function(){i(t.error)}})}function readBlobAsArrayBuffer(t){var r=new FileReader,i=fileReaderReady(r);return r.readAsArrayBuffer(t),i}function bufferClone(t){if(t.slice)return t.slice(0);var r=new Uint8Array(t.byteLength);return r.set(new Uint8Array(t)),r.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t){if("string"==typeof t)this._bodyText=t;else if(r.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(r.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else{var i;r.arrayBuffer&&r.blob&&(i=t)&&DataView.prototype.isPrototypeOf(i)?(this._bodyArrayBuffer=bufferClone(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||l(t))?this._bodyArrayBuffer=bufferClone(t):this._bodyText=t=Object.prototype.toString.call(t)}}else this._bodyText="";!this.headers.get("content-type")&&("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var t=consumed(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")},this.arrayBuffer=function(){return this._bodyArrayBuffer?consumed(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var t,r,i,c=consumed(this);if(c)return c;if(this._bodyBlob)return t=this._bodyBlob,i=fileReaderReady(r=new FileReader),r.readAsText(t),i;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var r=new Uint8Array(t),i=Array(r.length),c=0;c<r.length;c++)i[c]=String.fromCharCode(r[c]);return i.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},r.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}Headers.prototype.append=function(t,r){t=normalizeName(t),r=normalizeValue(r);var i=this.map[t];this.map[t]=i?i+", "+r:r},Headers.prototype.delete=function(t){delete this.map[normalizeName(t)]},Headers.prototype.get=function(t){return t=normalizeName(t),this.has(t)?this.map[t]:null},Headers.prototype.has=function(t){return this.map.hasOwnProperty(normalizeName(t))},Headers.prototype.set=function(t,r){this.map[normalizeName(t)]=normalizeValue(r)},Headers.prototype.forEach=function(t,r){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(r,this.map[i],i,this)},Headers.prototype.keys=function(){var t=[];return this.forEach(function(r,i){t.push(i)}),iteratorFor(t)},Headers.prototype.values=function(){var t=[];return this.forEach(function(r){t.push(r)}),iteratorFor(t)},Headers.prototype.entries=function(){var t=[];return this.forEach(function(r,i){t.push([i,r])}),iteratorFor(t)},r.iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Request(t,r){var i,c,l=(r=r||{}).body;if(t instanceof Request){if(t.bodyUsed)throw TypeError("Already read");this.url=t.url,this.credentials=t.credentials,r.headers||(this.headers=new Headers(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,l||null==t._bodyInit||(l=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=r.credentials||this.credentials||"same-origin",(r.headers||!this.headers)&&(this.headers=new Headers(r.headers)),this.method=(c=(i=r.method||this.method||"GET").toUpperCase(),v.indexOf(c)>-1?c:i),this.mode=r.mode||this.mode||null,this.signal=r.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&l)throw TypeError("Body not allowed for GET or HEAD requests");this._initBody(l)}function decode(t){var r=new FormData;return t.trim().split("&").forEach(function(t){if(t){var i=t.split("="),c=i.shift().replace(/\+/g," "),l=i.join("=").replace(/\+/g," ");r.append(decodeURIComponent(c),decodeURIComponent(l))}}),r}function Response(t,r){r||(r={}),this.type="default",this.status=void 0===r.status?200:r.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in r?r.statusText:"OK",this.headers=new Headers(r.headers),this.url=r.url||"",this._initBody(t)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var t=new Response(null,{status:0,statusText:""});return t.type="error",t};var _=[301,302,303,307,308];Response.redirect=function(t,r){if(-1===_.indexOf(r))throw RangeError("Invalid status code");return new Response(null,{status:r,headers:{location:t}})},t.DOMException=c.DOMException;try{new t.DOMException}catch(r){t.DOMException=function(t,r){this.message=t,this.name=r;var i=Error(t);this.stack=i.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function fetch(i,c){return new Promise(function(l,v){var _=new Request(i,c);if(_.signal&&_.signal.aborted)return v(new t.DOMException("Aborted","AbortError"));var w=new XMLHttpRequest;function abortXhr(){w.abort()}w.onload=function(){var t,r,i={status:w.status,statusText:w.statusText,headers:(t=w.getAllResponseHeaders()||"",r=new Headers,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var i=t.split(":"),c=i.shift().trim();if(c){var l=i.join(":").trim();r.append(c,l)}}),r)};i.url="responseURL"in w?w.responseURL:i.headers.get("X-Request-URL");var c="response"in w?w.response:w.responseText;l(new Response(c,i))},w.onerror=function(){v(TypeError("Network request failed"))},w.ontimeout=function(){v(TypeError("Network request failed"))},w.onabort=function(){v(new t.DOMException("Aborted","AbortError"))},w.open(_.method,_.url,!0),"include"===_.credentials?w.withCredentials=!0:"omit"===_.credentials&&(w.withCredentials=!1),"responseType"in w&&r.blob&&(w.responseType="blob"),_.headers.forEach(function(t,r){w.setRequestHeader(r,t)}),_.signal&&(_.signal.addEventListener("abort",abortXhr),w.onreadystatechange=function(){4===w.readyState&&_.signal.removeEventListener("abort",abortXhr)}),w.send(void 0===_._bodyInit?null:_._bodyInit)})}fetch.polyfill=!0,c.fetch||(c.fetch=fetch,c.Headers=Headers,c.Request=Request,c.Response=Response),t.Headers=Headers,t.Request=Request,t.Response=Response,t.fetch=fetch,Object.defineProperty(t,"__esModule",{value:!0})})({}),c.fetch.ponyfill=!0,delete c.fetch.polyfill,(r=c.fetch).default=c.fetch,r.fetch=c.fetch,r.Headers=c.Headers,r.Request=c.Request,r.Response=c.Response,t.exports=r},17187:function(t){"use strict";var r,i="object"==typeof Reflect?Reflect:null,c=i&&"function"==typeof i.apply?i.apply:function(t,r,i){return Function.prototype.apply.call(t,r,i)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var l=Number.isNaN||function(t){return t!=t};function EventEmitter(){EventEmitter.init.call(this)}t.exports=EventEmitter,t.exports.once=function(t,r){return new Promise(function(i,c){function errorListener(i){t.removeListener(r,resolver),c(i)}function resolver(){"function"==typeof t.removeListener&&t.removeListener("error",errorListener),i([].slice.call(arguments))}eventTargetAgnosticAddListener(t,r,resolver,{once:!0}),"error"!==r&&"function"==typeof t.on&&eventTargetAgnosticAddListener(t,"error",errorListener,{once:!0})})},EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var v=10;function checkListener(t){if("function"!=typeof t)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function _getMaxListeners(t){return void 0===t._maxListeners?EventEmitter.defaultMaxListeners:t._maxListeners}function _addListener(t,r,i,c){if(checkListener(i),void 0===(v=t._events)?(v=t._events=Object.create(null),t._eventsCount=0):(void 0!==v.newListener&&(t.emit("newListener",r,i.listener?i.listener:i),v=t._events),_=v[r]),void 0===_)_=v[r]=i,++t._eventsCount;else if("function"==typeof _?_=v[r]=c?[i,_]:[_,i]:c?_.unshift(i):_.push(i),(l=_getMaxListeners(t))>0&&_.length>l&&!_.warned){_.warned=!0;var l,v,_,w=Error("Possible EventEmitter memory leak detected. "+_.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=t,w.type=r,w.count=_.length,console&&console.warn&&console.warn(w)}return t}function onceWrapper(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(t,r,i){var c={fired:!1,wrapFn:void 0,target:t,type:r,listener:i},l=onceWrapper.bind(c);return l.listener=i,c.wrapFn=l,l}function _listeners(t,r,i){var c=t._events;if(void 0===c)return[];var l=c[r];return void 0===l?[]:"function"==typeof l?i?[l.listener||l]:[l]:i?function(t){for(var r=Array(t.length),i=0;i<r.length;++i)r[i]=t[i].listener||t[i];return r}(l):arrayClone(l,l.length)}function listenerCount(t){var r=this._events;if(void 0!==r){var i=r[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function arrayClone(t,r){for(var i=Array(r),c=0;c<r;++c)i[c]=t[c];return i}function eventTargetAgnosticAddListener(t,r,i,c){if("function"==typeof t.on)c.once?t.once(r,i):t.on(r,i);else if("function"==typeof t.addEventListener)t.addEventListener(r,function wrapListener(l){c.once&&t.removeEventListener(r,wrapListener),i(l)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(t){if("number"!=typeof t||t<0||l(t))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");v=t}}),EventEmitter.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||l(t))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function(t){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var l="error"===t,v=this._events;if(void 0!==v)l=l&&void 0===v.error;else if(!l)return!1;if(l){if(r.length>0&&(_=r[0]),_ instanceof Error)throw _;var _,w=Error("Unhandled error."+(_?" ("+_.message+")":""));throw w.context=_,w}var P=v[t];if(void 0===P)return!1;if("function"==typeof P)c(P,this,r);else for(var O=P.length,C=arrayClone(P,O),i=0;i<O;++i)c(C[i],this,r);return!0},EventEmitter.prototype.addListener=function(t,r){return _addListener(this,t,r,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(t,r){return _addListener(this,t,r,!0)},EventEmitter.prototype.once=function(t,r){return checkListener(r),this.on(t,_onceWrap(this,t,r)),this},EventEmitter.prototype.prependOnceListener=function(t,r){return checkListener(r),this.prependListener(t,_onceWrap(this,t,r)),this},EventEmitter.prototype.removeListener=function(t,r){var i,c,l,v,_;if(checkListener(r),void 0===(c=this._events)||void 0===(i=c[t]))return this;if(i===r||i.listener===r)0==--this._eventsCount?this._events=Object.create(null):(delete c[t],c.removeListener&&this.emit("removeListener",t,i.listener||r));else if("function"!=typeof i){for(l=-1,v=i.length-1;v>=0;v--)if(i[v]===r||i[v].listener===r){_=i[v].listener,l=v;break}if(l<0)return this;0===l?i.shift():function(t,r){for(;r+1<t.length;r++)t[r]=t[r+1];t.pop()}(i,l),1===i.length&&(c[t]=i[0]),void 0!==c.removeListener&&this.emit("removeListener",t,_||r)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(t){var r,i,c;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0==arguments.length){var l,v=Object.keys(i);for(c=0;c<v.length;++c)"removeListener"!==(l=v[c])&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(r=i[t]))this.removeListener(t,r);else if(void 0!==r)for(c=r.length-1;c>=0;c--)this.removeListener(t,r[c]);return this},EventEmitter.prototype.listeners=function(t){return _listeners(this,t,!0)},EventEmitter.prototype.rawListeners=function(t){return _listeners(this,t,!1)},EventEmitter.listenerCount=function(t,r){return"function"==typeof t.listenerCount?t.listenerCount(r):listenerCount.call(t,r)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},72307:function(t,r,i){t=i.nmd(t);var c,l,v,_="__lodash_hash_undefined__",w="[object Arguments]",P="[object Array]",O="[object Boolean]",C="[object Date]",A="[object Error]",T="[object Function]",q="[object Map]",M="[object Number]",k="[object Object]",$="[object Promise]",U="[object RegExp]",B="[object Set]",J="[object String]",Q="[object WeakMap]",X="[object ArrayBuffer]",et="[object DataView]",es=/^\[object .+?Constructor\]$/,eo=/^(?:0|[1-9]\d*)$/,ec={};ec["[object Float32Array]"]=ec["[object Float64Array]"]=ec["[object Int8Array]"]=ec["[object Int16Array]"]=ec["[object Int32Array]"]=ec["[object Uint8Array]"]=ec["[object Uint8ClampedArray]"]=ec["[object Uint16Array]"]=ec["[object Uint32Array]"]=!0,ec[w]=ec[P]=ec[X]=ec[O]=ec[et]=ec[C]=ec[A]=ec[T]=ec[q]=ec[M]=ec[k]=ec[U]=ec[B]=ec[J]=ec[Q]=!1;var eh="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,el="object"==typeof self&&self&&self.Object===Object&&self,ep=eh||el||Function("return this")(),ef=r&&!r.nodeType&&r,ed=ef&&t&&!t.nodeType&&t,eg=ed&&ed.exports===ef,ey=eg&&eh.process,em=function(){try{return ey&&ey.binding&&ey.binding("util")}catch(t){}}(),e_=em&&em.isTypedArray;function mapToArray(t){var r=-1,i=Array(t.size);return t.forEach(function(t,c){i[++r]=[c,t]}),i}function setToArray(t){var r=-1,i=Array(t.size);return t.forEach(function(t){i[++r]=t}),i}var eb=Array.prototype,ew=Function.prototype,eE=Object.prototype,eI=ep["__core-js_shared__"],eP=ew.toString,ex=eE.hasOwnProperty,eS=(c=/[^.]+$/.exec(eI&&eI.keys&&eI.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"",eR=eE.toString,eO=RegExp("^"+eP.call(ex).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),eC=eg?ep.Buffer:void 0,eA=ep.Symbol,eL=ep.Uint8Array,eN=eE.propertyIsEnumerable,ej=eb.splice,eT=eA?eA.toStringTag:void 0,eD=Object.getOwnPropertySymbols,ez=eC?eC.isBuffer:void 0,eM=(l=Object.keys,v=Object,function(t){return l(v(t))}),ek=getNative(ep,"DataView"),eH=getNative(ep,"Map"),e$=getNative(ep,"Promise"),eU=getNative(ep,"Set"),eV=getNative(ep,"WeakMap"),eB=getNative(Object,"create"),eK=toSource(ek),eJ=toSource(eH),eF=toSource(e$),eW=toSource(eU),eG=toSource(eV),eZ=eA?eA.prototype:void 0,eY=eZ?eZ.valueOf:void 0;function Hash(t){var r=-1,i=null==t?0:t.length;for(this.clear();++r<i;){var c=t[r];this.set(c[0],c[1])}}function ListCache(t){var r=-1,i=null==t?0:t.length;for(this.clear();++r<i;){var c=t[r];this.set(c[0],c[1])}}function MapCache(t){var r=-1,i=null==t?0:t.length;for(this.clear();++r<i;){var c=t[r];this.set(c[0],c[1])}}function SetCache(t){var r=-1,i=null==t?0:t.length;for(this.__data__=new MapCache;++r<i;)this.add(t[r])}function Stack(t){var r=this.__data__=new ListCache(t);this.size=r.size}function assocIndexOf(t,r){for(var i=t.length;i--;)if(eq(t[i][0],r))return i;return -1}function baseGetTag(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":eT&&eT in Object(t)?function(t){var r=ex.call(t,eT),i=t[eT];try{t[eT]=void 0;var c=!0}catch(t){}var l=eR.call(t);return c&&(r?t[eT]=i:delete t[eT]),l}(t):eR.call(t)}function baseIsArguments(t){return isObjectLike(t)&&baseGetTag(t)==w}function equalArrays(t,r,i,c,l,v){var _=1&i,w=t.length,P=r.length;if(w!=P&&!(_&&P>w))return!1;var O=v.get(t);if(O&&v.get(r))return O==r;var C=-1,A=!0,T=2&i?new SetCache:void 0;for(v.set(t,r),v.set(r,t);++C<w;){var q=t[C],M=r[C];if(c)var k=_?c(M,q,C,r,t,v):c(q,M,C,t,r,v);if(void 0!==k){if(k)continue;A=!1;break}if(T){if(!function(t,r){for(var i=-1,c=null==t?0:t.length;++i<c;)if(r(t[i],i,t))return!0;return!1}(r,function(t,r){if(!T.has(r)&&(q===t||l(q,t,i,c,v)))return T.push(r)})){A=!1;break}}else if(!(q===M||l(q,M,i,c,v))){A=!1;break}}return v.delete(t),v.delete(r),A}function getAllKeys(t){var r;return r=function(t){return null!=t&&isLength(t.length)&&!isFunction(t)?function(t,r){var i,c=e1(t),l=!c&&e0(t),v=!c&&!l&&e5(t),_=!c&&!l&&!v&&e6(t),w=c||l||v||_,P=w?function(t,r){for(var i=-1,c=Array(t);++i<t;)c[i]=r(i);return c}(t.length,String):[],O=P.length;for(var C in t)ex.call(t,C)&&!(w&&("length"==C||v&&("offset"==C||"parent"==C)||_&&("buffer"==C||"byteLength"==C||"byteOffset"==C)||(i=null==(i=O)?9007199254740991:i)&&("number"==typeof C||eo.test(C))&&C>-1&&C%1==0&&C<i))&&P.push(C);return P}(t):function(t){if(r=t&&t.constructor,t!==("function"==typeof r&&r.prototype||eE))return eM(t);var r,i=[];for(var c in Object(t))ex.call(t,c)&&"constructor"!=c&&i.push(c);return i}(t)}(t),e1(t)?r:function(t,r){for(var i=-1,c=r.length,l=t.length;++i<c;)t[l+i]=r[i];return t}(r,eQ(t))}function getMapData(t,r){var i,c=t.__data__;return("string"==(i=typeof r)||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?c["string"==typeof r?"string":"hash"]:c.map}function getNative(t,r){var i=null==t?void 0:t[r];return!(!isObject(i)||eS&&eS in i)&&(isFunction(i)?eO:es).test(toSource(i))?i:void 0}Hash.prototype.clear=function(){this.__data__=eB?eB(null):{},this.size=0},Hash.prototype.delete=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},Hash.prototype.get=function(t){var r=this.__data__;if(eB){var i=r[t];return i===_?void 0:i}return ex.call(r,t)?r[t]:void 0},Hash.prototype.has=function(t){var r=this.__data__;return eB?void 0!==r[t]:ex.call(r,t)},Hash.prototype.set=function(t,r){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=eB&&void 0===r?_:r,this},ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(t){var r=this.__data__,i=assocIndexOf(r,t);return!(i<0)&&(i==r.length-1?r.pop():ej.call(r,i,1),--this.size,!0)},ListCache.prototype.get=function(t){var r=this.__data__,i=assocIndexOf(r,t);return i<0?void 0:r[i][1]},ListCache.prototype.has=function(t){return assocIndexOf(this.__data__,t)>-1},ListCache.prototype.set=function(t,r){var i=this.__data__,c=assocIndexOf(i,t);return c<0?(++this.size,i.push([t,r])):i[c][1]=r,this},MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(eH||ListCache),string:new Hash}},MapCache.prototype.delete=function(t){var r=getMapData(this,t).delete(t);return this.size-=r?1:0,r},MapCache.prototype.get=function(t){return getMapData(this,t).get(t)},MapCache.prototype.has=function(t){return getMapData(this,t).has(t)},MapCache.prototype.set=function(t,r){var i=getMapData(this,t),c=i.size;return i.set(t,r),this.size+=i.size==c?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function(t){return this.__data__.set(t,_),this},SetCache.prototype.has=function(t){return this.__data__.has(t)},Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(t){var r=this.__data__,i=r.delete(t);return this.size=r.size,i},Stack.prototype.get=function(t){return this.__data__.get(t)},Stack.prototype.has=function(t){return this.__data__.has(t)},Stack.prototype.set=function(t,r){var i=this.__data__;if(i instanceof ListCache){var c=i.__data__;if(!eH||c.length<199)return c.push([t,r]),this.size=++i.size,this;i=this.__data__=new MapCache(c)}return i.set(t,r),this.size=i.size,this};var eQ=eD?function(t){return null==t?[]:function(t,r){for(var i=-1,c=null==t?0:t.length,l=0,v=[];++i<c;){var _=t[i];r(_,i,t)&&(v[l++]=_)}return v}(eD(t=Object(t)),function(r){return eN.call(t,r)})}:function(){return[]},eX=baseGetTag;function toSource(t){if(null!=t){try{return eP.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function eq(t,r){return t===r||t!=t&&r!=r}(ek&&eX(new ek(new ArrayBuffer(1)))!=et||eH&&eX(new eH)!=q||e$&&eX(e$.resolve())!=$||eU&&eX(new eU)!=B||eV&&eX(new eV)!=Q)&&(eX=function(t){var r=baseGetTag(t),i=r==k?t.constructor:void 0,c=i?toSource(i):"";if(c)switch(c){case eK:return et;case eJ:return q;case eF:return $;case eW:return B;case eG:return Q}return r});var e0=baseIsArguments(function(){return arguments}())?baseIsArguments:function(t){return isObjectLike(t)&&ex.call(t,"callee")&&!eN.call(t,"callee")},e1=Array.isArray,e5=ez||function(){return!1};function isFunction(t){if(!isObject(t))return!1;var r=baseGetTag(t);return r==T||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}function isLength(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function isObject(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)}function isObjectLike(t){return null!=t&&"object"==typeof t}var e6=e_?function(t){return e_(t)}:function(t){return isObjectLike(t)&&isLength(t.length)&&!!ec[baseGetTag(t)]};t.exports=function(t,r){return function baseIsEqual(t,r,i,c,l){return t===r||(null!=t&&null!=r&&(isObjectLike(t)||isObjectLike(r))?function(t,r,i,c,l,v){var _=e1(t),T=e1(r),$=_?P:eX(t),Q=T?P:eX(r);$=$==w?k:$,Q=Q==w?k:Q;var es=$==k,eo=Q==k,ec=$==Q;if(ec&&e5(t)){if(!e5(r))return!1;_=!0,es=!1}if(ec&&!es)return v||(v=new Stack),_||e6(t)?equalArrays(t,r,i,c,l,v):function(t,r,i,c,l,v,_){switch(i){case et:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)break;t=t.buffer,r=r.buffer;case X:if(t.byteLength!=r.byteLength||!v(new eL(t),new eL(r)))break;return!0;case O:case C:case M:return eq(+t,+r);case A:return t.name==r.name&&t.message==r.message;case U:case J:return t==r+"";case q:var w=mapToArray;case B:var P=1&c;if(w||(w=setToArray),t.size!=r.size&&!P)break;var T=_.get(t);if(T)return T==r;c|=2,_.set(t,r);var k=equalArrays(w(t),w(r),c,l,v,_);return _.delete(t),k;case"[object Symbol]":if(eY)return eY.call(t)==eY.call(r)}return!1}(t,r,$,i,c,l,v);if(!(1&i)){var eh=es&&ex.call(t,"__wrapped__"),el=eo&&ex.call(r,"__wrapped__");if(eh||el){var ep=eh?t.value():t,ef=el?r.value():r;return v||(v=new Stack),l(ep,ef,i,c,v)}}return!!ec&&(v||(v=new Stack),function(t,r,i,c,l,v){var _=1&i,w=getAllKeys(t),P=w.length;if(P!=getAllKeys(r).length&&!_)return!1;for(var O=P;O--;){var C=w[O];if(!(_?C in r:ex.call(r,C)))return!1}var A=v.get(t);if(A&&v.get(r))return A==r;var T=!0;v.set(t,r),v.set(r,t);for(var q=_;++O<P;){var M=t[C=w[O]],k=r[C];if(c)var $=_?c(k,M,C,r,t,v):c(M,k,C,t,r,v);if(!(void 0===$?M===k||l(M,k,i,c,v):$)){T=!1;break}q||(q="constructor"==C)}if(T&&!q){var U=t.constructor,B=r.constructor;U!=B&&"constructor"in t&&"constructor"in r&&!("function"==typeof U&&U instanceof U&&"function"==typeof B&&B instanceof B)&&(T=!1)}return v.delete(t),v.delete(r),T}(t,r,i,c,l,v))}(t,r,i,c,baseIsEqual,l):t!=t&&r!=r)}(t,r)}},85346:function(t){"use strict";function tryStringify(t){try{return JSON.stringify(t)}catch(t){return'"[Circular]"'}}t.exports=function(t,r,i){var c=i&&i.stringify||tryStringify;if("object"==typeof t&&null!==t){var l=r.length+1;if(1===l)return t;var v=Array(l);v[0]=c(t);for(var _=1;_<l;_++)v[_]=c(r[_]);return v.join(" ")}if("string"!=typeof t)return t;var w=r.length;if(0===w)return t;for(var P="",O=0,C=-1,A=t&&t.length||0,T=0;T<A;){if(37===t.charCodeAt(T)&&T+1<A){switch(C=C>-1?C:0,t.charCodeAt(T+1)){case 100:case 102:if(O>=w||null==r[O])break;C<T&&(P+=t.slice(C,T)),P+=Number(r[O]),C=T+2,T++;break;case 105:if(O>=w||null==r[O])break;C<T&&(P+=t.slice(C,T)),P+=Math.floor(Number(r[O])),C=T+2,T++;break;case 79:case 111:case 106:if(O>=w||void 0===r[O])break;C<T&&(P+=t.slice(C,T));var q=typeof r[O];if("string"===q){P+="'"+r[O]+"'",C=T+2,T++;break}if("function"===q){P+=r[O].name||"<anonymous>",C=T+2,T++;break}P+=c(r[O]),C=T+2,T++;break;case 115:if(O>=w)break;C<T&&(P+=t.slice(C,T)),P+=String(r[O]),C=T+2,T++;break;case 37:C<T&&(P+=t.slice(C,T)),P+="%",C=T+2,T++,O--}++O}++T}return -1===C?t:(C<A&&(P+=t.slice(C)),P)}},63954:function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.safeJsonParse=function(t){if("string"!=typeof t)throw Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch(r){return t}},r.safeJsonStringify=function(t){return"string"==typeof t?t:JSON.stringify(t,(t,r)=>void 0===r?null:r)}},57026:function(t){"use strict";t.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},36559:function(t,r,i){"use strict";let c=i(85346);t.exports=pino;let l=function(){function defd(t){return void 0!==t&&t}try{if("undefined"!=typeof globalThis)return globalThis;return Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return defd(self)||defd(window)||defd(this)||{}}}().console||{};function pino(t){var r;(t=t||{}).browser=t.browser||{};let i=t.browser.transmit;if(i&&"function"!=typeof i.send)throw Error("pino: transmit option must have a send function");let c=t.browser.write||l;t.browser.write&&(t.browser.asObject=!0);let v=t.serializers||{},_=function(t,r){if(Array.isArray(t)){let r=t.filter(function(t){return"!stdSerializers.err"!==t});return r}return!0===t&&Object.keys(r)}(t.browser.serialize,v),w=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(w=!1),"function"==typeof c&&(c.error=c.fatal=c.warn=c.info=c.debug=c.trace=c),!1===t.enabled&&(t.level="silent");let P=t.level||"info",O=Object.create(c);O.log||(O.log=noop),Object.defineProperty(O,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(O,"level",{get:function(){return this._level},set:function(t){if("silent"!==t&&!this.levels.values[t])throw Error("unknown level "+t);this._level=t,set(C,O,"error","log"),set(C,O,"fatal","error"),set(C,O,"warn","error"),set(C,O,"info","log"),set(C,O,"debug","log"),set(C,O,"trace","log")}});let C={transmit:i,serialize:_,asObject:t.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:"function"==typeof(r=t).timestamp?r.timestamp:!1===r.timestamp?nullTime:epochTime};return O.levels=pino.levels,O.level=P,O.setMaxListeners=O.getMaxListeners=O.emit=O.addListener=O.on=O.prependListener=O.once=O.prependOnceListener=O.removeListener=O.removeAllListeners=O.listeners=O.listenerCount=O.eventNames=O.write=O.flush=noop,O.serializers=v,O._serialize=_,O._stdErrSerialize=w,O.child=function(r,c){if(!r)throw Error("missing bindings for child Pino");c=c||{},_&&r.serializers&&(c.serializers=r.serializers);let l=c.serializers;if(_&&l){var w=Object.assign({},v,l),P=!0===t.browser.serialize?Object.keys(w):_;delete r.serializers,applySerializers([r],P,w,this._stdErrSerialize)}function Child(t){this._childLevel=(0|t._childLevel)+1,this.error=bind(t,r,"error"),this.fatal=bind(t,r,"fatal"),this.warn=bind(t,r,"warn"),this.info=bind(t,r,"info"),this.debug=bind(t,r,"debug"),this.trace=bind(t,r,"trace"),w&&(this.serializers=w,this._serialize=P),i&&(this._logEvent=createLogEventShape([].concat(t._logEvent.bindings,r)))}return Child.prototype=this,new Child(this)},i&&(O._logEvent=createLogEventShape()),O}function set(t,r,i,v){let _=Object.getPrototypeOf(r);r[i]=r.levelVal>r.levels.values[i]?noop:_[i]?_[i]:l[i]||l[v]||noop,function(t,r,i){if(t.transmit||r[i]!==noop){var v;r[i]=(v=r[i],function(){let _=t.timestamp(),w=Array(arguments.length),P=Object.getPrototypeOf&&Object.getPrototypeOf(this)===l?l:this;for(var O=0;O<w.length;O++)w[O]=arguments[O];if(t.serialize&&!t.asObject&&applySerializers(w,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?v.call(P,function(t,r,i,l){t._serialize&&applySerializers(i,t._serialize,t.serializers,t._stdErrSerialize);let v=i.slice(),_=v[0],w={};l&&(w.time=l),w.level=pino.levels.values[r];let P=(0|t._childLevel)+1;if(P<1&&(P=1),null!==_&&"object"==typeof _){for(;P--&&"object"==typeof v[0];)Object.assign(w,v.shift());_=v.length?c(v.shift(),v):void 0}else"string"==typeof _&&(_=c(v.shift(),v));return void 0!==_&&(w.msg=_),w}(this,i,w,_)):v.apply(P,w),t.transmit){let c=t.transmit.level||r.level,l=pino.levels.values[c],v=pino.levels.values[i];if(v<l)return;(function(t,r,i){let c=r.send,l=r.ts,v=r.methodLevel,_=r.methodValue,w=r.val,P=t._logEvent.bindings;applySerializers(i,t._serialize||Object.keys(t.serializers),t.serializers,void 0===t._stdErrSerialize||t._stdErrSerialize),t._logEvent.ts=l,t._logEvent.messages=i.filter(function(t){return -1===P.indexOf(t)}),t._logEvent.level.label=v,t._logEvent.level.value=_,c(v,t._logEvent,w),t._logEvent=createLogEventShape(P)})(this,{ts:_,methodLevel:i,methodValue:v,transmitLevel:c,transmitValue:pino.levels.values[t.transmit.level||r.level],send:t.transmit.send,val:r.levelVal},w)}})}}(t,r,i)}function applySerializers(t,r,i,c){for(let l in t)if(c&&t[l]instanceof Error)t[l]=pino.stdSerializers.err(t[l]);else if("object"==typeof t[l]&&!Array.isArray(t[l]))for(let c in t[l])r&&r.indexOf(c)>-1&&c in i&&(t[l][c]=i[c](t[l][c]))}function bind(t,r,i){return function(){let c=Array(1+arguments.length);c[0]=r;for(var l=1;l<c.length;l++)c[l]=arguments[l-1];return t[i].apply(this,c)}}function createLogEventShape(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function mock(){return{}}function passthrough(t){return t}function noop(){}function nullTime(){return!1}function epochTime(){return Date.now()}pino.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},pino.stdSerializers={mapHttpRequest:mock,mapHttpResponse:mock,wrapRequestSerializer:passthrough,wrapResponseSerializer:passthrough,wrapErrorSerializer:passthrough,req:mock,res:mock,err:function(t){let r={type:t.constructor.name,msg:t.message,stack:t.stack};for(let i in t)void 0===r[i]&&(r[i]=t[i]);return r}},pino.stdTimeFunctions=Object.assign({},{nullTime,epochTime,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})}}]);